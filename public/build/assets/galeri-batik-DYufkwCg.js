import{u as B,r as g,a as F,j as e,H,b as P}from"./app-D7ti-8bC.js";import{S as G,H as E}from"./layout-CtIlcCzV.js";import{L as d,I as x,a as m}from"./label-6NutONTY.js";import{B as o}from"./button-DinFuah3.js";import{D as L,a as A,b as O,c as z,d as R,e as K}from"./dialog-D9sTnP1G.js";import{T as U,a as J,b as D,c as r,d as M,e as t}from"./table-CVU-ALux.js";import{T as Y}from"./textarea-CmaoFFdV.js";import{G as q}from"./guest-layout-DFLM9Bqc.js";import{z as Q}from"./transition-DmrmV9t7.js";import"./app-BLXFFo_v.js";import"./index-BhBB2xAz.js";import"./utils-CBfrqCZ4.js";import"./index-EANWE-hq.js";import"./index-B3csRZvV.js";import"./x-CCN6Xg9p.js";import"./createLucideIcon-DohihXQB.js";import"./proxy-Cjrz2Bfk.js";function he(){const{galleries:N}=B().props,[T,u]=g.useState(!1),[n,j]=g.useState(null),[f,l]=g.useState(null),{data:h,setData:s,post:b,errors:c,processing:k,recentlySuccessful:S,reset:v,clearErrors:C}=F({name:"",origin:"",description:"",image_path:null,_method:"POST"}),I=a=>{a.preventDefault();const i=()=>{p()};n?b(route("galeri-batik.update",n.id),{onSuccess:i,preserveScroll:!0,forceFormData:!0}):b(route("galeri-batik.store"),{onSuccess:i,preserveScroll:!0,forceFormData:!0})},_=a=>{const i=a.target.files?.[0]||null;s("image_path",i),l(i?URL.createObjectURL(i):null)},y=(a=null)=>{C(),j(a),a?(s({name:a.name,origin:a.origin,description:a.description||"",image_path:null,_method:"PATCH"}),l(a.image_path||null)):(v(),s("_method","POST"),l(null)),u(!0)},p=()=>{u(!1),j(null),v(),l(null)},w=a=>{window.confirm("Apakah Anda yakin ingin menghapus item ini dari galeri?")&&P.delete(route("galeri-batik.destroy",a),{preserveScroll:!0})};return e.jsxs(q,{children:[e.jsx(H,{title:"Kelola Galeri Batik"}),e.jsx(G,{children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsx(E,{title:"Galeri Batik",description:"Kelola daftar koleksi batik yang ada di dalam galeri."}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{onClick:()=>y(),children:"Tambah Item Baru"})}),e.jsxs(U,{children:[e.jsx(J,{children:e.jsxs(D,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Gambar"})," ",e.jsx(r,{children:"Nama"}),e.jsx(r,{children:"Asal Daerah"}),e.jsx(r,{children:"Deskripsi"}),e.jsx(r,{className:"text-right",children:"Aksi"})]})}),e.jsx(M,{children:N.map(a=>e.jsxs(D,{children:[e.jsx(t,{children:a.id}),e.jsx(t,{children:a.image_path?e.jsx("img",{src:a.image_path,alt:a.name,className:"h-12 w-12 rounded-md object-cover"}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-gray-200 text-xs text-gray-500",children:"No Image"})}),e.jsx(t,{className:"font-medium",children:a.name}),e.jsx(t,{children:a.origin}),e.jsx(t,{children:a.description}),e.jsxs(t,{className:"space-x-2 text-right",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>y(a),children:"Edit"}),e.jsx(o,{variant:"destructive",size:"sm",onClick:()=>w(a.id),children:"Hapus"})]})]},a.id))})]}),e.jsx(L,{open:T,onOpenChange:a=>!a&&p(),children:e.jsxs(A,{className:"sm:max-w-[425px]",children:[e.jsxs(O,{children:[e.jsx(z,{children:n?"Edit Item Galeri":"Tambah Item Baru"}),e.jsx(R,{children:n?"Lakukan perubahan pada detail item di bawah ini.":"Isi detail untuk menambahkan item baru ke dalam galeri."})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Nama"}),e.jsx(x,{id:"name",value:h.name,onChange:a=>s("name",a.target.value),placeholder:"Contoh: Batik Parang"}),e.jsx(m,{message:c.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"origin",children:"Asal Daerah"}),e.jsx(x,{id:"origin",value:h.origin,onChange:a=>s("origin",a.target.value),placeholder:"Contoh: Yogyakarta"}),e.jsx(m,{message:c.origin})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"description",children:"Deskripsi"}),e.jsx(Y,{id:"description",placeholder:"Jelaskan sedikit tentang item batik ini...",className:"resize-none",value:h.description,onChange:a=>s("description",a.target.value)}),e.jsx(m,{message:c.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"image_path",children:"Gambar Batik"}),e.jsx(x,{id:"image_path",type:"file",accept:"image/*",onChange:_}),e.jsx(m,{message:c.image_path}),f&&e.jsx("img",{src:f,alt:"Preview",className:"mt-2 h-24 w-24 rounded-md object-cover"})]}),e.jsxs(K,{children:[e.jsx(o,{type:"button",variant:"secondary",onClick:p,children:"Batal"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{type:"submit",disabled:k,children:k?"Menyimpan...":n?"Simpan Perubahan":"Tambah Item"}),e.jsx(Q,{show:S,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Tersimpan."})})]})]})]})]})})]})})]})}export{he as default};
