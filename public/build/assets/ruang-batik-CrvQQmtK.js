import{c as Hc,g as Yl,b as Ih,d as $h,r as Ut,U as ae,j as yt}from"./app-DRjE6L6n.js";import{G as _f}from"./guest-layout-CNo1euXn.js";import{c as Fr}from"./createLucideIcon-DyUSLJlp.js";/* empty css            */import"./proxy-CnWi1WkG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bf=Fr("CircleHelp",Sf);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Ef=Fr("Eraser",Cf);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xf=Fr("Pen",Tf);var Vl={exports:{}},ii={},xr={},Nr={},Lc;function bt(){return Lc||(Lc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h._registerNode=h.Konva=h.glob=void 0;const r=Math.PI/180;function H(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}h.glob=typeof Hc<"u"?Hc:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},h.Konva={_global:h.glob,version:"9.3.22",isBrowser:H(),isUnminified:/param/.test((function(C){}).toString()),dblClickWindow:400,getAngle(C){return h.Konva.angleDeg?C*r:C},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return h.Konva.DD.isDragging},isTransforming(){var C;return(C=h.Konva.Transformer)===null||C===void 0?void 0:C.isTransforming()},isDragReady(){return!!h.Konva.DD.node},releaseCanvasOnDestroy:!0,document:h.glob.document,_injectGlobal(C){h.glob.Konva=C}};const G=C=>{h.Konva[C.prototype.getClassName()]=C};h._registerNode=G,h.Konva._injectGlobal(h.Konva)}(Nr)),Nr}var Ar={},Vc;function wt(){return Vc||(Vc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Util=h.Transform=void 0;const r=bt();class H{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new H(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const x=this.m;return{x:x[0]*_.x+x[2]*_.y+x[4],y:x[1]*_.x+x[3]*_.y+x[5]}}translate(_,x){return this.m[4]+=this.m[0]*_+this.m[2]*x,this.m[5]+=this.m[1]*_+this.m[3]*x,this}scale(_,x){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=x,this.m[3]*=x,this}rotate(_){const x=Math.cos(_),U=Math.sin(_),K=this.m[0]*x+this.m[2]*U,N=this.m[1]*x+this.m[3]*U,R=this.m[0]*-U+this.m[2]*x,D=this.m[1]*-U+this.m[3]*x;return this.m[0]=K,this.m[1]=N,this.m[2]=R,this.m[3]=D,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,x){const U=this.m[0]+this.m[2]*x,K=this.m[1]+this.m[3]*x,N=this.m[2]+this.m[0]*_,R=this.m[3]+this.m[1]*_;return this.m[0]=U,this.m[1]=K,this.m[2]=N,this.m[3]=R,this}multiply(_){const x=this.m[0]*_.m[0]+this.m[2]*_.m[1],U=this.m[1]*_.m[0]+this.m[3]*_.m[1],K=this.m[0]*_.m[2]+this.m[2]*_.m[3],N=this.m[1]*_.m[2]+this.m[3]*_.m[3],R=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],D=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=x,this.m[1]=U,this.m[2]=K,this.m[3]=N,this.m[4]=R,this.m[5]=D,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),x=this.m[3]*_,U=-this.m[1]*_,K=-this.m[2]*_,N=this.m[0]*_,R=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),D=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=x,this.m[1]=U,this.m[2]=K,this.m[3]=N,this.m[4]=R,this.m[5]=D,this}getMatrix(){return this.m}decompose(){const _=this.m[0],x=this.m[1],U=this.m[2],K=this.m[3],N=this.m[4],R=this.m[5],D=_*K-x*U,V={x:N,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||x!=0){const w=Math.sqrt(_*_+x*x);V.rotation=x>0?Math.acos(_/w):-Math.acos(_/w),V.scaleX=w,V.scaleY=D/w,V.skewX=(_*U+x*K)/D,V.skewY=0}else if(U!=0||K!=0){const w=Math.sqrt(U*U+K*K);V.rotation=Math.PI/2-(K>0?Math.acos(-U/w):-Math.acos(U/w)),V.scaleX=D/w,V.scaleY=w,V.skewX=0,V.skewY=(_*U+x*K)/D}return V.rotation=h.Util._getRotation(V.rotation),V}}h.Transform=H;const G="[object Array]",C="[object Number]",v="[object String]",g="[object Boolean]",d=Math.PI/180,f=180/Math.PI,p="#",y="",T="0",m="Konva warning: ",u="Konva error: ",o="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let O=[];const c=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};h.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===G},_isNumber(s){return Object.prototype.toString.call(s)===C&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===v},_isBoolean(s){return Object.prototype.toString.call(s)===g},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const _=s[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){O.push(s),O.length===1&&c(function(){const _=O;O=[],_.forEach(function(x){x()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,_){const x=h.Util.createImageElement();x.onload=function(){_(x)},x.src=s},_rgbToHex(s,_,x){return((1<<24)+(s<<16)+(_<<8)+x).toString(16).slice(1)},_hexToRgb(s){s=s.replace(p,y);const _=parseInt(s,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=T+s;return p+s},getRGB(s){let _;return s in b?(_=b[s],{r:_[0],g:_[1],b:_[2]}):s[0]===p?this._hexToRgb(s.substring(1)):s.substr(0,4)===o?(_=E.exec(s.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",h.Util._namedColorToRBA(s)||h.Util._hex3ColorToRGBA(s)||h.Util._hex4ColorToRGBA(s)||h.Util._hex6ColorToRGBA(s)||h.Util._hex8ColorToRGBA(s)||h.Util._rgbColorToRGBA(s)||h.Util._rgbaColorToRGBA(s)||h.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const _=b[s.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const _=s.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const _=s.split(/ *, */).map((x,U)=>x.slice(-1)==="%"?U===3?parseInt(x)/100:parseInt(x)/100*255:Number(x));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[_,...x]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),U=Number(x[0])/360,K=Number(x[1])/100,N=Number(x[2])/100;let R,D,V;if(K===0)return V=N*255,{r:Math.round(V),g:Math.round(V),b:Math.round(V),a:1};N<.5?R=N*(1+K):R=N+K-N*K;const w=2*N-R,X=[0,0,0];for(let F=0;F<3;F++)D=U+1/3*-(F-1),D<0&&D++,D>1&&D--,6*D<1?V=w+(R-w)*6*D:2*D<1?V=R:3*D<2?V=w+(R-w)*(2/3-D)*6:V=w,X[F]=V*255;return{r:Math.round(X[0]),g:Math.round(X[1]),b:Math.round(X[2]),a:1}}},haveIntersection(s,_){return!(_.x>s.x+s.width||_.x+_.width<s.x||_.y>s.y+s.height||_.y+_.height<s.y)},cloneObject(s){const _={};for(const x in s)this._isPlainObject(s[x])?_[x]=this.cloneObject(s[x]):this._isArray(s[x])?_[x]=this.cloneArray(s[x]):_[x]=s[x];return _},cloneArray(s){return s.slice(0)},degToRad(s){return s*d},radToDeg(s){return s*f},_degToRad(s){return h.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),h.Util.degToRad(s)},_radToDeg(s){return h.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),h.Util.radToDeg(s)},_getRotation(s){return r.Konva.angleDeg?h.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(u+s)},error(s){console.error(u+s)},warn(s){r.Konva.showWarnings&&console.warn(m+s)},each(s,_){for(const x in s)_(x,s[x])},_inRange(s,_,x){return _<=s&&s<x},_getProjectionToSegment(s,_,x,U,K,N){let R,D,V;const w=(s-x)*(s-x)+(_-U)*(_-U);if(w==0)R=s,D=_,V=(K-x)*(K-x)+(N-U)*(N-U);else{const X=((K-s)*(x-s)+(N-_)*(U-_))/w;X<0?(R=s,D=_,V=(s-K)*(s-K)+(_-N)*(_-N)):X>1?(R=x,D=U,V=(x-K)*(x-K)+(U-N)*(U-N)):(R=s+X*(x-s),D=_+X*(U-_),V=(R-K)*(R-K)+(D-N)*(D-N))}return[R,D,V]},_getProjectionToLine(s,_,x){const U=h.Util.cloneObject(s);let K=Number.MAX_VALUE;return _.forEach(function(N,R){if(!x&&R===_.length-1)return;const D=_[(R+1)%_.length],V=h.Util._getProjectionToSegment(N.x,N.y,D.x,D.y,s.x,s.y),w=V[0],X=V[1],F=V[2];F<K&&(U.x=w,U.y=X,K=F)}),U},_prepareArrayForTween(s,_,x){const U=[],K=[];if(s.length>_.length){const R=_;_=s,s=R}for(let R=0;R<s.length;R+=2)U.push({x:s[R],y:s[R+1]});for(let R=0;R<_.length;R+=2)K.push({x:_[R],y:_[R+1]});const N=[];return K.forEach(function(R){const D=h.Util._getProjectionToLine(R,U,x);N.push(D.x),N.push(D.y)}),N},_prepareToStringify(s){let _;s.visitedByCircularReferenceRemoval=!0;for(const x in s)if(s.hasOwnProperty(x)&&s[x]&&typeof s[x]=="object"){if(_=Object.getOwnPropertyDescriptor(s,x),s[x].visitedByCircularReferenceRemoval||h.Util._isElement(s[x]))if(_.configurable)delete s[x];else return null;else if(h.Util._prepareToStringify(s[x])===null)if(_.configurable)delete s[x];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,_){for(const x in _)s[x]=_[x];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){r.Konva.releaseCanvasOnDestroy&&s.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(s,_,x,U){let K=0,N=0,R=0,D=0;typeof U=="number"?K=N=R=D=Math.min(U,_/2,x/2):(K=Math.min(U[0]||0,_/2,x/2),N=Math.min(U[1]||0,_/2,x/2),D=Math.min(U[2]||0,_/2,x/2),R=Math.min(U[3]||0,_/2,x/2)),s.moveTo(K,0),s.lineTo(_-N,0),s.arc(_-N,N,N,Math.PI*3/2,0,!1),s.lineTo(_,x-D),s.arc(_-D,x-D,D,0,Math.PI/2,!1),s.lineTo(R,x),s.arc(R,x-R,R,Math.PI/2,Math.PI,!1),s.lineTo(0,K),s.arc(K,K,K,Math.PI,Math.PI*3/2,!1)}}}(Ar)),Ar}var li={},ca={},ha={},qc;function t0(){if(qc)return ha;qc=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.HitContext=ha.SceneContext=ha.Context=void 0;const h=wt(),r=bt();function H(O){const c=[],s=O.length,_=h.Util;for(let x=0;x<s;x++){let U=O[x];_._isNumber(U)?U=Math.round(U*1e3)/1e3:_._isString(U)||(U=U+""),c.push(U)}return c}const G=",",C="(",v=")",g="([",d="])",f=";",p="()",y="=",T=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],u=100;let o=class{constructor(c){this.canvas=c,r.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(c){c.fillEnabled()&&this._fill(c)}_fill(c){}strokeShape(c){c.hasStroke()&&this._stroke(c)}_stroke(c){}fillStrokeShape(c){c.attrs.fillAfterStrokeEnabled?(this.strokeShape(c),this.fillShape(c)):(this.fillShape(c),this.strokeShape(c))}getTrace(c,s){let _=this.traceArr,x=_.length,U="",K,N,R,D;for(K=0;K<x;K++)N=_[K],R=N.method,R?(D=N.args,U+=R,c?U+=p:h.Util._isArray(D[0])?U+=g+D.join(G)+d:(s&&(D=D.map(V=>typeof V=="number"?Math.floor(V):V)),U+=C+D.join(G)+v)):(U+=N.property,c||(U+=y+N.val)),U+=f;return U}clearTrace(){this.traceArr=[]}_trace(c){let s=this.traceArr,_;s.push(c),_=s.length,_>=u&&s.shift()}reset(){const c=this.getCanvas().getPixelRatio();this.setTransform(1*c,0,0,1*c,0,0)}getCanvas(){return this.canvas}clear(c){const s=this.getCanvas();c?this.clearRect(c.x||0,c.y||0,c.width||0,c.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(c){const s=c.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(c){const s=c.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(c){const s=c.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(c,s){this._context[c]=s}arc(c,s,_,x,U,K){this._context.arc(c,s,_,x,U,K)}arcTo(c,s,_,x,U){this._context.arcTo(c,s,_,x,U)}beginPath(){this._context.beginPath()}bezierCurveTo(c,s,_,x,U,K){this._context.bezierCurveTo(c,s,_,x,U,K)}clearRect(c,s,_,x){this._context.clearRect(c,s,_,x)}clip(...c){this._context.clip.apply(this._context,c)}closePath(){this._context.closePath()}createImageData(c,s){const _=arguments;if(_.length===2)return this._context.createImageData(c,s);if(_.length===1)return this._context.createImageData(c)}createLinearGradient(c,s,_,x){return this._context.createLinearGradient(c,s,_,x)}createPattern(c,s){return this._context.createPattern(c,s)}createRadialGradient(c,s,_,x,U,K){return this._context.createRadialGradient(c,s,_,x,U,K)}drawImage(c,s,_,x,U,K,N,R,D){const V=arguments,w=this._context;V.length===3?w.drawImage(c,s,_):V.length===5?w.drawImage(c,s,_,x,U):V.length===9&&w.drawImage(c,s,_,x,U,K,N,R,D)}ellipse(c,s,_,x,U,K,N,R){this._context.ellipse(c,s,_,x,U,K,N,R)}isPointInPath(c,s,_,x){return _?this._context.isPointInPath(_,c,s,x):this._context.isPointInPath(c,s,x)}fill(...c){this._context.fill.apply(this._context,c)}fillRect(c,s,_,x){this._context.fillRect(c,s,_,x)}strokeRect(c,s,_,x){this._context.strokeRect(c,s,_,x)}fillText(c,s,_,x){x?this._context.fillText(c,s,_,x):this._context.fillText(c,s,_)}measureText(c){return this._context.measureText(c)}getImageData(c,s,_,x){return this._context.getImageData(c,s,_,x)}lineTo(c,s){this._context.lineTo(c,s)}moveTo(c,s){this._context.moveTo(c,s)}rect(c,s,_,x){this._context.rect(c,s,_,x)}roundRect(c,s,_,x,U){this._context.roundRect(c,s,_,x,U)}putImageData(c,s,_){this._context.putImageData(c,s,_)}quadraticCurveTo(c,s,_,x){this._context.quadraticCurveTo(c,s,_,x)}restore(){this._context.restore()}rotate(c){this._context.rotate(c)}save(){this._context.save()}scale(c,s){this._context.scale(c,s)}setLineDash(c){this._context.setLineDash?this._context.setLineDash(c):"mozDash"in this._context?this._context.mozDash=c:"webkitLineDash"in this._context&&(this._context.webkitLineDash=c)}getLineDash(){return this._context.getLineDash()}setTransform(c,s,_,x,U,K){this._context.setTransform(c,s,_,x,U,K)}stroke(c){c?this._context.stroke(c):this._context.stroke()}strokeText(c,s,_,x){this._context.strokeText(c,s,_,x)}transform(c,s,_,x,U,K){this._context.transform(c,s,_,x,U,K)}translate(c,s){this._context.translate(c,s)}_enableTrace(){let c=this,s=T.length,_=this.setAttr,x,U;const K=function(N){let R=c[N],D;c[N]=function(){return U=H(Array.prototype.slice.call(arguments,0)),D=R.apply(c,arguments),c._trace({method:N,args:U}),D}};for(x=0;x<s;x++)K(T[x]);c.setAttr=function(){_.apply(c,arguments);const N=arguments[0];let R=arguments[1];(N==="shadowOffsetX"||N==="shadowOffsetY"||N==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),c._trace({property:N,val:R})}}_applyGlobalCompositeOperation(c){const s=c.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};ha.Context=o,m.forEach(function(O){Object.defineProperty(o.prototype,O,{get(){return this._context[O]},set(c){this._context[O]=c}})});class b extends o{constructor(c,{willReadFrequently:s=!1}={}){super(c),this._context=c._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(c){const s=c.fill();this.setAttr("fillStyle",s),c._fillFunc(this)}_fillPattern(c){this.setAttr("fillStyle",c._getFillPattern()),c._fillFunc(this)}_fillLinearGradient(c){const s=c._getLinearGradient();s&&(this.setAttr("fillStyle",s),c._fillFunc(this))}_fillRadialGradient(c){const s=c._getRadialGradient();s&&(this.setAttr("fillStyle",s),c._fillFunc(this))}_fill(c){const s=c.fill(),_=c.getFillPriority();if(s&&_==="color"){this._fillColor(c);return}const x=c.getFillPatternImage();if(x&&_==="pattern"){this._fillPattern(c);return}const U=c.getFillLinearGradientColorStops();if(U&&_==="linear-gradient"){this._fillLinearGradient(c);return}const K=c.getFillRadialGradientColorStops();if(K&&_==="radial-gradient"){this._fillRadialGradient(c);return}s?this._fillColor(c):x?this._fillPattern(c):U?this._fillLinearGradient(c):K&&this._fillRadialGradient(c)}_strokeLinearGradient(c){const s=c.getStrokeLinearGradientStartPoint(),_=c.getStrokeLinearGradientEndPoint(),x=c.getStrokeLinearGradientColorStops(),U=this.createLinearGradient(s.x,s.y,_.x,_.y);if(x){for(let K=0;K<x.length;K+=2)U.addColorStop(x[K],x[K+1]);this.setAttr("strokeStyle",U)}}_stroke(c){const s=c.dash(),_=c.getStrokeScaleEnabled();if(c.hasStroke()){if(!_){this.save();const U=this.getCanvas().getPixelRatio();this.setTransform(U,0,0,U,0,0)}this._applyLineCap(c),s&&c.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",c.dashOffset())),this.setAttr("lineWidth",c.strokeWidth()),c.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),c.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(c):this.setAttr("strokeStyle",c.stroke()),c._strokeFunc(this),_||this.restore()}}_applyShadow(c){var s,_,x;const U=(s=c.getShadowRGBA())!==null&&s!==void 0?s:"black",K=(_=c.getShadowBlur())!==null&&_!==void 0?_:5,N=(x=c.getShadowOffset())!==null&&x!==void 0?x:{x:0,y:0},R=c.getAbsoluteScale(),D=this.canvas.getPixelRatio(),V=R.x*D,w=R.y*D;this.setAttr("shadowColor",U),this.setAttr("shadowBlur",K*Math.min(Math.abs(V),Math.abs(w))),this.setAttr("shadowOffsetX",N.x*V),this.setAttr("shadowOffsetY",N.y*w)}}ha.SceneContext=b;class E extends o{constructor(c){super(c),this._context=c._canvas.getContext("2d",{willReadFrequently:!0})}_fill(c){this.save(),this.setAttr("fillStyle",c.colorKey),c._fillFuncHit(this),this.restore()}strokeShape(c){c.hasHitStroke()&&this._stroke(c)}_stroke(c){if(c.hasHitStroke()){const s=c.getStrokeScaleEnabled();if(!s){this.save();const U=this.getCanvas().getPixelRatio();this.setTransform(U,0,0,U,0,0)}this._applyLineCap(c);const _=c.hitStrokeWidth(),x=_==="auto"?c.strokeWidth():_;this.setAttr("lineWidth",x),this.setAttr("strokeStyle",c.colorKey),c._strokeFuncHit(this),s||this.restore()}}}return ha.HitContext=E,ha}var Pc;function Fl(){if(Pc)return ca;Pc=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.HitCanvas=ca.SceneCanvas=ca.Canvas=void 0;const h=wt(),r=t0(),H=bt();let G;function C(){if(G)return G;const f=h.Util.createCanvasElement(),p=f.getContext("2d");return G=function(){const y=H.Konva._global.devicePixelRatio||1,T=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return y/T}(),h.Util.releaseCanvas(f),G}let v=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const T=(p||{}).pixelRatio||H.Konva.pixelRatio||C();this.pixelRatio=T,this._canvas=h.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const y=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/y,this.getHeight()/y)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,y){this.setWidth(p||0),this.setHeight(y||0)}toDataURL(p,y){try{return this._canvas.toDataURL(p,y)}catch{try{return this._canvas.toDataURL()}catch(m){return h.Util.error("Unable to get data URL. "+m.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ca.Canvas=v;class g extends v{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new r.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}ca.SceneCanvas=g;class d extends v{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new r.HitContext(this),this.setSize(p.width,p.height)}}return ca.HitCanvas=d,ca}var Rr={},Yc;function Kr(){return Yc||(Yc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.DD=void 0;const r=bt(),H=wt();h.DD={get isDragging(){let G=!1;return h.DD._dragElements.forEach(C=>{C.dragStatus==="dragging"&&(G=!0)}),G},justDragged:!1,get node(){let G;return h.DD._dragElements.forEach(C=>{G=C.node}),G},_dragElements:new Map,_drag(G){const C=[];h.DD._dragElements.forEach((v,g)=>{const{node:d}=v,f=d.getStage();f.setPointersPositions(G),v.pointerId===void 0&&(v.pointerId=H.Util._getFirstPointerId(G));const p=f._changedPointerPositions.find(y=>y.id===v.pointerId);if(p){if(v.dragStatus!=="dragging"){const y=d.dragDistance();if(Math.max(Math.abs(p.x-v.startPointerPos.x),Math.abs(p.y-v.startPointerPos.y))<y||(d.startDrag({evt:G}),!d.isDragging()))return}d._setDragPosition(G,v),C.push(d)}}),C.forEach(v=>{v.fire("dragmove",{type:"dragmove",target:v,evt:G},!0)})},_endDragBefore(G){const C=[];h.DD._dragElements.forEach(v=>{const{node:g}=v,d=g.getStage();if(G&&d.setPointersPositions(G),!d._changedPointerPositions.find(y=>y.id===v.pointerId))return;(v.dragStatus==="dragging"||v.dragStatus==="stopped")&&(h.DD.justDragged=!0,r.Konva._mouseListenClick=!1,r.Konva._touchListenClick=!1,r.Konva._pointerListenClick=!1,v.dragStatus="stopped");const p=v.node.getLayer()||v.node instanceof r.Konva.Stage&&v.node;p&&C.indexOf(p)===-1&&C.push(p)}),C.forEach(v=>{v.draw()})},_endDragAfter(G){h.DD._dragElements.forEach((C,v)=>{C.dragStatus==="stopped"&&C.node.fire("dragend",{type:"dragend",target:C.node,evt:G},!0),C.dragStatus!=="dragging"&&h.DD._dragElements.delete(v)})}},r.Konva.isBrowser&&(window.addEventListener("mouseup",h.DD._endDragBefore,!0),window.addEventListener("touchend",h.DD._endDragBefore,!0),window.addEventListener("touchcancel",h.DD._endDragBefore,!0),window.addEventListener("mousemove",h.DD._drag),window.addEventListener("touchmove",h.DD._drag),window.addEventListener("mouseup",h.DD._endDragAfter,!1),window.addEventListener("touchend",h.DD._endDragAfter,!1),window.addEventListener("touchcancel",h.DD._endDragAfter,!1))}(Rr)),Rr}var Mr={},Ee={},Fc;function xt(){if(Fc)return Ee;Fc=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.RGBComponent=G,Ee.alphaComponent=C,Ee.getNumberValidator=v,Ee.getNumberOrArrayOfNumbersValidator=g,Ee.getNumberOrAutoValidator=d,Ee.getStringValidator=f,Ee.getStringOrGradientValidator=p,Ee.getFunctionValidator=y,Ee.getNumberArrayValidator=T,Ee.getBooleanValidator=m,Ee.getComponentValidator=u;const h=bt(),r=wt();function H(o){return r.Util._isString(o)?'"'+o+'"':Object.prototype.toString.call(o)==="[object Number]"||r.Util._isBoolean(o)?o:Object.prototype.toString.call(o)}function G(o){return o>255?255:o<0?0:Math.round(o)}function C(o){return o>1?1:o<1e-4?1e-4:o}function v(){if(h.Konva.isUnminified)return function(o,b){return r.Util._isNumber(o)||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a number.'),o}}function g(o){if(h.Konva.isUnminified)return function(b,E){let O=r.Util._isNumber(b),c=r.Util._isArray(b)&&b.length==o;return!O&&!c&&r.Util.warn(H(b)+' is a not valid value for "'+E+'" attribute. The value should be a number or Array<number>('+o+")"),b}}function d(){if(h.Konva.isUnminified)return function(o,b){return r.Util._isNumber(o)||o==="auto"||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a number or "auto".'),o}}function f(){if(h.Konva.isUnminified)return function(o,b){return r.Util._isString(o)||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a string.'),o}}function p(){if(h.Konva.isUnminified)return function(o,b){const E=r.Util._isString(o),O=Object.prototype.toString.call(o)==="[object CanvasGradient]"||o&&o.addColorStop;return E||O||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a string or a native gradient.'),o}}function y(){if(h.Konva.isUnminified)return function(o,b){return r.Util._isFunction(o)||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a function.'),o}}function T(){if(h.Konva.isUnminified)return function(o,b){const E=Int8Array?Object.getPrototypeOf(Int8Array):null;return E&&o instanceof E||(r.Util._isArray(o)?o.forEach(function(O){r.Util._isNumber(O)||r.Util.warn('"'+b+'" attribute has non numeric element '+O+". Make sure that all elements are numbers.")}):r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a array of numbers.')),o}}function m(){if(h.Konva.isUnminified)return function(o,b){return o===!0||o===!1||r.Util.warn(H(o)+' is a not valid value for "'+b+'" attribute. The value should be a boolean.'),o}}function u(o){if(h.Konva.isUnminified)return function(b,E){return b==null||r.Util.isObject(b)||r.Util.warn(H(b)+' is a not valid value for "'+E+'" attribute. The value should be an object with properties '+o),b}}return Ee}var Kc;function Tt(){return Kc||(Kc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Factory=void 0;const r=wt(),H=xt(),G="get",C="set";h.Factory={addGetterSetter(v,g,d,f,p){h.Factory.addGetter(v,g,d),h.Factory.addSetter(v,g,f,p),h.Factory.addOverloadedGetterSetter(v,g)},addGetter(v,g,d){const f=G+r.Util._capitalize(g);v.prototype[f]=v.prototype[f]||function(){const p=this.attrs[g];return p===void 0?d:p}},addSetter(v,g,d,f){const p=C+r.Util._capitalize(g);v.prototype[p]||h.Factory.overWriteSetter(v,g,d,f)},overWriteSetter(v,g,d,f){const p=C+r.Util._capitalize(g);v.prototype[p]=function(y){return d&&y!==void 0&&y!==null&&(y=d.call(this,y,g)),this._setAttr(g,y),f&&f.call(this),this}},addComponentsGetterSetter(v,g,d,f,p){const y=d.length,T=r.Util._capitalize,m=G+T(g),u=C+T(g);v.prototype[m]=function(){const b={};for(let E=0;E<y;E++){const O=d[E];b[O]=this.getAttr(g+T(O))}return b};const o=(0,H.getComponentValidator)(d);v.prototype[u]=function(b){const E=this.attrs[g];f&&(b=f.call(this,b,g)),o&&o.call(this,b,g);for(const O in b)b.hasOwnProperty(O)&&this._setAttr(g+T(O),b[O]);return b||d.forEach(O=>{this._setAttr(g+T(O),void 0)}),this._fireChangeEvent(g,E,b),p&&p.call(this),this},h.Factory.addOverloadedGetterSetter(v,g)},addOverloadedGetterSetter(v,g){const d=r.Util._capitalize(g),f=C+d,p=G+d;v.prototype[g]=function(){return arguments.length?(this[f](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(v,g,d,f){r.Util.error("Adding deprecated "+g);const p=G+r.Util._capitalize(g),y=g+" property is deprecated and will be removed soon. Look at Konva change log for more information.";v.prototype[p]=function(){r.Util.error(y);const T=this.attrs[g];return T===void 0?d:T},h.Factory.addSetter(v,g,f,function(){r.Util.error(y)}),h.Factory.addOverloadedGetterSetter(v,g)},backCompat(v,g){r.Util.each(g,function(d,f){const p=v.prototype[f],y=G+r.Util._capitalize(d),T=C+r.Util._capitalize(d);function m(){p.apply(this,arguments),r.Util.error('"'+d+'" method is deprecated and will be removed soon. Use ""'+f+'" instead.')}v.prototype[d]=m,v.prototype[y]=m,v.prototype[T]=m})},afterSetFilter(){this._filterUpToDate=!1}}}(Mr)),Mr}var wc;function Qt(){if(wc)return li;wc=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Node=void 0;const h=Fl(),r=Kr(),H=Tt(),G=bt(),C=wt(),v=xt(),g="absoluteOpacity",d="allEventListeners",f="absoluteTransform",p="absoluteScale",y="canvas",T="Change",m="children",u="konva",o="listening",b="mouseenter",E="mouseleave",O="pointerenter",c="pointerleave",s="touchenter",_="touchleave",x="set",U="Shape",K=" ",N="stage",R="transform",D="Stage",V="visible",w=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(K);let X=1,F=class Pr{constructor(S){this._id=X++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(S),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(S){(S===R||S===f)&&this._cache.get(S)?this._cache.get(S).dirty=!0:S?this._cache.delete(S):this._cache.clear()}_getCache(S,A){let z=this._cache.get(S);return(z===void 0||(S===R||S===f)&&z.dirty===!0)&&(z=A.call(this),this._cache.set(S,z)),z}_calculate(S,A,z){if(!this._attachedDepsListeners.get(S)){const B=A.map(P=>P+"Change.konva").join(K);this.on(B,()=>{this._clearCache(S)}),this._attachedDepsListeners.set(S,!0)}return this._getCache(S,z)}_getCanvasCache(){return this._cache.get(y)}_clearSelfAndDescendantCache(S){this._clearCache(S),S===f&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(y)){const{scene:S,filter:A,hit:z,buffer:B}=this._cache.get(y);C.Util.releaseCanvas(S,A,z,B),this._cache.delete(y)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(S){const A=S||{};let z={};(A.x===void 0||A.y===void 0||A.width===void 0||A.height===void 0)&&(z=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let B=Math.ceil(A.width||z.width),P=Math.ceil(A.height||z.height),I=A.pixelRatio,j=A.x===void 0?Math.floor(z.x):A.x,et=A.y===void 0?Math.floor(z.y):A.y,st=A.offset||0,$=A.drawBorder||!1,L=A.hitCanvasPixelRatio||1;if(!B||!P){C.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const J=Math.abs(Math.round(z.x)-j)>.5?1:0,lt=Math.abs(Math.round(z.y)-et)>.5?1:0;B+=st*2+J,P+=st*2+lt,j-=st,et-=st;const rt=new h.SceneCanvas({pixelRatio:I,width:B,height:P}),ct=new h.SceneCanvas({pixelRatio:I,width:0,height:0,willReadFrequently:!0}),mt=new h.HitCanvas({pixelRatio:L,width:B,height:P}),pt=rt.getContext(),Ot=mt.getContext(),dt=new h.SceneCanvas({width:rt.width/rt.pixelRatio+Math.abs(j),height:rt.height/rt.pixelRatio+Math.abs(et),pixelRatio:rt.pixelRatio}),Lt=dt.getContext();return mt.isCache=!0,rt.isCache=!0,this._cache.delete(y),this._filterUpToDate=!1,A.imageSmoothingEnabled===!1&&(rt.getContext()._context.imageSmoothingEnabled=!1,ct.getContext()._context.imageSmoothingEnabled=!1),pt.save(),Ot.save(),Lt.save(),pt.translate(-j,-et),Ot.translate(-j,-et),Lt.translate(-j,-et),dt.x=j,dt.y=et,this._isUnderCache=!0,this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(p),this.drawScene(rt,this,dt),this.drawHit(mt,this),this._isUnderCache=!1,pt.restore(),Ot.restore(),$&&(pt.save(),pt.beginPath(),pt.rect(0,0,B,P),pt.closePath(),pt.setAttr("strokeStyle","red"),pt.setAttr("lineWidth",5),pt.stroke(),pt.restore()),this._cache.set(y,{scene:rt,filter:ct,hit:mt,buffer:dt,x:j,y:et}),this._requestDraw(),this}isCached(){return this._cache.has(y)}getClientRect(S){throw new Error('abstract "getClientRect" method call')}_transformedRect(S,A){const z=[{x:S.x,y:S.y},{x:S.x+S.width,y:S.y},{x:S.x+S.width,y:S.y+S.height},{x:S.x,y:S.y+S.height}];let B=1/0,P=1/0,I=-1/0,j=-1/0;const et=this.getAbsoluteTransform(A);return z.forEach(function(st){const $=et.point(st);B===void 0&&(B=I=$.x,P=j=$.y),B=Math.min(B,$.x),P=Math.min(P,$.y),I=Math.max(I,$.x),j=Math.max(j,$.y)}),{x:B,y:P,width:I-B,height:j-P}}_drawCachedSceneCanvas(S){S.save(),S._applyOpacity(this),S._applyGlobalCompositeOperation(this);const A=this._getCanvasCache();S.translate(A.x,A.y);const z=this._getCachedSceneCanvas(),B=z.pixelRatio;S.drawImage(z._canvas,0,0,z.width/B,z.height/B),S.restore()}_drawCachedHitCanvas(S){const A=this._getCanvasCache(),z=A.hit;S.save(),S.translate(A.x,A.y),S.drawImage(z._canvas,0,0,z.width/z.pixelRatio,z.height/z.pixelRatio),S.restore()}_getCachedSceneCanvas(){let S=this.filters(),A=this._getCanvasCache(),z=A.scene,B=A.filter,P=B.getContext(),I,j,et,st;if(S){if(!this._filterUpToDate){const $=z.pixelRatio;B.setSize(z.width/z.pixelRatio,z.height/z.pixelRatio);try{for(I=S.length,P.clear(),P.drawImage(z._canvas,0,0,z.getWidth()/$,z.getHeight()/$),j=P.getImageData(0,0,B.getWidth(),B.getHeight()),et=0;et<I;et++){if(st=S[et],typeof st!="function"){C.Util.error("Filter should be type of function, but got "+typeof st+" instead. Please check correct filters");continue}st.call(this,j),P.putImageData(j,0,0)}}catch(L){C.Util.error("Unable to apply filter. "+L.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return B}return z}on(S,A){if(this._cache&&this._cache.delete(d),arguments.length===3)return this._delegate.apply(this,arguments);const z=S.split(K);for(let B=0;B<z.length;B++){const I=z[B].split("."),j=I[0],et=I[1]||"";this.eventListeners[j]||(this.eventListeners[j]=[]),this.eventListeners[j].push({name:et,handler:A})}return this}off(S,A){let z=(S||"").split(K),B=z.length,P,I,j,et,st,$;if(this._cache&&this._cache.delete(d),!S)for(I in this.eventListeners)this._off(I);for(P=0;P<B;P++)if(j=z[P],et=j.split("."),st=et[0],$=et[1],st)this.eventListeners[st]&&this._off(st,$,A);else for(I in this.eventListeners)this._off(I,$,A);return this}dispatchEvent(S){const A={target:this,type:S.type,evt:S};return this.fire(S.type,A),this}addEventListener(S,A){return this.on(S,function(z){A.call(this,z.evt)}),this}removeEventListener(S){return this.off(S),this}_delegate(S,A,z){const B=this;this.on(S,function(P){const I=P.target.findAncestors(A,!0,B);for(let j=0;j<I.length;j++)P=C.Util.cloneObject(P),P.currentTarget=I[j],z.call(I[j],P)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(N),this._clearSelfAndDescendantCache(V),this._clearSelfAndDescendantCache(o)}_remove(){this._clearCaches();const S=this.getParent();S&&S.children&&(S.children.splice(this.index,1),S._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(S){const A="get"+C.Util._capitalize(S);return C.Util._isFunction(this[A])?this[A]():this.attrs[S]}getAncestors(){let S=this.getParent(),A=[];for(;S;)A.push(S),S=S.getParent();return A}getAttrs(){return this.attrs||{}}setAttrs(S){return this._batchTransformChanges(()=>{let A,z;if(!S)return this;for(A in S)A!==m&&(z=x+C.Util._capitalize(A),C.Util._isFunction(this[z])?this[z](S[A]):this._setAttr(A,S[A]))}),this}isListening(){return this._getCache(o,this._isListening)}_isListening(S){if(!this.listening())return!1;const z=this.getParent();return z&&z!==S&&this!==S?z._isListening(S):!0}isVisible(){return this._getCache(V,this._isVisible)}_isVisible(S){if(!this.visible())return!1;const z=this.getParent();return z&&z!==S&&this!==S?z._isVisible(S):!0}shouldDrawHit(S,A=!1){if(S)return this._isVisible(S)&&this._isListening(S);const z=this.getLayer();let B=!1;r.DD._dragElements.forEach(I=>{I.dragStatus==="dragging"&&(I.node.nodeType==="Stage"||I.node.getLayer()===z)&&(B=!0)});const P=!A&&!G.Konva.hitOnDragEnabled&&(B||G.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!P}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let S=this.getDepth(),A=this,z=0,B,P,I,j;function et($){for(B=[],P=$.length,I=0;I<P;I++)j=$[I],z++,j.nodeType!==U&&(B=B.concat(j.getChildren().slice())),j._id===A._id&&(I=P);B.length>0&&B[0].getDepth()<=S&&et(B)}const st=this.getStage();return A.nodeType!==D&&st&&et(st.getChildren()),z}getDepth(){let S=0,A=this.parent;for(;A;)S++,A=A.parent;return S}_batchTransformChanges(S){this._batchingTransformChange=!0,S(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(R),this._clearSelfAndDescendantCache(f)),this._needClearTransformCache=!1}setPosition(S){return this._batchTransformChanges(()=>{this.x(S.x),this.y(S.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const S=this.getStage();if(!S)return null;const A=S.getPointerPosition();if(!A)return null;const z=this.getAbsoluteTransform().copy();return z.invert(),z.point(A)}getAbsolutePosition(S){let A=!1,z=this.parent;for(;z;){if(z.isCached()){A=!0;break}z=z.parent}A&&!S&&(S=!0);const B=this.getAbsoluteTransform(S).getMatrix(),P=new C.Transform,I=this.offset();return P.m=B.slice(),P.translate(I.x,I.y),P.getTranslation()}setAbsolutePosition(S){const{x:A,y:z,...B}=this._clearTransform();this.attrs.x=A,this.attrs.y=z,this._clearCache(R);const P=this._getAbsoluteTransform().copy();return P.invert(),P.translate(S.x,S.y),S={x:this.attrs.x+P.getTranslation().x,y:this.attrs.y+P.getTranslation().y},this._setTransform(B),this.setPosition({x:S.x,y:S.y}),this._clearCache(R),this._clearSelfAndDescendantCache(f),this}_setTransform(S){let A;for(A in S)this.attrs[A]=S[A]}_clearTransform(){const S={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,S}move(S){let A=S.x,z=S.y,B=this.x(),P=this.y();return A!==void 0&&(B+=A),z!==void 0&&(P+=z),this.setPosition({x:B,y:P}),this}_eachAncestorReverse(S,A){let z=[],B=this.getParent(),P,I;if(!(A&&A._id===this._id)){for(z.unshift(this);B&&(!A||B._id!==A._id);)z.unshift(B),B=B.parent;for(P=z.length,I=0;I<P;I++)S(z[I])}}rotate(S){return this.rotation(this.rotation()+S),this}moveToTop(){if(!this.parent)return C.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const S=this.index,A=this.parent.getChildren().length;return S<A-1?(this.parent.children.splice(S,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return C.Util.warn("Node has no parent. moveUp function is ignored."),!1;const S=this.index,A=this.parent.getChildren().length;return S<A-1?(this.parent.children.splice(S,1),this.parent.children.splice(S+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return C.Util.warn("Node has no parent. moveDown function is ignored."),!1;const S=this.index;return S>0?(this.parent.children.splice(S,1),this.parent.children.splice(S-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return C.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const S=this.index;return S>0?(this.parent.children.splice(S,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(S){if(!this.parent)return C.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(S<0||S>=this.parent.children.length)&&C.Util.warn("Unexpected value "+S+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const A=this.index;return this.parent.children.splice(A,1),this.parent.children.splice(S,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(g,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let S=this.opacity();const A=this.getParent();return A&&!A._isUnderCache&&(S*=A.getAbsoluteOpacity()),S}moveTo(S){return this.getParent()!==S&&(this._remove(),S.add(this)),this}toObject(){let S=this.getAttrs(),A,z,B,P,I;const j={attrs:{},className:this.getClassName()};for(A in S)z=S[A],I=C.Util.isObject(z)&&!C.Util._isPlainObject(z)&&!C.Util._isArray(z),!I&&(B=typeof this[A]=="function"&&this[A],delete S[A],P=B?B.call(this):null,S[A]=z,P!==z&&(j.attrs[A]=z));return C.Util._prepareToStringify(j)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(S,A,z){const B=[];A&&this._isMatch(S)&&B.push(this);let P=this.parent;for(;P;){if(P===z)return B;P._isMatch(S)&&B.push(P),P=P.parent}return B}isAncestorOf(S){return!1}findAncestor(S,A,z){return this.findAncestors(S,A,z)[0]}_isMatch(S){if(!S)return!1;if(typeof S=="function")return S(this);let A=S.replace(/ /g,"").split(","),z=A.length,B,P;for(B=0;B<z;B++)if(P=A[B],C.Util.isValidSelector(P)||(C.Util.warn('Selector "'+P+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.Util.warn("Konva is awesome, right?")),P.charAt(0)==="#"){if(this.id()===P.slice(1))return!0}else if(P.charAt(0)==="."){if(this.hasName(P.slice(1)))return!0}else if(this.className===P||this.nodeType===P)return!0;return!1}getLayer(){const S=this.getParent();return S?S.getLayer():null}getStage(){return this._getCache(N,this._getStage)}_getStage(){const S=this.getParent();return S?S.getStage():null}fire(S,A={},z){return A.target=A.target||this,z?this._fireAndBubble(S,A):this._fire(S,A),this}getAbsoluteTransform(S){return S?this._getAbsoluteTransform(S):this._getCache(f,this._getAbsoluteTransform)}_getAbsoluteTransform(S){let A;if(S)return A=new C.Transform,this._eachAncestorReverse(function(z){const B=z.transformsEnabled();B==="all"?A.multiply(z.getTransform()):B==="position"&&A.translate(z.x()-z.offsetX(),z.y()-z.offsetY())},S),A;{A=this._cache.get(f)||new C.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(A):A.reset();const z=this.transformsEnabled();if(z==="all")A.multiply(this.getTransform());else if(z==="position"){const B=this.attrs.x||0,P=this.attrs.y||0,I=this.attrs.offsetX||0,j=this.attrs.offsetY||0;A.translate(B-I,P-j)}return A.dirty=!1,A}}getAbsoluteScale(S){let A=this;for(;A;)A._isUnderCache&&(S=A),A=A.getParent();const B=this.getAbsoluteTransform(S).decompose();return{x:B.scaleX,y:B.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(R,this._getTransform)}_getTransform(){var S,A;const z=this._cache.get(R)||new C.Transform;z.reset();const B=this.x(),P=this.y(),I=G.Konva.getAngle(this.rotation()),j=(S=this.attrs.scaleX)!==null&&S!==void 0?S:1,et=(A=this.attrs.scaleY)!==null&&A!==void 0?A:1,st=this.attrs.skewX||0,$=this.attrs.skewY||0,L=this.attrs.offsetX||0,J=this.attrs.offsetY||0;return(B!==0||P!==0)&&z.translate(B,P),I!==0&&z.rotate(I),(st!==0||$!==0)&&z.skew(st,$),(j!==1||et!==1)&&z.scale(j,et),(L!==0||J!==0)&&z.translate(-1*L,-1*J),z.dirty=!1,z}clone(S){let A=C.Util.cloneObject(this.attrs),z,B,P,I,j;for(z in S)A[z]=S[z];const et=new this.constructor(A);for(z in this.eventListeners)for(B=this.eventListeners[z],P=B.length,I=0;I<P;I++)j=B[I],j.name.indexOf(u)<0&&(et.eventListeners[z]||(et.eventListeners[z]=[]),et.eventListeners[z].push(j));return et}_toKonvaCanvas(S){S=S||{};const A=this.getClientRect(),z=this.getStage(),B=S.x!==void 0?S.x:Math.floor(A.x),P=S.y!==void 0?S.y:Math.floor(A.y),I=S.pixelRatio||1,j=new h.SceneCanvas({width:S.width||Math.ceil(A.width)||(z?z.width():0),height:S.height||Math.ceil(A.height)||(z?z.height():0),pixelRatio:I}),et=j.getContext(),st=new h.SceneCanvas({width:j.width/j.pixelRatio+Math.abs(B),height:j.height/j.pixelRatio+Math.abs(P),pixelRatio:j.pixelRatio});return S.imageSmoothingEnabled===!1&&(et._context.imageSmoothingEnabled=!1),et.save(),(B||P)&&et.translate(-1*B,-1*P),this.drawScene(j,void 0,st),et.restore(),j}toCanvas(S){return this._toKonvaCanvas(S)._canvas}toDataURL(S){S=S||{};const A=S.mimeType||null,z=S.quality||null,B=this._toKonvaCanvas(S).toDataURL(A,z);return S.callback&&S.callback(B),B}toImage(S){return new Promise((A,z)=>{try{const B=S?.callback;B&&delete S.callback,C.Util._urlToImage(this.toDataURL(S),function(P){A(P),B?.(P)})}catch(B){z(B)}})}toBlob(S){return new Promise((A,z)=>{try{const B=S?.callback;B&&delete S.callback,this.toCanvas(S).toBlob(P=>{A(P),B?.(P)},S?.mimeType,S?.quality)}catch(B){z(B)}})}setSize(S){return this.width(S.width),this.height(S.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():G.Konva.dragDistance}_off(S,A,z){let B=this.eventListeners[S],P,I,j;for(P=0;P<B.length;P++)if(I=B[P].name,j=B[P].handler,(I!=="konva"||A==="konva")&&(!A||I===A)&&(!z||z===j)){if(B.splice(P,1),B.length===0){delete this.eventListeners[S];break}P--}}_fireChangeEvent(S,A,z){this._fire(S+T,{oldVal:A,newVal:z})}addName(S){if(!this.hasName(S)){const A=this.name(),z=A?A+" "+S:S;this.name(z)}return this}hasName(S){if(!S)return!1;const A=this.name();return A?(A||"").split(/\s/g).indexOf(S)!==-1:!1}removeName(S){const A=(this.name()||"").split(/\s/g),z=A.indexOf(S);return z!==-1&&(A.splice(z,1),this.name(A.join(" "))),this}setAttr(S,A){const z=this[x+C.Util._capitalize(S)];return C.Util._isFunction(z)?z.call(this,A):this._setAttr(S,A),this}_requestDraw(){if(G.Konva.autoDrawEnabled){const S=this.getLayer()||this.getStage();S?.batchDraw()}}_setAttr(S,A){const z=this.attrs[S];z===A&&!C.Util.isObject(A)||(A==null?delete this.attrs[S]:this.attrs[S]=A,this._shouldFireChangeEvents&&this._fireChangeEvent(S,z,A),this._requestDraw())}_setComponentAttr(S,A,z){let B;z!==void 0&&(B=this.attrs[S],B||(this.attrs[S]=this.getAttr(S)),this.attrs[S][A]=z,this._fireChangeEvent(S,B,z))}_fireAndBubble(S,A,z){A&&this.nodeType===U&&(A.target=this);const B=[b,E,O,c,s,_];if(!(B.indexOf(S)!==-1&&(z&&(this===z||this.isAncestorOf&&this.isAncestorOf(z))||this.nodeType==="Stage"&&!z))){this._fire(S,A);const I=B.indexOf(S)!==-1&&z&&z.isAncestorOf&&z.isAncestorOf(this)&&!z.isAncestorOf(this.parent);(A&&!A.cancelBubble||!A)&&this.parent&&this.parent.isListening()&&!I&&(z&&z.parent?this._fireAndBubble.call(this.parent,S,A,z):this._fireAndBubble.call(this.parent,S,A))}}_getProtoListeners(S){var A,z,B;const P=(A=this._cache.get(d))!==null&&A!==void 0?A:{};let I=P?.[S];if(I===void 0){I=[];let j=Object.getPrototypeOf(this);for(;j;){const et=(B=(z=j.eventListeners)===null||z===void 0?void 0:z[S])!==null&&B!==void 0?B:[];I.push(...et),j=Object.getPrototypeOf(j)}P[S]=I,this._cache.set(d,P)}return I}_fire(S,A){A=A||{},A.currentTarget=this,A.type=S;const z=this._getProtoListeners(S);if(z)for(let P=0;P<z.length;P++)z[P].handler.call(this,A);const B=this.eventListeners[S];if(B)for(let P=0;P<B.length;P++)B[P].handler.call(this,A)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(S){const A=S?S.pointerId:void 0,z=this.getStage(),B=this.getAbsolutePosition();if(!z)return;const P=z._getPointerById(A)||z._changedPointerPositions[0]||B;r.DD._dragElements.set(this._id,{node:this,startPointerPos:P,offset:{x:P.x-B.x,y:P.y-B.y},dragStatus:"ready",pointerId:A})}startDrag(S,A=!0){r.DD._dragElements.has(this._id)||this._createDragElement(S);const z=r.DD._dragElements.get(this._id);z.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:S&&S.evt},A)}_setDragPosition(S,A){const z=this.getStage()._getPointerById(A.pointerId);if(!z)return;let B={x:z.x-A.offset.x,y:z.y-A.offset.y};const P=this.dragBoundFunc();if(P!==void 0){const I=P.call(this,B,S);I?B=I:C.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==B.x||this._lastPos.y!==B.y)&&(this.setAbsolutePosition(B),this._requestDraw()),this._lastPos=B}stopDrag(S){const A=r.DD._dragElements.get(this._id);A&&(A.dragStatus="stopped"),r.DD._endDragBefore(S),r.DD._endDragAfter(S)}setDraggable(S){this._setAttr("draggable",S),this._dragChange()}isDragging(){const S=r.DD._dragElements.get(this._id);return S?S.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(S){if(!(!(S.evt.button!==void 0)||G.Konva.dragButtons.indexOf(S.evt.button)>=0)||this.isDragging())return;let B=!1;r.DD._dragElements.forEach(P=>{this.isAncestorOf(P.node)&&(B=!0)}),B||this._createDragElement(S)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const A=r.DD._dragElements.get(this._id),z=A&&A.dragStatus==="dragging",B=A&&A.dragStatus==="ready";z?this.stopDrag():B&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(S={x:0,y:0}){const A=this.getStage();if(!A)return!1;const z={x:-S.x,y:-S.y,width:A.width()+2*S.x,height:A.height()+2*S.y};return C.Util.haveIntersection(z,this.getClientRect())}static create(S,A){return C.Util._isString(S)&&(S=JSON.parse(S)),this._createNode(S,A)}static _createNode(S,A){let z=Pr.prototype.getClassName.call(S),B=S.children,P,I,j;A&&(S.attrs.container=A),G.Konva[z]||(C.Util.warn('Can not find a node with class name "'+z+'". Fallback to "Shape".'),z="Shape");const et=G.Konva[z];if(P=new et(S.attrs),B)for(I=B.length,j=0;j<I;j++)P.add(Pr._createNode(B[j]));return P}};li.Node=F,F.prototype.nodeType="Node",F.prototype._attrsAffectingSize=[],F.prototype.eventListeners={},F.prototype.on.call(F.prototype,w,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(R),this._clearSelfAndDescendantCache(f)}),F.prototype.on.call(F.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(V)}),F.prototype.on.call(F.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(o)}),F.prototype.on.call(F.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(g)});const q=H.Factory.addGetterSetter;return q(F,"zIndex"),q(F,"absolutePosition"),q(F,"position"),q(F,"x",0,(0,v.getNumberValidator)()),q(F,"y",0,(0,v.getNumberValidator)()),q(F,"globalCompositeOperation","source-over",(0,v.getStringValidator)()),q(F,"opacity",1,(0,v.getNumberValidator)()),q(F,"name","",(0,v.getStringValidator)()),q(F,"id","",(0,v.getStringValidator)()),q(F,"rotation",0,(0,v.getNumberValidator)()),H.Factory.addComponentsGetterSetter(F,"scale",["x","y"]),q(F,"scaleX",1,(0,v.getNumberValidator)()),q(F,"scaleY",1,(0,v.getNumberValidator)()),H.Factory.addComponentsGetterSetter(F,"skew",["x","y"]),q(F,"skewX",0,(0,v.getNumberValidator)()),q(F,"skewY",0,(0,v.getNumberValidator)()),H.Factory.addComponentsGetterSetter(F,"offset",["x","y"]),q(F,"offsetX",0,(0,v.getNumberValidator)()),q(F,"offsetY",0,(0,v.getNumberValidator)()),q(F,"dragDistance",void 0,(0,v.getNumberValidator)()),q(F,"width",0,(0,v.getNumberValidator)()),q(F,"height",0,(0,v.getNumberValidator)()),q(F,"listening",!0,(0,v.getBooleanValidator)()),q(F,"preventDefault",!0,(0,v.getBooleanValidator)()),q(F,"filters",void 0,function(tt){return this._filterUpToDate=!1,tt}),q(F,"visible",!0,(0,v.getBooleanValidator)()),q(F,"transformsEnabled","all",(0,v.getStringValidator)()),q(F,"size"),q(F,"dragBoundFunc"),q(F,"draggable",!1,(0,v.getBooleanValidator)()),H.Factory.backCompat(F,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),li}var si={},jc;function Kl(){if(jc)return si;jc=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Container=void 0;const h=Tt(),r=Qt(),H=xt();let G=class extends r.Node{constructor(){super(...arguments),this.children=[]}getChildren(v){const g=this.children||[];return v?g.filter(v):g}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(v=>{v.parent=null,v.index=0,v.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(v=>{v.parent=null,v.index=0,v.destroy()}),this.children=[],this._requestDraw(),this}add(...v){if(v.length===0)return this;if(v.length>1){for(let d=0;d<v.length;d++)this.add(v[d]);return this}const g=v[0];return g.getParent()?(g.moveTo(this),this):(this._validateAdd(g),g.index=this.getChildren().length,g.parent=this,g._clearCaches(),this.getChildren().push(g),this._fire("add",{child:g}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(v){return this._generalFind(v,!1)}findOne(v){const g=this._generalFind(v,!0);return g.length>0?g[0]:void 0}_generalFind(v,g){const d=[];return this._descendants(f=>{const p=f._isMatch(v);return p&&d.push(f),!!(p&&g)}),d}_descendants(v){let g=!1;const d=this.getChildren();for(const f of d){if(g=v(f),g)return!0;if(f.hasChildren()&&(g=f._descendants(v),g))return!0}return!1}toObject(){const v=r.Node.prototype.toObject.call(this);return v.children=[],this.getChildren().forEach(g=>{v.children.push(g.toObject())}),v}isAncestorOf(v){let g=v.getParent();for(;g;){if(g._id===this._id)return!0;g=g.getParent()}return!1}clone(v){const g=r.Node.prototype.clone.call(this,v);return this.getChildren().forEach(function(d){g.add(d.clone())}),g}getAllIntersections(v){const g=[];return this.find("Shape").forEach(d=>{d.isVisible()&&d.intersects(v)&&g.push(d)}),g}_clearSelfAndDescendantCache(v){var g;super._clearSelfAndDescendantCache(v),!this.isCached()&&((g=this.children)===null||g===void 0||g.forEach(function(d){d._clearSelfAndDescendantCache(v)}))}_setChildrenIndices(){var v;(v=this.children)===null||v===void 0||v.forEach(function(g,d){g.index=d}),this._requestDraw()}drawScene(v,g,d){const f=this.getLayer(),p=v||f&&f.getCanvas(),y=p&&p.getContext(),T=this._getCanvasCache(),m=T&&T.scene,u=p&&p.isCache;if(!this.isVisible()&&!u)return this;if(m){y.save();const o=this.getAbsoluteTransform(g).getMatrix();y.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedSceneCanvas(y),y.restore()}else this._drawChildren("drawScene",p,g,d);return this}drawHit(v,g){if(!this.shouldDrawHit(g))return this;const d=this.getLayer(),f=v||d&&d.hitCanvas,p=f&&f.getContext(),y=this._getCanvasCache();if(y&&y.hit){p.save();const m=this.getAbsoluteTransform(g).getMatrix();p.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",f,g);return this}_drawChildren(v,g,d,f){var p;const y=g&&g.getContext(),T=this.clipWidth(),m=this.clipHeight(),u=this.clipFunc(),o=typeof T=="number"&&typeof m=="number"||u,b=d===this;if(o){y.save();const O=this.getAbsoluteTransform(d);let c=O.getMatrix();y.transform(c[0],c[1],c[2],c[3],c[4],c[5]),y.beginPath();let s;if(u)s=u.call(this,y,this);else{const _=this.clipX(),x=this.clipY();y.rect(_||0,x||0,T,m)}y.clip.apply(y,s),c=O.copy().invert().getMatrix(),y.transform(c[0],c[1],c[2],c[3],c[4],c[5])}const E=!b&&this.globalCompositeOperation()!=="source-over"&&v==="drawScene";E&&(y.save(),y._applyGlobalCompositeOperation(this)),(p=this.children)===null||p===void 0||p.forEach(function(O){O[v](g,d,f)}),E&&y.restore(),o&&y.restore()}getClientRect(v={}){var g;const d=v.skipTransform,f=v.relativeTo;let p,y,T,m,u={x:1/0,y:1/0,width:0,height:0};const o=this;(g=this.children)===null||g===void 0||g.forEach(function(O){if(!O.visible())return;const c=O.getClientRect({relativeTo:o,skipShadow:v.skipShadow,skipStroke:v.skipStroke});c.width===0&&c.height===0||(p===void 0?(p=c.x,y=c.y,T=c.x+c.width,m=c.y+c.height):(p=Math.min(p,c.x),y=Math.min(y,c.y),T=Math.max(T,c.x+c.width),m=Math.max(m,c.y+c.height)))});const b=this.find("Shape");let E=!1;for(let O=0;O<b.length;O++)if(b[O]._isVisible(this)){E=!0;break}return E&&p!==void 0?u={x:p,y,width:T-p,height:m-y}:u={x:0,y:0,width:0,height:0},d?u:this._transformedRect(u,f)}};return si.Container=G,h.Factory.addComponentsGetterSetter(G,"clip",["x","y","width","height"]),h.Factory.addGetterSetter(G,"clipX",void 0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(G,"clipY",void 0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(G,"clipWidth",void 0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(G,"clipHeight",void 0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(G,"clipFunc"),si}var Or={},Ua={},Xc;function e0(){if(Xc)return Ua;Xc=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.getCapturedShape=G,Ua.createEvent=C,Ua.hasPointerCapture=v,Ua.setPointerCapture=g,Ua.releaseCapture=d;const h=bt(),r=new Map,H=h.Konva._global.PointerEvent!==void 0;function G(f){return r.get(f)}function C(f){return{evt:f,pointerId:f.pointerId}}function v(f,p){return r.get(f)===p}function g(f,p){d(f),p.getStage()&&(r.set(f,p),H&&p._fire("gotpointercapture",C(new PointerEvent("gotpointercapture"))))}function d(f,p){const y=r.get(f);if(!y)return;const T=y.getStage();T&&T.content,r.delete(f),H&&y._fire("lostpointercapture",C(new PointerEvent("lostpointercapture")))}return Ua}var Qc;function Nf(){return Qc||(Qc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Stage=h.stages=void 0;const r=wt(),H=Tt(),G=Kl(),C=bt(),v=Fl(),g=Kr(),d=bt(),f=e0(),p="Stage",y="string",T="px",m="mouseout",u="mouseleave",o="mouseover",b="mouseenter",E="mousemove",O="mousedown",c="mouseup",s="pointermove",_="pointerdown",x="pointerup",U="pointercancel",K="lostpointercapture",N="pointerout",R="pointerleave",D="pointerover",V="pointerenter",w="contextmenu",X="touchstart",F="touchend",q="touchmove",tt="touchcancel",S="wheel",A=5,z=[[b,"_pointerenter"],[O,"_pointerdown"],[E,"_pointermove"],[c,"_pointerup"],[u,"_pointerleave"],[X,"_pointerdown"],[q,"_pointermove"],[F,"_pointerup"],[tt,"_pointercancel"],[o,"_pointerover"],[S,"_wheel"],[w,"_contextmenu"],[_,"_pointerdown"],[s,"_pointermove"],[x,"_pointerup"],[U,"_pointercancel"],[R,"_pointerleave"],[K,"_lostpointercapture"]],B={mouse:{[N]:m,[R]:u,[D]:o,[V]:b,[s]:E,[_]:O,[x]:c,[U]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[N]:"touchout",[R]:"touchleave",[D]:"touchover",[V]:"touchenter",[s]:q,[_]:X,[x]:F,[U]:tt,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[N]:N,[R]:R,[D]:D,[V]:V,[s]:s,[_]:_,[x]:x,[U]:U,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},P=$=>$.indexOf("pointer")>=0?"pointer":$.indexOf("touch")>=0?"touch":"mouse",I=$=>{const L=P($);if(L==="pointer")return C.Konva.pointerEventsEnabled&&B.pointer;if(L==="touch")return B.touch;if(L==="mouse")return B.mouse};function j($={}){return($.clipFunc||$.clipWidth||$.clipHeight)&&r.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),$}const et="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";h.stages=[];class st extends G.Container{constructor(L){super(j(L)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),h.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{j(this.attrs)}),this._checkVisibility()}_validateAdd(L){const J=L.getType()==="Layer",lt=L.getType()==="FastLayer";J||lt||r.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const L=this.visible()?"":"none";this.content.style.display=L}setContainer(L){if(typeof L===y){let J;if(L.charAt(0)==="."){const lt=L.slice(1);L=document.getElementsByClassName(lt)[0]}else L.charAt(0)!=="#"?J=L:J=L.slice(1),L=document.getElementById(J);if(!L)throw"Can not find container in document with id "+J}return this._setAttr("container",L),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),L.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const L=this.children,J=L.length;for(let lt=0;lt<J;lt++)L[lt].clear();return this}clone(L){return L||(L={}),L.container=typeof document<"u"&&document.createElement("div"),G.Container.prototype.clone.call(this,L)}destroy(){super.destroy();const L=this.content;L&&r.Util._isInDocument(L)&&this.container().removeChild(L);const J=h.stages.indexOf(this);return J>-1&&h.stages.splice(J,1),r.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const L=this._pointerPositions[0]||this._changedPointerPositions[0];return L?{x:L.x,y:L.y}:(r.Util.warn(et),null)}_getPointerById(L){return this._pointerPositions.find(J=>J.id===L)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(L){L=L||{},L.x=L.x||0,L.y=L.y||0,L.width=L.width||this.width(),L.height=L.height||this.height();const J=new v.SceneCanvas({width:L.width,height:L.height,pixelRatio:L.pixelRatio||1}),lt=J.getContext()._context,rt=this.children;return(L.x||L.y)&&lt.translate(-1*L.x,-1*L.y),rt.forEach(function(ct){if(!ct.isVisible())return;const mt=ct._toKonvaCanvas(L);lt.drawImage(mt._canvas,L.x,L.y,mt.getWidth()/mt.getPixelRatio(),mt.getHeight()/mt.getPixelRatio())}),J}getIntersection(L){if(!L)return null;const J=this.children,lt=J.length,rt=lt-1;for(let ct=rt;ct>=0;ct--){const mt=J[ct].getIntersection(L);if(mt)return mt}return null}_resizeDOM(){const L=this.width(),J=this.height();this.content&&(this.content.style.width=L+T,this.content.style.height=J+T),this.bufferCanvas.setSize(L,J),this.bufferHitCanvas.setSize(L,J),this.children.forEach(lt=>{lt.setSize({width:L,height:J}),lt.draw()})}add(L,...J){if(arguments.length>1){for(let rt=0;rt<arguments.length;rt++)this.add(arguments[rt]);return this}super.add(L);const lt=this.children.length;return lt>A&&r.Util.warn("The stage has "+lt+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),L.setSize({width:this.width(),height:this.height()}),L.draw(),C.Konva.isBrowser&&this.content.appendChild(L.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(L){return f.hasPointerCapture(L,this)}setPointerCapture(L){f.setPointerCapture(L,this)}releaseCapture(L){f.releaseCapture(L,this)}getLayers(){return this.children}_bindContentEvents(){C.Konva.isBrowser&&z.forEach(([L,J])=>{this.content.addEventListener(L,lt=>{this[J](lt)},{passive:!1})})}_pointerenter(L){this.setPointersPositions(L);const J=I(L.type);J&&this._fire(J.pointerenter,{evt:L,target:this,currentTarget:this})}_pointerover(L){this.setPointersPositions(L);const J=I(L.type);J&&this._fire(J.pointerover,{evt:L,target:this,currentTarget:this})}_getTargetShape(L){let J=this[L+"targetShape"];return J&&!J.getStage()&&(J=null),J}_pointerleave(L){const J=I(L.type),lt=P(L.type);if(!J)return;this.setPointersPositions(L);const rt=this._getTargetShape(lt),ct=!(C.Konva.isDragging()||C.Konva.isTransforming())||C.Konva.hitOnDragEnabled;rt&&ct?(rt._fireAndBubble(J.pointerout,{evt:L}),rt._fireAndBubble(J.pointerleave,{evt:L}),this._fire(J.pointerleave,{evt:L,target:this,currentTarget:this}),this[lt+"targetShape"]=null):ct&&(this._fire(J.pointerleave,{evt:L,target:this,currentTarget:this}),this._fire(J.pointerout,{evt:L,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(L){const J=I(L.type),lt=P(L.type);if(!J)return;this.setPointersPositions(L);let rt=!1;this._changedPointerPositions.forEach(ct=>{const mt=this.getIntersection(ct);if(g.DD.justDragged=!1,C.Konva["_"+lt+"ListenClick"]=!0,!mt||!mt.isListening()){this[lt+"ClickStartShape"]=void 0;return}C.Konva.capturePointerEventsEnabled&&mt.setPointerCapture(ct.id),this[lt+"ClickStartShape"]=mt,mt._fireAndBubble(J.pointerdown,{evt:L,pointerId:ct.id}),rt=!0;const pt=L.type.indexOf("touch")>=0;mt.preventDefault()&&L.cancelable&&pt&&L.preventDefault()}),rt||this._fire(J.pointerdown,{evt:L,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(L){const J=I(L.type),lt=P(L.type);if(!J||(C.Konva.isDragging()&&g.DD.node.preventDefault()&&L.cancelable&&L.preventDefault(),this.setPointersPositions(L),!(!(C.Konva.isDragging()||C.Konva.isTransforming())||C.Konva.hitOnDragEnabled)))return;const ct={};let mt=!1;const pt=this._getTargetShape(lt);this._changedPointerPositions.forEach(Ot=>{const dt=f.getCapturedShape(Ot.id)||this.getIntersection(Ot),Lt=Ot.id,Dt={evt:L,pointerId:Lt},qt=pt!==dt;if(qt&&pt&&(pt._fireAndBubble(J.pointerout,{...Dt},dt),pt._fireAndBubble(J.pointerleave,{...Dt},dt)),dt){if(ct[dt._id])return;ct[dt._id]=!0}dt&&dt.isListening()?(mt=!0,qt&&(dt._fireAndBubble(J.pointerover,{...Dt},pt),dt._fireAndBubble(J.pointerenter,{...Dt},pt),this[lt+"targetShape"]=dt),dt._fireAndBubble(J.pointermove,{...Dt})):pt&&(this._fire(J.pointerover,{evt:L,target:this,currentTarget:this,pointerId:Lt}),this[lt+"targetShape"]=null)}),mt||this._fire(J.pointermove,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(L){const J=I(L.type),lt=P(L.type);if(!J)return;this.setPointersPositions(L);const rt=this[lt+"ClickStartShape"],ct=this[lt+"ClickEndShape"],mt={};let pt=!1;this._changedPointerPositions.forEach(Ot=>{const dt=f.getCapturedShape(Ot.id)||this.getIntersection(Ot);if(dt){if(dt.releaseCapture(Ot.id),mt[dt._id])return;mt[dt._id]=!0}const Lt=Ot.id,Dt={evt:L,pointerId:Lt};let qt=!1;C.Konva["_"+lt+"InDblClickWindow"]?(qt=!0,clearTimeout(this[lt+"DblTimeout"])):g.DD.justDragged||(C.Konva["_"+lt+"InDblClickWindow"]=!0,clearTimeout(this[lt+"DblTimeout"])),this[lt+"DblTimeout"]=setTimeout(function(){C.Konva["_"+lt+"InDblClickWindow"]=!1},C.Konva.dblClickWindow),dt&&dt.isListening()?(pt=!0,this[lt+"ClickEndShape"]=dt,dt._fireAndBubble(J.pointerup,{...Dt}),C.Konva["_"+lt+"ListenClick"]&&rt&&rt===dt&&(dt._fireAndBubble(J.pointerclick,{...Dt}),qt&&ct&&ct===dt&&dt._fireAndBubble(J.pointerdblclick,{...Dt}))):(this[lt+"ClickEndShape"]=null,C.Konva["_"+lt+"ListenClick"]&&this._fire(J.pointerclick,{evt:L,target:this,currentTarget:this,pointerId:Lt}),qt&&this._fire(J.pointerdblclick,{evt:L,target:this,currentTarget:this,pointerId:Lt}))}),pt||this._fire(J.pointerup,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),C.Konva["_"+lt+"ListenClick"]=!1,L.cancelable&&lt!=="touch"&&lt!=="pointer"&&L.preventDefault()}_contextmenu(L){this.setPointersPositions(L);const J=this.getIntersection(this.getPointerPosition());J&&J.isListening()?J._fireAndBubble(w,{evt:L}):this._fire(w,{evt:L,target:this,currentTarget:this})}_wheel(L){this.setPointersPositions(L);const J=this.getIntersection(this.getPointerPosition());J&&J.isListening()?J._fireAndBubble(S,{evt:L}):this._fire(S,{evt:L,target:this,currentTarget:this})}_pointercancel(L){this.setPointersPositions(L);const J=f.getCapturedShape(L.pointerId)||this.getIntersection(this.getPointerPosition());J&&J._fireAndBubble(x,f.createEvent(L)),f.releaseCapture(L.pointerId)}_lostpointercapture(L){f.releaseCapture(L.pointerId)}setPointersPositions(L){const J=this._getContentPosition();let lt=null,rt=null;L=L||window.event,L.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(L.touches,ct=>{this._pointerPositions.push({id:ct.identifier,x:(ct.clientX-J.left)/J.scaleX,y:(ct.clientY-J.top)/J.scaleY})}),Array.prototype.forEach.call(L.changedTouches||L.touches,ct=>{this._changedPointerPositions.push({id:ct.identifier,x:(ct.clientX-J.left)/J.scaleX,y:(ct.clientY-J.top)/J.scaleY})})):(lt=(L.clientX-J.left)/J.scaleX,rt=(L.clientY-J.top)/J.scaleY,this.pointerPos={x:lt,y:rt},this._pointerPositions=[{x:lt,y:rt,id:r.Util._getFirstPointerId(L)}],this._changedPointerPositions=[{x:lt,y:rt,id:r.Util._getFirstPointerId(L)}])}_setPointerPosition(L){r.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(L)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const L=this.content.getBoundingClientRect();return{top:L.top,left:L.left,scaleX:L.width/this.content.clientWidth||1,scaleY:L.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new v.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new v.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!C.Konva.isBrowser)return;const L=this.container();if(!L)throw"Stage has no container. A container is required.";L.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),L.appendChild(this.content),this._resizeDOM()}cache(){return r.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(L){L.batchDraw()}),this}}h.Stage=st,st.prototype.nodeType=p,(0,d._registerNode)(st),H.Factory.addGetterSetter(st,"container"),C.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{h.stages.forEach($=>{$.batchDraw()})})}(Or)),Or}var ri={},Dr={},Zc;function oe(){return Zc||(Zc=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Shape=h.shapes=void 0;const r=bt(),H=wt(),G=Tt(),C=Qt(),v=xt(),g=bt(),d=e0(),f="hasShadow",p="shadowRGBA",y="patternImage",T="linearGradient",m="radialGradient";let u;function o(){return u||(u=H.Util.createCanvasElement().getContext("2d"),u)}h.shapes={};function b(R){const D=this.attrs.fillRule;D?R.fill(D):R.fill()}function E(R){R.stroke()}function O(R){const D=this.attrs.fillRule;D?R.fill(D):R.fill()}function c(R){R.stroke()}function s(){this._clearCache(f)}function _(){this._clearCache(p)}function x(){this._clearCache(y)}function U(){this._clearCache(T)}function K(){this._clearCache(m)}class N extends C.Node{constructor(D){super(D);let V;for(;V=H.Util.getRandomColor(),!(V&&!(V in h.shapes)););this.colorKey=V,h.shapes[V]=this}getContext(){return H.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return H.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(f,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(y,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const V=o().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(V&&V.setTransform){const w=new H.Transform;w.translate(this.fillPatternX(),this.fillPatternY()),w.rotate(r.Konva.getAngle(this.fillPatternRotation())),w.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),w.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const X=w.getMatrix(),F=typeof DOMMatrix>"u"?{a:X[0],b:X[1],c:X[2],d:X[3],e:X[4],f:X[5]}:new DOMMatrix(X);V.setTransform(F)}return V}}_getLinearGradient(){return this._getCache(T,this.__getLinearGradient)}__getLinearGradient(){const D=this.fillLinearGradientColorStops();if(D){const V=o(),w=this.fillLinearGradientStartPoint(),X=this.fillLinearGradientEndPoint(),F=V.createLinearGradient(w.x,w.y,X.x,X.y);for(let q=0;q<D.length;q+=2)F.addColorStop(D[q],D[q+1]);return F}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const D=this.fillRadialGradientColorStops();if(D){const V=o(),w=this.fillRadialGradientStartPoint(),X=this.fillRadialGradientEndPoint(),F=V.createRadialGradient(w.x,w.y,this.fillRadialGradientStartRadius(),X.x,X.y,this.fillRadialGradientEndRadius());for(let q=0;q<D.length;q+=2)F.addColorStop(D[q],D[q+1]);return F}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const D=H.Util.colorToRGBA(this.shadowColor());if(D)return"rgba("+D.r+","+D.g+","+D.b+","+D.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const D=this.hitStrokeWidth();return D==="auto"?this.hasStroke():this.strokeEnabled()&&!!D}intersects(D){const V=this.getStage();if(!V)return!1;const w=V.bufferHitCanvas;return w.getContext().clear(),this.drawHit(w,void 0,!0),w.context.getImageData(Math.round(D.x),Math.round(D.y),1,1).data[3]>0}destroy(){return C.Node.prototype.destroy.call(this),delete h.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(D){var V;if(!((V=this.attrs.perfectDrawEnabled)!==null&&V!==void 0?V:!0))return!1;const X=D||this.hasFill(),F=this.hasStroke(),q=this.getAbsoluteOpacity()!==1;if(X&&F&&q)return!0;const tt=this.hasShadow(),S=this.shadowForStrokeEnabled();return!!(X&&F&&tt&&S)}setStrokeHitEnabled(D){H.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),D?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const D=this.size();return{x:this._centroid?-D.width/2:0,y:this._centroid?-D.height/2:0,width:D.width,height:D.height}}getClientRect(D={}){let V=!1,w=this.getParent();for(;w;){if(w.isCached()){V=!0;break}w=w.getParent()}const X=D.skipTransform,F=D.relativeTo||V&&this.getStage()||void 0,q=this.getSelfRect(),S=!D.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,A=q.width+S,z=q.height+S,B=!D.skipShadow&&this.hasShadow(),P=B?this.shadowOffsetX():0,I=B?this.shadowOffsetY():0,j=A+Math.abs(P),et=z+Math.abs(I),st=B&&this.shadowBlur()||0,$=j+st*2,L=et+st*2,J={width:$,height:L,x:-(S/2+st)+Math.min(P,0)+q.x,y:-(S/2+st)+Math.min(I,0)+q.y};return X?J:this._transformedRect(J,F)}drawScene(D,V,w){const X=this.getLayer(),F=D||X.getCanvas(),q=F.getContext(),tt=this._getCanvasCache(),S=this.getSceneFunc(),A=this.hasShadow();let z;const B=V===this;if(!this.isVisible()&&!B)return this;if(tt){q.save();const P=this.getAbsoluteTransform(V).getMatrix();return q.transform(P[0],P[1],P[2],P[3],P[4],P[5]),this._drawCachedSceneCanvas(q),q.restore(),this}if(!S)return this;if(q.save(),this._useBufferCanvas()){z=this.getStage();const P=w||z.bufferCanvas,I=P.getContext();I.clear(),I.save(),I._applyLineJoin(this);const j=this.getAbsoluteTransform(V).getMatrix();I.transform(j[0],j[1],j[2],j[3],j[4],j[5]),S.call(this,I,this),I.restore();const et=P.pixelRatio;A&&q._applyShadow(this),q._applyOpacity(this),q._applyGlobalCompositeOperation(this),q.drawImage(P._canvas,P.x||0,P.y||0,P.width/et,P.height/et)}else{if(q._applyLineJoin(this),!B){const P=this.getAbsoluteTransform(V).getMatrix();q.transform(P[0],P[1],P[2],P[3],P[4],P[5]),q._applyOpacity(this),q._applyGlobalCompositeOperation(this)}A&&q._applyShadow(this),S.call(this,q,this)}return q.restore(),this}drawHit(D,V,w=!1){if(!this.shouldDrawHit(V,w))return this;const X=this.getLayer(),F=D||X.hitCanvas,q=F&&F.getContext(),tt=this.hitFunc()||this.sceneFunc(),S=this._getCanvasCache(),A=S&&S.hit;if(this.colorKey||H.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),A){q.save();const B=this.getAbsoluteTransform(V).getMatrix();return q.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(q),q.restore(),this}if(!tt)return this;if(q.save(),q._applyLineJoin(this),!(this===V)){const B=this.getAbsoluteTransform(V).getMatrix();q.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return tt.call(this,q,this),q.restore(),this}drawHitFromCache(D=0){const V=this._getCanvasCache(),w=this._getCachedSceneCanvas(),X=V.hit,F=X.getContext(),q=X.getWidth(),tt=X.getHeight();F.clear(),F.drawImage(w._canvas,0,0,q,tt);try{const S=F.getImageData(0,0,q,tt),A=S.data,z=A.length,B=H.Util._hexToRgb(this.colorKey);for(let P=0;P<z;P+=4)A[P+3]>D?(A[P]=B.r,A[P+1]=B.g,A[P+2]=B.b,A[P+3]=255):A[P+3]=0;F.putImageData(S,0,0)}catch(S){H.Util.error("Unable to draw hit graph from cached scene canvas. "+S.message)}return this}hasPointerCapture(D){return d.hasPointerCapture(D,this)}setPointerCapture(D){d.setPointerCapture(D,this)}releaseCapture(D){d.releaseCapture(D,this)}}h.Shape=N,N.prototype._fillFunc=b,N.prototype._strokeFunc=E,N.prototype._fillFuncHit=O,N.prototype._strokeFuncHit=c,N.prototype._centroid=!1,N.prototype.nodeType="Shape",(0,g._registerNode)(N),N.prototype.eventListeners={},N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",x),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",U),N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",K),G.Factory.addGetterSetter(N,"stroke",void 0,(0,v.getStringOrGradientValidator)()),G.Factory.addGetterSetter(N,"strokeWidth",2,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillAfterStrokeEnabled",!1),G.Factory.addGetterSetter(N,"hitStrokeWidth","auto",(0,v.getNumberOrAutoValidator)()),G.Factory.addGetterSetter(N,"strokeHitEnabled",!0,(0,v.getBooleanValidator)()),G.Factory.addGetterSetter(N,"perfectDrawEnabled",!0,(0,v.getBooleanValidator)()),G.Factory.addGetterSetter(N,"shadowForStrokeEnabled",!0,(0,v.getBooleanValidator)()),G.Factory.addGetterSetter(N,"lineJoin"),G.Factory.addGetterSetter(N,"lineCap"),G.Factory.addGetterSetter(N,"sceneFunc"),G.Factory.addGetterSetter(N,"hitFunc"),G.Factory.addGetterSetter(N,"dash"),G.Factory.addGetterSetter(N,"dashOffset",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"shadowColor",void 0,(0,v.getStringValidator)()),G.Factory.addGetterSetter(N,"shadowBlur",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"shadowOpacity",1,(0,v.getNumberValidator)()),G.Factory.addComponentsGetterSetter(N,"shadowOffset",["x","y"]),G.Factory.addGetterSetter(N,"shadowOffsetX",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"shadowOffsetY",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillPatternImage"),G.Factory.addGetterSetter(N,"fill",void 0,(0,v.getStringOrGradientValidator)()),G.Factory.addGetterSetter(N,"fillPatternX",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillPatternY",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillLinearGradientColorStops"),G.Factory.addGetterSetter(N,"strokeLinearGradientColorStops"),G.Factory.addGetterSetter(N,"fillRadialGradientStartRadius",0),G.Factory.addGetterSetter(N,"fillRadialGradientEndRadius",0),G.Factory.addGetterSetter(N,"fillRadialGradientColorStops"),G.Factory.addGetterSetter(N,"fillPatternRepeat","repeat"),G.Factory.addGetterSetter(N,"fillEnabled",!0),G.Factory.addGetterSetter(N,"strokeEnabled",!0),G.Factory.addGetterSetter(N,"shadowEnabled",!0),G.Factory.addGetterSetter(N,"dashEnabled",!0),G.Factory.addGetterSetter(N,"strokeScaleEnabled",!0),G.Factory.addGetterSetter(N,"fillPriority","color"),G.Factory.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]),G.Factory.addGetterSetter(N,"fillPatternOffsetX",0,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillPatternOffsetY",0,(0,v.getNumberValidator)()),G.Factory.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]),G.Factory.addGetterSetter(N,"fillPatternScaleX",1,(0,v.getNumberValidator)()),G.Factory.addGetterSetter(N,"fillPatternScaleY",1,(0,v.getNumberValidator)()),G.Factory.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]),G.Factory.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]),G.Factory.addGetterSetter(N,"fillLinearGradientStartPointX",0),G.Factory.addGetterSetter(N,"strokeLinearGradientStartPointX",0),G.Factory.addGetterSetter(N,"fillLinearGradientStartPointY",0),G.Factory.addGetterSetter(N,"strokeLinearGradientStartPointY",0),G.Factory.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]),G.Factory.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]),G.Factory.addGetterSetter(N,"fillLinearGradientEndPointX",0),G.Factory.addGetterSetter(N,"strokeLinearGradientEndPointX",0),G.Factory.addGetterSetter(N,"fillLinearGradientEndPointY",0),G.Factory.addGetterSetter(N,"strokeLinearGradientEndPointY",0),G.Factory.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]),G.Factory.addGetterSetter(N,"fillRadialGradientStartPointX",0),G.Factory.addGetterSetter(N,"fillRadialGradientStartPointY",0),G.Factory.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]),G.Factory.addGetterSetter(N,"fillRadialGradientEndPointX",0),G.Factory.addGetterSetter(N,"fillRadialGradientEndPointY",0),G.Factory.addGetterSetter(N,"fillPatternRotation",0),G.Factory.addGetterSetter(N,"fillRule",void 0,(0,v.getStringValidator)()),G.Factory.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Dr)),Dr}var Jc;function a0(){if(Jc)return ri;Jc=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Layer=void 0;const h=wt(),r=Kl(),H=Qt(),G=Tt(),C=Fl(),v=xt(),g=oe(),d=bt(),f="#",p="beforeDraw",y="draw",T=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=T.length;class u extends r.Container{constructor(b){super(b),this.canvas=new C.SceneCanvas,this.hitCanvas=new C.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(b){return this.getContext().clear(b),this.getHitCanvas().getContext().clear(b),this}setZIndex(b){super.setZIndex(b);const E=this.getStage();return E&&E.content&&(E.content.removeChild(this.getNativeCanvasElement()),b<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[b+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){H.Node.prototype.moveToTop.call(this);const b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!H.Node.prototype.moveUp.call(this))return!1;const E=this.getStage();return!E||!E.content?!1:(E.content.removeChild(this.getNativeCanvasElement()),this.index<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[this.index+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(H.Node.prototype.moveDown.call(this)){const b=this.getStage();if(b){const E=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),E[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(H.Node.prototype.moveToBottom.call(this)){const b=this.getStage();if(b){const E=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),E[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const b=this.getNativeCanvasElement();return H.Node.prototype.remove.call(this),b&&b.parentNode&&h.Util._isInDocument(b)&&b.parentNode.removeChild(b),this}getStage(){return this.parent}setSize({width:b,height:E}){return this.canvas.setSize(b,E),this.hitCanvas.setSize(b,E),this._setSmoothEnabled(),this}_validateAdd(b){const E=b.getType();E!=="Group"&&E!=="Shape"&&h.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(b){return b=b||{},b.width=b.width||this.getWidth(),b.height=b.height||this.getHeight(),b.x=b.x!==void 0?b.x:this.x(),b.y=b.y!==void 0?b.y:this.y(),H.Node.prototype._toKonvaCanvas.call(this,b)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){h.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){h.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,h.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(b){if(!this.isListening()||!this.isVisible())return null;let E=1,O=!1;for(;;){for(let c=0;c<m;c++){const s=T[c],_=this._getIntersection({x:b.x+s.x*E,y:b.y+s.y*E}),x=_.shape;if(x)return x;if(O=!!_.antialiased,!_.antialiased)break}if(O)E+=1;else return null}}_getIntersection(b){const E=this.hitCanvas.pixelRatio,O=this.hitCanvas.context.getImageData(Math.round(b.x*E),Math.round(b.y*E),1,1).data,c=O[3];if(c===255){const s=h.Util._rgbToHex(O[0],O[1],O[2]),_=g.shapes[f+s];return _?{shape:_}:{antialiased:!0}}else if(c>0)return{antialiased:!0};return{}}drawScene(b,E,O){const c=this.getLayer(),s=b||c&&c.getCanvas();return this._fire(p,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),r.Container.prototype.drawScene.call(this,s,E,O),this._fire(y,{node:this}),this}drawHit(b,E){const O=this.getLayer(),c=b||O&&O.hitCanvas;return O&&O.clearBeforeDraw()&&O.getHitCanvas().getContext().clear(),r.Container.prototype.drawHit.call(this,c,E),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(b){h.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(b)}getHitGraphEnabled(b){return h.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const b=this.parent;!!this.hitCanvas._canvas.parentNode?b.content.removeChild(this.hitCanvas._canvas):b.content.appendChild(this.hitCanvas._canvas)}destroy(){return h.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return ri.Layer=u,u.prototype.nodeType="Layer",(0,d._registerNode)(u),G.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),G.Factory.addGetterSetter(u,"clearBeforeDraw",!0),G.Factory.addGetterSetter(u,"hitGraphEnabled",!0,(0,v.getBooleanValidator)()),ri}var oi={},kc;function Af(){if(kc)return oi;kc=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.FastLayer=void 0;const h=wt(),r=a0(),H=bt();let G=class extends r.Layer{constructor(v){super(v),this.listening(!1),h.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return oi.FastLayer=G,G.prototype.nodeType="FastLayer",(0,H._registerNode)(G),oi}var ui={},Wc;function wr(){if(Wc)return ui;Wc=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Group=void 0;const h=wt(),r=Kl(),H=bt();let G=class extends r.Container{_validateAdd(v){const g=v.getType();g!=="Group"&&g!=="Shape"&&h.Util.throw("You may only add groups and shapes to groups.")}};return ui.Group=G,G.prototype.nodeType="Group",(0,H._registerNode)(G),ui}var ci={},Ic;function jr(){if(Ic)return ci;Ic=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Animation=void 0;const h=bt(),r=wt(),H=function(){return h.glob.performance&&h.glob.performance.now?function(){return h.glob.performance.now()}:function(){return new Date().getTime()}}();let G=class An{constructor(v,g){this.id=An.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:H(),frameRate:0},this.func=v,this.setLayers(g)}setLayers(v){let g=[];return v&&(g=Array.isArray(v)?v:[v]),this.layers=g,this}getLayers(){return this.layers}addLayer(v){const g=this.layers,d=g.length;for(let f=0;f<d;f++)if(g[f]._id===v._id)return!1;return this.layers.push(v),!0}isRunning(){const g=An.animations,d=g.length;for(let f=0;f<d;f++)if(g[f].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=H(),An._addAnimation(this),this}stop(){return An._removeAnimation(this),this}_updateFrameObject(v){this.frame.timeDiff=v-this.frame.lastTime,this.frame.lastTime=v,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(v){this.animations.push(v),this._handleAnimation()}static _removeAnimation(v){const g=v.id,d=this.animations,f=d.length;for(let p=0;p<f;p++)if(d[p].id===g){this.animations.splice(p,1);break}}static _runFrames(){const v={},g=this.animations;for(let d=0;d<g.length;d++){const f=g[d],p=f.layers,y=f.func;f._updateFrameObject(H());const T=p.length;let m;if(y?m=y.call(f,f.frame)!==!1:m=!0,!!m)for(let u=0;u<T;u++){const o=p[u];o._id!==void 0&&(v[o._id]=o)}}for(const d in v)v.hasOwnProperty(d)&&v[d].batchDraw()}static _animationLoop(){const v=An;v.animations.length?(v._runFrames(),r.Util.requestAnimFrame(v._animationLoop)):v.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,r.Util.requestAnimFrame(this._animationLoop))}};return ci.Animation=G,G.animations=[],G.animIdCounter=0,G.animRunning=!1,ci}var Gr={},$c;function Rf(){return $c||($c=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Easings=h.Tween=void 0;const r=wt(),H=jr(),G=Qt(),C=bt(),v={node:1,duration:1,easing:1,onFinish:1,yoyo:1},g=1,d=2,f=3,p=["fill","stroke","shadowColor"];let y=0;class T{constructor(o,b,E,O,c,s,_){this.prop=o,this.propFunc=b,this.begin=O,this._pos=O,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=E,this._change=c-this.begin,this.pause()}fire(o){const b=this[o];b&&b()}setTime(o){o>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():o<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=o,this.update())}getTime(){return this._time}setPosition(o){this.prevPos=this._pos,this.propFunc(o),this._pos=o}getPosition(o){return o===void 0&&(o=this._time),this.func(o,this.begin,this._change,this.duration)}play(){this.state=d,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=f,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(o){this.pause(),this._time=o,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const o=this.getTimer()-this._startTime;this.state===d?this.setTime(o):this.state===f&&this.setTime(this.duration-o)}pause(){this.state=g,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(o){const b=this,E=o.node,O=E._id,c=o.easing||h.Easings.Linear,s=!!o.yoyo;let _,x;typeof o.duration>"u"?_=.3:o.duration===0?_=.001:_=o.duration,this.node=E,this._id=y++;const U=E.getLayer()||(E instanceof C.Konva.Stage?E.getLayers():null);U||r.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new H.Animation(function(){b.tween.onEnterFrame()},U),this.tween=new T(x,function(K){b._tweenFunc(K)},c,0,1,_*1e3,s),this._addListeners(),m.attrs[O]||(m.attrs[O]={}),m.attrs[O][this._id]||(m.attrs[O][this._id]={}),m.tweens[O]||(m.tweens[O]={});for(x in o)v[x]===void 0&&this._addAttr(x,o[x]);this.reset(),this.onFinish=o.onFinish,this.onReset=o.onReset,this.onUpdate=o.onUpdate}_addAttr(o,b){const E=this.node,O=E._id;let c,s,_,x,U;const K=m.tweens[O][o];K&&delete m.attrs[O][K][o];let N=E.getAttr(o);if(r.Util._isArray(b))if(c=[],s=Math.max(b.length,N.length),o==="points"&&b.length!==N.length&&(b.length>N.length?(x=N,N=r.Util._prepareArrayForTween(N,b,E.closed())):(_=b,b=r.Util._prepareArrayForTween(b,N,E.closed()))),o.indexOf("fill")===0)for(let R=0;R<s;R++)if(R%2===0)c.push(b[R]-N[R]);else{const D=r.Util.colorToRGBA(N[R]);U=r.Util.colorToRGBA(b[R]),N[R]=D,c.push({r:U.r-D.r,g:U.g-D.g,b:U.b-D.b,a:U.a-D.a})}else for(let R=0;R<s;R++)c.push(b[R]-N[R]);else p.indexOf(o)!==-1?(N=r.Util.colorToRGBA(N),U=r.Util.colorToRGBA(b),c={r:U.r-N.r,g:U.g-N.g,b:U.b-N.b,a:U.a-N.a}):c=b-N;m.attrs[O][this._id][o]={start:N,diff:c,end:b,trueEnd:_,trueStart:x},m.tweens[O][o]=this._id}_tweenFunc(o){const b=this.node,E=m.attrs[b._id][this._id];let O,c,s,_,x,U,K,N;for(O in E){if(c=E[O],s=c.start,_=c.diff,N=c.end,r.Util._isArray(s))if(x=[],K=Math.max(s.length,N.length),O.indexOf("fill")===0)for(U=0;U<K;U++)U%2===0?x.push((s[U]||0)+_[U]*o):x.push("rgba("+Math.round(s[U].r+_[U].r*o)+","+Math.round(s[U].g+_[U].g*o)+","+Math.round(s[U].b+_[U].b*o)+","+(s[U].a+_[U].a*o)+")");else for(U=0;U<K;U++)x.push((s[U]||0)+_[U]*o);else p.indexOf(O)!==-1?x="rgba("+Math.round(s.r+_.r*o)+","+Math.round(s.g+_.g*o)+","+Math.round(s.b+_.b*o)+","+(s.a+_.a*o)+")":x=s+_*o;b.setAttr(O,x)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const o=this.node,b=m.attrs[o._id][this._id];b.points&&b.points.trueEnd&&o.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const o=this.node,b=m.attrs[o._id][this._id];b.points&&b.points.trueStart&&o.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(o){return this.tween.seek(o*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const o=this.node._id,b=this._id,E=m.tweens[o];this.pause(),this.anim&&this.anim.stop();for(const O in E)delete m.tweens[o][O];delete m.attrs[o][b],m.tweens[o]&&(Object.keys(m.tweens[o]).length===0&&delete m.tweens[o],Object.keys(m.attrs[o]).length===0&&delete m.attrs[o])}}h.Tween=m,m.attrs={},m.tweens={},G.Node.prototype.to=function(u){const o=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),o&&o()},new m(u).play()},h.Easings={BackEaseIn(u,o,b,E){return b*(u/=E)*u*((1.70158+1)*u-1.70158)+o},BackEaseOut(u,o,b,E){return b*((u=u/E-1)*u*((1.70158+1)*u+1.70158)+1)+o},BackEaseInOut(u,o,b,E){let O=1.70158;return(u/=E/2)<1?b/2*(u*u*(((O*=1.525)+1)*u-O))+o:b/2*((u-=2)*u*(((O*=1.525)+1)*u+O)+2)+o},ElasticEaseIn(u,o,b,E,O,c){let s=0;return u===0?o:(u/=E)===1?o+b:(c||(c=E*.3),!O||O<Math.abs(b)?(O=b,s=c/4):s=c/(2*Math.PI)*Math.asin(b/O),-(O*Math.pow(2,10*(u-=1))*Math.sin((u*E-s)*(2*Math.PI)/c))+o)},ElasticEaseOut(u,o,b,E,O,c){let s=0;return u===0?o:(u/=E)===1?o+b:(c||(c=E*.3),!O||O<Math.abs(b)?(O=b,s=c/4):s=c/(2*Math.PI)*Math.asin(b/O),O*Math.pow(2,-10*u)*Math.sin((u*E-s)*(2*Math.PI)/c)+b+o)},ElasticEaseInOut(u,o,b,E,O,c){let s=0;return u===0?o:(u/=E/2)===2?o+b:(c||(c=E*(.3*1.5)),!O||O<Math.abs(b)?(O=b,s=c/4):s=c/(2*Math.PI)*Math.asin(b/O),u<1?-.5*(O*Math.pow(2,10*(u-=1))*Math.sin((u*E-s)*(2*Math.PI)/c))+o:O*Math.pow(2,-10*(u-=1))*Math.sin((u*E-s)*(2*Math.PI)/c)*.5+b+o)},BounceEaseOut(u,o,b,E){return(u/=E)<1/2.75?b*(7.5625*u*u)+o:u<2/2.75?b*(7.5625*(u-=1.5/2.75)*u+.75)+o:u<2.5/2.75?b*(7.5625*(u-=2.25/2.75)*u+.9375)+o:b*(7.5625*(u-=2.625/2.75)*u+.984375)+o},BounceEaseIn(u,o,b,E){return b-h.Easings.BounceEaseOut(E-u,0,b,E)+o},BounceEaseInOut(u,o,b,E){return u<E/2?h.Easings.BounceEaseIn(u*2,0,b,E)*.5+o:h.Easings.BounceEaseOut(u*2-E,0,b,E)*.5+b*.5+o},EaseIn(u,o,b,E){return b*(u/=E)*u+o},EaseOut(u,o,b,E){return-b*(u/=E)*(u-2)+o},EaseInOut(u,o,b,E){return(u/=E/2)<1?b/2*u*u+o:-b/2*(--u*(u-2)-1)+o},StrongEaseIn(u,o,b,E){return b*(u/=E)*u*u*u*u+o},StrongEaseOut(u,o,b,E){return b*((u=u/E-1)*u*u*u*u+1)+o},StrongEaseInOut(u,o,b,E){return(u/=E/2)<1?b/2*u*u*u*u*u+o:b/2*((u-=2)*u*u*u*u+2)+o},Linear(u,o,b,E){return b*u/E+o}}}(Gr)),Gr}var th;function Yr(){return th||(th=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.Konva=void 0;const r=bt(),H=wt(),G=Qt(),C=Kl(),v=Nf(),g=a0(),d=Af(),f=wr(),p=Kr(),y=oe(),T=jr(),m=Rf(),u=t0(),o=Fl();h.Konva=H.Util._assign(r.Konva,{Util:H.Util,Transform:H.Transform,Node:G.Node,Container:C.Container,Stage:v.Stage,stages:v.stages,Layer:g.Layer,FastLayer:d.FastLayer,Group:f.Group,DD:p.DD,Shape:y.Shape,shapes:y.shapes,Animation:T.Animation,Tween:m.Tween,Easings:m.Easings,Context:u.Context,Canvas:o.Canvas}),h.default=h.Konva}(xr)),xr}var hi={},eh;function Mf(){if(eh)return hi;eh=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Arc=void 0;const h=Tt(),r=oe(),H=bt(),G=xt(),C=bt();let v=class extends r.Shape{_sceneFunc(d){const f=H.Konva.getAngle(this.angle()),p=this.clockwise();d.beginPath(),d.arc(0,0,this.outerRadius(),0,f,p),d.arc(0,0,this.innerRadius(),f,0,!p),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}getSelfRect(){const d=this.innerRadius(),f=this.outerRadius(),p=this.clockwise(),y=H.Konva.getAngle(p?360-this.angle():this.angle()),T=Math.cos(Math.min(y,Math.PI)),m=1,u=Math.sin(Math.min(Math.max(Math.PI,y),3*Math.PI/2)),o=Math.sin(Math.min(y,Math.PI/2)),b=T*(T>0?d:f),E=m*f,O=u*(u>0?d:f),c=o*(o>0?f:d);return{x:b,y:p?-1*c:O,width:E-b,height:c-O}}};return hi.Arc=v,v.prototype._centroid=!0,v.prototype.className="Arc",v.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,C._registerNode)(v),h.Factory.addGetterSetter(v,"innerRadius",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"outerRadius",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"angle",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"clockwise",!1,(0,G.getBooleanValidator)()),hi}var di={},fi={},ah;function n0(){if(ah)return fi;ah=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Line=void 0;const h=Tt(),r=bt(),H=oe(),G=xt();function C(d,f,p,y,T,m,u){const o=Math.sqrt(Math.pow(p-d,2)+Math.pow(y-f,2)),b=Math.sqrt(Math.pow(T-p,2)+Math.pow(m-y,2)),E=u*o/(o+b),O=u*b/(o+b),c=p-E*(T-d),s=y-E*(m-f),_=p+O*(T-d),x=y+O*(m-f);return[c,s,_,x]}function v(d,f){const p=d.length,y=[];for(let T=2;T<p-2;T+=2){const m=C(d[T-2],d[T-1],d[T],d[T+1],d[T+2],d[T+3],f);isNaN(m[0])||(y.push(m[0]),y.push(m[1]),y.push(d[T]),y.push(d[T+1]),y.push(m[2]),y.push(m[3]))}return y}class g extends H.Shape{constructor(f){super(f),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(f){const p=this.points(),y=p.length,T=this.tension(),m=this.closed(),u=this.bezier();if(!y)return;let o=0;if(f.beginPath(),f.moveTo(p[0],p[1]),T!==0&&y>4){const b=this.getTensionPoints(),E=b.length;for(o=m?0:4,m||f.quadraticCurveTo(b[0],b[1],b[2],b[3]);o<E-2;)f.bezierCurveTo(b[o++],b[o++],b[o++],b[o++],b[o++],b[o++]);m||f.quadraticCurveTo(b[E-2],b[E-1],p[y-2],p[y-1])}else if(u)for(o=2;o<y;)f.bezierCurveTo(p[o++],p[o++],p[o++],p[o++],p[o++],p[o++]);else for(o=2;o<y;o+=2)f.lineTo(p[o],p[o+1]);m?(f.closePath(),f.fillStrokeShape(this)):f.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():v(this.points(),this.tension())}_getTensionPointsClosed(){const f=this.points(),p=f.length,y=this.tension(),T=C(f[p-2],f[p-1],f[0],f[1],f[2],f[3],y),m=C(f[p-4],f[p-3],f[p-2],f[p-1],f[0],f[1],y),u=v(f,y);return[T[2],T[3]].concat(u).concat([m[0],m[1],f[p-2],f[p-1],m[2],m[3],T[0],T[1],f[0],f[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let f=this.points();if(f.length<4)return{x:f[0]||0,y:f[1]||0,width:0,height:0};this.tension()!==0?f=[f[0],f[1],...this._getTensionPoints(),f[f.length-2],f[f.length-1]]:f=this.points();let p=f[0],y=f[0],T=f[1],m=f[1],u,o;for(let b=0;b<f.length/2;b++)u=f[b*2],o=f[b*2+1],p=Math.min(p,u),y=Math.max(y,u),T=Math.min(T,o),m=Math.max(m,o);return{x:p,y:T,width:y-p,height:m-T}}}return fi.Line=g,g.prototype.className="Line",g.prototype._attrsAffectingSize=["points","bezier","tension"],(0,r._registerNode)(g),h.Factory.addGetterSetter(g,"closed",!1),h.Factory.addGetterSetter(g,"bezier",!1),h.Factory.addGetterSetter(g,"tension",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(g,"points",[],(0,G.getNumberArrayValidator)()),fi}var gi={},Ur={},nh;function Of(){return nh||(nh=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.t2length=h.getQuadraticArcLength=h.getCubicArcLength=h.binomialCoefficients=h.cValues=h.tValues=void 0,h.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],h.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],h.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const r=(g,d,f)=>{let p,y;const m=f/2;p=0;for(let u=0;u<20;u++)y=m*h.tValues[20][u]+m,p+=h.cValues[20][u]*G(g,d,y);return m*p};h.getCubicArcLength=r;const H=(g,d,f)=>{f===void 0&&(f=1);const p=g[0]-2*g[1]+g[2],y=d[0]-2*d[1]+d[2],T=2*g[1]-2*g[0],m=2*d[1]-2*d[0],u=4*(p*p+y*y),o=4*(p*T+y*m),b=T*T+m*m;if(u===0)return f*Math.sqrt(Math.pow(g[2]-g[0],2)+Math.pow(d[2]-d[0],2));const E=o/(2*u),O=b/u,c=f+E,s=O-E*E,_=c*c+s>0?Math.sqrt(c*c+s):0,x=E*E+s>0?Math.sqrt(E*E+s):0,U=E+Math.sqrt(E*E+s)!==0?s*Math.log(Math.abs((c+_)/(E+x))):0;return Math.sqrt(u)/2*(c*_-E*x+U)};h.getQuadraticArcLength=H;function G(g,d,f){const p=C(1,f,g),y=C(1,f,d),T=p*p+y*y;return Math.sqrt(T)}const C=(g,d,f)=>{const p=f.length-1;let y,T;if(p===0)return 0;if(g===0){T=0;for(let m=0;m<=p;m++)T+=h.binomialCoefficients[p][m]*Math.pow(1-d,p-m)*Math.pow(d,m)*f[m];return T}else{y=new Array(p);for(let m=0;m<p;m++)y[m]=p*(f[m+1]-f[m]);return C(g-1,d,y)}},v=(g,d,f)=>{let p=1,y=g/d,T=(g-f(y))/d,m=0;for(;p>.001;){const u=f(y+T),o=Math.abs(g-u)/d;if(o<p)p=o,y+=T;else{const b=f(y-T),E=Math.abs(g-b)/d;E<p?(p=E,y-=T):T/=2}if(m++,m>500)break}return y};h.t2length=v}(Ur)),Ur}var ih;function Xr(){if(ih)return gi;ih=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Path=void 0;const h=Tt(),r=bt(),H=oe(),G=Of();let C=class Te extends H.Shape{constructor(g){super(g),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Te.parsePathData(this.data()),this.pathLength=Te.getPathLength(this.dataArray)}_sceneFunc(g){const d=this.dataArray;g.beginPath();let f=!1;for(let p=0;p<d.length;p++){const y=d[p].command,T=d[p].points;switch(y){case"L":g.lineTo(T[0],T[1]);break;case"M":g.moveTo(T[0],T[1]);break;case"C":g.bezierCurveTo(T[0],T[1],T[2],T[3],T[4],T[5]);break;case"Q":g.quadraticCurveTo(T[0],T[1],T[2],T[3]);break;case"A":const m=T[0],u=T[1],o=T[2],b=T[3],E=T[4],O=T[5],c=T[6],s=T[7],_=o>b?o:b,x=o>b?1:o/b,U=o>b?b/o:1;g.translate(m,u),g.rotate(c),g.scale(x,U),g.arc(0,0,_,E,E+O,1-s),g.scale(1/x,1/U),g.rotate(-c),g.translate(-m,-u);break;case"z":f=!0,g.closePath();break}}!f&&!this.hasFill()?g.strokeShape(this):g.fillStrokeShape(this)}getSelfRect(){let g=[];this.dataArray.forEach(function(u){if(u.command==="A"){const o=u.points[4],b=u.points[5],E=u.points[4]+b;let O=Math.PI/180;if(Math.abs(o-E)<O&&(O=Math.abs(o-E)),b<0)for(let c=o-O;c>E;c-=O){const s=Te.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],c,0);g.push(s.x,s.y)}else for(let c=o+O;c<E;c+=O){const s=Te.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],c,0);g.push(s.x,s.y)}}else if(u.command==="C")for(let o=0;o<=1;o+=.01){const b=Te.getPointOnCubicBezier(o,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);g.push(b.x,b.y)}else g=g.concat(u.points)});let d=g[0],f=g[0],p=g[1],y=g[1],T,m;for(let u=0;u<g.length/2;u++)T=g[u*2],m=g[u*2+1],isNaN(T)||(d=Math.min(d,T),f=Math.max(f,T)),isNaN(m)||(p=Math.min(p,m),y=Math.max(y,m));return{x:d,y:p,width:f-d,height:y-p}}getLength(){return this.pathLength}getPointAtLength(g){return Te.getPointAtLengthOfDataArray(g,this.dataArray)}static getLineLength(g,d,f,p){return Math.sqrt((f-g)*(f-g)+(p-d)*(p-d))}static getPathLength(g){let d=0;for(let f=0;f<g.length;++f)d+=g[f].pathLength;return d}static getPointAtLengthOfDataArray(g,d){let f,p=0,y=d.length;if(!y)return null;for(;p<y&&g>d[p].pathLength;)g-=d[p].pathLength,++p;if(p===y)return f=d[p-1].points.slice(-2),{x:f[0],y:f[1]};if(g<.01)return d[p].command==="M"?(f=d[p].points.slice(0,2),{x:f[0],y:f[1]}):{x:d[p].start.x,y:d[p].start.y};const T=d[p],m=T.points;switch(T.command){case"L":return Te.getPointOnLine(g,T.start.x,T.start.y,m[0],m[1]);case"C":return Te.getPointOnCubicBezier((0,G.t2length)(g,Te.getPathLength(d),_=>(0,G.getCubicArcLength)([T.start.x,m[0],m[2],m[4]],[T.start.y,m[1],m[3],m[5]],_)),T.start.x,T.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Te.getPointOnQuadraticBezier((0,G.t2length)(g,Te.getPathLength(d),_=>(0,G.getQuadraticArcLength)([T.start.x,m[0],m[2]],[T.start.y,m[1],m[3]],_)),T.start.x,T.start.y,m[0],m[1],m[2],m[3]);case"A":const u=m[0],o=m[1],b=m[2],E=m[3],O=m[5],c=m[6];let s=m[4];return s+=O*g/T.pathLength,Te.getPointOnEllipticalArc(u,o,b,E,s,c)}return null}static getPointOnLine(g,d,f,p,y,T,m){T=T??d,m=m??f;const u=this.getLineLength(d,f,p,y);if(u<1e-10)return{x:d,y:f};if(p===d)return{x:T,y:m+(y>f?g:-g)};const o=(y-f)/(p-d),b=Math.sqrt(g*g/(1+o*o))*(p<d?-1:1),E=o*b;if(Math.abs(m-f-o*(T-d))<1e-10)return{x:T+b,y:m+E};const O=((T-d)*(p-d)+(m-f)*(y-f))/(u*u),c=d+O*(p-d),s=f+O*(y-f),_=this.getLineLength(T,m,c,s),x=Math.sqrt(g*g-_*_),U=Math.sqrt(x*x/(1+o*o))*(p<d?-1:1),K=o*U;return{x:c+U,y:s+K}}static getPointOnCubicBezier(g,d,f,p,y,T,m,u,o){function b(x){return x*x*x}function E(x){return 3*x*x*(1-x)}function O(x){return 3*x*(1-x)*(1-x)}function c(x){return(1-x)*(1-x)*(1-x)}const s=u*b(g)+T*E(g)+p*O(g)+d*c(g),_=o*b(g)+m*E(g)+y*O(g)+f*c(g);return{x:s,y:_}}static getPointOnQuadraticBezier(g,d,f,p,y,T,m){function u(c){return c*c}function o(c){return 2*c*(1-c)}function b(c){return(1-c)*(1-c)}const E=T*u(g)+p*o(g)+d*b(g),O=m*u(g)+y*o(g)+f*b(g);return{x:E,y:O}}static getPointOnEllipticalArc(g,d,f,p,y,T){const m=Math.cos(T),u=Math.sin(T),o={x:f*Math.cos(y),y:p*Math.sin(y)};return{x:g+(o.x*m-o.y*u),y:d+(o.x*u+o.y*m)}}static parsePathData(g){if(!g)return[];let d=g;const f=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];d=d.replace(new RegExp(" ","g"),",");for(let E=0;E<f.length;E++)d=d.replace(new RegExp(f[E],"g"),"|"+f[E]);const p=d.split("|"),y=[],T=[];let m=0,u=0;const o=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let b;for(let E=1;E<p.length;E++){let O=p[E],c=O.charAt(0);for(O=O.slice(1),T.length=0;b=o.exec(O);)T.push(b[0]);const s=[];for(let _=0,x=T.length;_<x;_++){if(T[_]==="00"){s.push(0,0);continue}const U=parseFloat(T[_]);isNaN(U)?s.push(0):s.push(U)}for(;s.length>0&&!isNaN(s[0]);){let _="",x=[];const U=m,K=u;let N,R,D,V,w,X,F,q,tt,S;switch(c){case"l":m+=s.shift(),u+=s.shift(),_="L",x.push(m,u);break;case"L":m=s.shift(),u=s.shift(),x.push(m,u);break;case"m":const A=s.shift(),z=s.shift();if(m+=A,u+=z,_="M",y.length>2&&y[y.length-1].command==="z"){for(let B=y.length-2;B>=0;B--)if(y[B].command==="M"){m=y[B].points[0]+A,u=y[B].points[1]+z;break}}x.push(m,u),c="l";break;case"M":m=s.shift(),u=s.shift(),_="M",x.push(m,u),c="L";break;case"h":m+=s.shift(),_="L",x.push(m,u);break;case"H":m=s.shift(),_="L",x.push(m,u);break;case"v":u+=s.shift(),_="L",x.push(m,u);break;case"V":u=s.shift(),_="L",x.push(m,u);break;case"C":x.push(s.shift(),s.shift(),s.shift(),s.shift()),m=s.shift(),u=s.shift(),x.push(m,u);break;case"c":x.push(m+s.shift(),u+s.shift(),m+s.shift(),u+s.shift()),m+=s.shift(),u+=s.shift(),_="C",x.push(m,u);break;case"S":R=m,D=u,N=y[y.length-1],N.command==="C"&&(R=m+(m-N.points[2]),D=u+(u-N.points[3])),x.push(R,D,s.shift(),s.shift()),m=s.shift(),u=s.shift(),_="C",x.push(m,u);break;case"s":R=m,D=u,N=y[y.length-1],N.command==="C"&&(R=m+(m-N.points[2]),D=u+(u-N.points[3])),x.push(R,D,m+s.shift(),u+s.shift()),m+=s.shift(),u+=s.shift(),_="C",x.push(m,u);break;case"Q":x.push(s.shift(),s.shift()),m=s.shift(),u=s.shift(),x.push(m,u);break;case"q":x.push(m+s.shift(),u+s.shift()),m+=s.shift(),u+=s.shift(),_="Q",x.push(m,u);break;case"T":R=m,D=u,N=y[y.length-1],N.command==="Q"&&(R=m+(m-N.points[0]),D=u+(u-N.points[1])),m=s.shift(),u=s.shift(),_="Q",x.push(R,D,m,u);break;case"t":R=m,D=u,N=y[y.length-1],N.command==="Q"&&(R=m+(m-N.points[0]),D=u+(u-N.points[1])),m+=s.shift(),u+=s.shift(),_="Q",x.push(R,D,m,u);break;case"A":V=s.shift(),w=s.shift(),X=s.shift(),F=s.shift(),q=s.shift(),tt=m,S=u,m=s.shift(),u=s.shift(),_="A",x=this.convertEndpointToCenterParameterization(tt,S,m,u,F,q,V,w,X);break;case"a":V=s.shift(),w=s.shift(),X=s.shift(),F=s.shift(),q=s.shift(),tt=m,S=u,m+=s.shift(),u+=s.shift(),_="A",x=this.convertEndpointToCenterParameterization(tt,S,m,u,F,q,V,w,X);break}y.push({command:_||c,points:x,start:{x:U,y:K},pathLength:this.calcLength(U,K,_||c,x)})}(c==="z"||c==="Z")&&y.push({command:"z",points:[],start:void 0,pathLength:0})}return y}static calcLength(g,d,f,p){let y,T,m,u;const o=Te;switch(f){case"L":return o.getLineLength(g,d,p[0],p[1]);case"C":return(0,G.getCubicArcLength)([g,p[0],p[2],p[4]],[d,p[1],p[3],p[5]],1);case"Q":return(0,G.getQuadraticArcLength)([g,p[0],p[2]],[d,p[1],p[3]],1);case"A":y=0;const b=p[4],E=p[5],O=p[4]+E;let c=Math.PI/180;if(Math.abs(b-O)<c&&(c=Math.abs(b-O)),T=o.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),E<0)for(u=b-c;u>O;u-=c)m=o.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],u,0),y+=o.getLineLength(T.x,T.y,m.x,m.y),T=m;else for(u=b+c;u<O;u+=c)m=o.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],u,0),y+=o.getLineLength(T.x,T.y,m.x,m.y),T=m;return m=o.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],O,0),y+=o.getLineLength(T.x,T.y,m.x,m.y),y}return 0}static convertEndpointToCenterParameterization(g,d,f,p,y,T,m,u,o){const b=o*(Math.PI/180),E=Math.cos(b)*(g-f)/2+Math.sin(b)*(d-p)/2,O=-1*Math.sin(b)*(g-f)/2+Math.cos(b)*(d-p)/2,c=E*E/(m*m)+O*O/(u*u);c>1&&(m*=Math.sqrt(c),u*=Math.sqrt(c));let s=Math.sqrt((m*m*(u*u)-m*m*(O*O)-u*u*(E*E))/(m*m*(O*O)+u*u*(E*E)));y===T&&(s*=-1),isNaN(s)&&(s=0);const _=s*m*O/u,x=s*-u*E/m,U=(g+f)/2+Math.cos(b)*_-Math.sin(b)*x,K=(d+p)/2+Math.sin(b)*_+Math.cos(b)*x,N=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},R=function(q,tt){return(q[0]*tt[0]+q[1]*tt[1])/(N(q)*N(tt))},D=function(q,tt){return(q[0]*tt[1]<q[1]*tt[0]?-1:1)*Math.acos(R(q,tt))},V=D([1,0],[(E-_)/m,(O-x)/u]),w=[(E-_)/m,(O-x)/u],X=[(-1*E-_)/m,(-1*O-x)/u];let F=D(w,X);return R(w,X)<=-1&&(F=Math.PI),R(w,X)>=1&&(F=0),T===0&&F>0&&(F=F-2*Math.PI),T===1&&F<0&&(F=F+2*Math.PI),[U,K,m,u,V,F,b,T]}};return gi.Path=C,C.prototype.className="Path",C.prototype._attrsAffectingSize=["data"],(0,r._registerNode)(C),h.Factory.addGetterSetter(C,"data"),gi}var lh;function Df(){if(lh)return di;lh=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Arrow=void 0;const h=Tt(),r=n0(),H=xt(),G=bt(),C=Xr();let v=class extends r.Line{_sceneFunc(d){super._sceneFunc(d);const f=Math.PI*2,p=this.points();let y=p;const T=this.tension()!==0&&p.length>4;T&&(y=this.getTensionPoints());const m=this.pointerLength(),u=p.length;let o,b;if(T){const c=[y[y.length-4],y[y.length-3],y[y.length-2],y[y.length-1],p[u-2],p[u-1]],s=C.Path.calcLength(y[y.length-4],y[y.length-3],"C",c),_=C.Path.getPointOnQuadraticBezier(Math.min(1,1-m/s),c[0],c[1],c[2],c[3],c[4],c[5]);o=p[u-2]-_.x,b=p[u-1]-_.y}else o=p[u-2]-p[u-4],b=p[u-1]-p[u-3];const E=(Math.atan2(b,o)+f)%f,O=this.pointerWidth();this.pointerAtEnding()&&(d.save(),d.beginPath(),d.translate(p[u-2],p[u-1]),d.rotate(E),d.moveTo(0,0),d.lineTo(-m,O/2),d.lineTo(-m,-O/2),d.closePath(),d.restore(),this.__fillStroke(d)),this.pointerAtBeginning()&&(d.save(),d.beginPath(),d.translate(p[0],p[1]),T?(o=(y[0]+y[2])/2-p[0],b=(y[1]+y[3])/2-p[1]):(o=p[2]-p[0],b=p[3]-p[1]),d.rotate((Math.atan2(-b,-o)+f)%f),d.moveTo(0,0),d.lineTo(-m,O/2),d.lineTo(-m,-O/2),d.closePath(),d.restore(),this.__fillStroke(d))}__fillStroke(d){const f=this.dashEnabled();f&&(this.attrs.dashEnabled=!1,d.setLineDash([])),d.fillStrokeShape(this),f&&(this.attrs.dashEnabled=!0)}getSelfRect(){const d=super.getSelfRect(),f=this.pointerWidth()/2;return{x:d.x,y:d.y-f,width:d.width,height:d.height+f*2}}};return di.Arrow=v,v.prototype.className="Arrow",(0,G._registerNode)(v),h.Factory.addGetterSetter(v,"pointerLength",10,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(v,"pointerWidth",10,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(v,"pointerAtBeginning",!1),h.Factory.addGetterSetter(v,"pointerAtEnding",!0),di}var mi={},sh;function Gf(){if(sh)return mi;sh=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Circle=void 0;const h=Tt(),r=oe(),H=xt(),G=bt();let C=class extends r.Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius()!==g/2&&this.radius(g/2)}setHeight(g){this.radius()!==g/2&&this.radius(g/2)}};return mi.Circle=C,C.prototype._centroid=!0,C.prototype.className="Circle",C.prototype._attrsAffectingSize=["radius"],(0,G._registerNode)(C),h.Factory.addGetterSetter(C,"radius",0,(0,H.getNumberValidator)()),mi}var pi={},rh;function Uf(){if(rh)return pi;rh=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Ellipse=void 0;const h=Tt(),r=oe(),H=xt(),G=bt();let C=class extends r.Shape{_sceneFunc(g){const d=this.radiusX(),f=this.radiusY();g.beginPath(),g.save(),d!==f&&g.scale(1,f/d),g.arc(0,0,d,0,Math.PI*2,!1),g.restore(),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(g){this.radiusX(g/2)}setHeight(g){this.radiusY(g/2)}};return pi.Ellipse=C,C.prototype.className="Ellipse",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,G._registerNode)(C),h.Factory.addComponentsGetterSetter(C,"radius",["x","y"]),h.Factory.addGetterSetter(C,"radiusX",0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(C,"radiusY",0,(0,H.getNumberValidator)()),pi}var yi={},oh;function zf(){if(oh)return yi;oh=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Image=void 0;const h=wt(),r=Tt(),H=oe(),G=bt(),C=xt();class v extends H.Shape{constructor(d){super(d),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",f=>{this._removeImageLoad(f.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const d=this.image();d&&d.complete||d&&d.readyState===4||d&&d.addEventListener&&d.addEventListener("load",this._loadListener)}_removeImageLoad(d){d&&d.removeEventListener&&d.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const d=!!this.cornerRadius(),f=this.hasShadow();return d&&f?!0:super._useBufferCanvas(!0)}_sceneFunc(d){const f=this.getWidth(),p=this.getHeight(),y=this.cornerRadius(),T=this.attrs.image;let m;if(T){const u=this.attrs.cropWidth,o=this.attrs.cropHeight;u&&o?m=[T,this.cropX(),this.cropY(),u,o,0,0,f,p]:m=[T,0,0,f,p]}(this.hasFill()||this.hasStroke()||y)&&(d.beginPath(),y?h.Util.drawRoundedRectPath(d,f,p,y):d.rect(0,0,f,p),d.closePath(),d.fillStrokeShape(this)),T&&(y&&d.clip(),d.drawImage.apply(d,m))}_hitFunc(d){const f=this.width(),p=this.height(),y=this.cornerRadius();d.beginPath(),y?h.Util.drawRoundedRectPath(d,f,p,y):d.rect(0,0,f,p),d.closePath(),d.fillStrokeShape(this)}getWidth(){var d,f;return(d=this.attrs.width)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.width}getHeight(){var d,f;return(d=this.attrs.height)!==null&&d!==void 0?d:(f=this.image())===null||f===void 0?void 0:f.height}static fromURL(d,f,p=null){const y=h.Util.createImageElement();y.onload=function(){const T=new v({image:y});f(T)},y.onerror=p,y.crossOrigin="Anonymous",y.src=d}}return yi.Image=v,v.prototype.className="Image",(0,G._registerNode)(v),r.Factory.addGetterSetter(v,"cornerRadius",0,(0,C.getNumberOrArrayOfNumbersValidator)(4)),r.Factory.addGetterSetter(v,"image"),r.Factory.addComponentsGetterSetter(v,"crop",["x","y","width","height"]),r.Factory.addGetterSetter(v,"cropX",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(v,"cropY",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(v,"cropWidth",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(v,"cropHeight",0,(0,C.getNumberValidator)()),yi}var Za={},uh;function Bf(){if(uh)return Za;uh=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.Tag=Za.Label=void 0;const h=Tt(),r=oe(),H=wr(),G=xt(),C=bt(),v=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],g="Change.konva",d="none",f="up",p="right",y="down",T="left",m=v.length;let u=class extends H.Group{constructor(E){super(E),this.on("add.konva",function(O){this._addListeners(O.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(E){let O=this,c;const s=function(){O._sync()};for(c=0;c<m;c++)E.on(v[c]+g,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let E=this.getText(),O=this.getTag(),c,s,_,x,U,K,N;if(E&&O){switch(c=E.width(),s=E.height(),_=O.pointerDirection(),x=O.pointerWidth(),N=O.pointerHeight(),U=0,K=0,_){case f:U=c/2,K=-1*N;break;case p:U=c+x,K=s/2;break;case y:U=c/2,K=s+N;break;case T:U=-1*x,K=s/2;break}O.setAttrs({x:-1*U,y:-1*K,width:c,height:s}),E.setAttrs({x:-1*U,y:-1*K})}}};Za.Label=u,u.prototype.className="Label",(0,C._registerNode)(u);class o extends r.Shape{_sceneFunc(E){const O=this.width(),c=this.height(),s=this.pointerDirection(),_=this.pointerWidth(),x=this.pointerHeight(),U=this.cornerRadius();let K=0,N=0,R=0,D=0;typeof U=="number"?K=N=R=D=Math.min(U,O/2,c/2):(K=Math.min(U[0]||0,O/2,c/2),N=Math.min(U[1]||0,O/2,c/2),D=Math.min(U[2]||0,O/2,c/2),R=Math.min(U[3]||0,O/2,c/2)),E.beginPath(),E.moveTo(K,0),s===f&&(E.lineTo((O-_)/2,0),E.lineTo(O/2,-1*x),E.lineTo((O+_)/2,0)),E.lineTo(O-N,0),E.arc(O-N,N,N,Math.PI*3/2,0,!1),s===p&&(E.lineTo(O,(c-x)/2),E.lineTo(O+_,c/2),E.lineTo(O,(c+x)/2)),E.lineTo(O,c-D),E.arc(O-D,c-D,D,0,Math.PI/2,!1),s===y&&(E.lineTo((O+_)/2,c),E.lineTo(O/2,c+x),E.lineTo((O-_)/2,c)),E.lineTo(R,c),E.arc(R,c-R,R,Math.PI/2,Math.PI,!1),s===T&&(E.lineTo(0,(c+x)/2),E.lineTo(-1*_,c/2),E.lineTo(0,(c-x)/2)),E.lineTo(0,K),E.arc(K,K,K,Math.PI,Math.PI*3/2,!1),E.closePath(),E.fillStrokeShape(this)}getSelfRect(){let E=0,O=0,c=this.pointerWidth(),s=this.pointerHeight(),_=this.pointerDirection(),x=this.width(),U=this.height();return _===f?(O-=s,U+=s):_===y?U+=s:_===T?(E-=c*1.5,x+=c):_===p&&(x+=c*1.5),{x:E,y:O,width:x,height:U}}}return Za.Tag=o,o.prototype.className="Tag",(0,C._registerNode)(o),h.Factory.addGetterSetter(o,"pointerDirection",d),h.Factory.addGetterSetter(o,"pointerWidth",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(o,"pointerHeight",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(o,"cornerRadius",0,(0,G.getNumberOrArrayOfNumbersValidator)(4)),Za}var vi={},ch;function i0(){if(ch)return vi;ch=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Rect=void 0;const h=Tt(),r=oe(),H=bt(),G=wt(),C=xt();class v extends r.Shape{_sceneFunc(d){const f=this.cornerRadius(),p=this.width(),y=this.height();d.beginPath(),f?G.Util.drawRoundedRectPath(d,p,y,f):d.rect(0,0,p,y),d.closePath(),d.fillStrokeShape(this)}}return vi.Rect=v,v.prototype.className="Rect",(0,H._registerNode)(v),h.Factory.addGetterSetter(v,"cornerRadius",0,(0,C.getNumberOrArrayOfNumbersValidator)(4)),vi}var _i={},hh;function Hf(){if(hh)return _i;hh=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.RegularPolygon=void 0;const h=Tt(),r=oe(),H=xt(),G=bt();let C=class extends r.Shape{_sceneFunc(g){const d=this._getPoints();g.beginPath(),g.moveTo(d[0].x,d[0].y);for(let f=1;f<d.length;f++)g.lineTo(d[f].x,d[f].y);g.closePath(),g.fillStrokeShape(this)}_getPoints(){const g=this.attrs.sides,d=this.attrs.radius||0,f=[];for(let p=0;p<g;p++)f.push({x:d*Math.sin(p*2*Math.PI/g),y:-1*d*Math.cos(p*2*Math.PI/g)});return f}getSelfRect(){const g=this._getPoints();let d=g[0].x,f=g[0].y,p=g[0].x,y=g[0].y;return g.forEach(T=>{d=Math.min(d,T.x),f=Math.max(f,T.x),p=Math.min(p,T.y),y=Math.max(y,T.y)}),{x:d,y:p,width:f-d,height:y-p}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}};return _i.RegularPolygon=C,C.prototype.className="RegularPolygon",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["radius"],(0,G._registerNode)(C),h.Factory.addGetterSetter(C,"radius",0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(C,"sides",0,(0,H.getNumberValidator)()),_i}var Si={},dh;function Lf(){if(dh)return Si;dh=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Ring=void 0;const h=Tt(),r=oe(),H=xt(),G=bt(),C=Math.PI*2;let v=class extends r.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.innerRadius(),0,C,!1),d.moveTo(this.outerRadius(),0),d.arc(0,0,this.outerRadius(),C,0,!0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Si.Ring=v,v.prototype.className="Ring",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,G._registerNode)(v),h.Factory.addGetterSetter(v,"innerRadius",0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(v,"outerRadius",0,(0,H.getNumberValidator)()),Si}var bi={},fh;function Vf(){if(fh)return bi;fh=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Sprite=void 0;const h=Tt(),r=oe(),H=jr(),G=xt(),C=bt();let v=class extends r.Shape{constructor(d){super(d),this._updated=!0,this.anim=new H.Animation(()=>{const f=this._updated;return this._updated=!1,f}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(d){const f=this.animation(),p=this.frameIndex(),y=p*4,T=this.animations()[f],m=this.frameOffsets(),u=T[y+0],o=T[y+1],b=T[y+2],E=T[y+3],O=this.image();if((this.hasFill()||this.hasStroke())&&(d.beginPath(),d.rect(0,0,b,E),d.closePath(),d.fillStrokeShape(this)),O)if(m){const c=m[f],s=p*2;d.drawImage(O,u,o,b,E,c[s+0],c[s+1],b,E)}else d.drawImage(O,u,o,b,E,0,0,b,E)}_hitFunc(d){const f=this.animation(),p=this.frameIndex(),y=p*4,T=this.animations()[f],m=this.frameOffsets(),u=T[y+2],o=T[y+3];if(d.beginPath(),m){const b=m[f],E=p*2;d.rect(b[E+0],b[E+1],u,o)}else d.rect(0,0,u,o);d.closePath(),d.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const d=this;this.interval=setInterval(function(){d._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const d=this.getLayer();this.anim.setLayers(d),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const d=this.frameIndex(),f=this.animation(),p=this.animations(),y=p[f],T=y.length/4;d<T-1?this.frameIndex(d+1):this.frameIndex(0)}};return bi.Sprite=v,v.prototype.className="Sprite",(0,C._registerNode)(v),h.Factory.addGetterSetter(v,"animation"),h.Factory.addGetterSetter(v,"animations"),h.Factory.addGetterSetter(v,"frameOffsets"),h.Factory.addGetterSetter(v,"image"),h.Factory.addGetterSetter(v,"frameIndex",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"frameRate",17,(0,G.getNumberValidator)()),h.Factory.backCompat(v,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),bi}var Ci={},gh;function qf(){if(gh)return Ci;gh=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Star=void 0;const h=Tt(),r=oe(),H=xt(),G=bt();let C=class extends r.Shape{_sceneFunc(g){const d=this.innerRadius(),f=this.outerRadius(),p=this.numPoints();g.beginPath(),g.moveTo(0,0-f);for(let y=1;y<p*2;y++){const T=y%2===0?f:d,m=T*Math.sin(y*Math.PI/p),u=-1*T*Math.cos(y*Math.PI/p);g.lineTo(m,u)}g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}};return Ci.Star=C,C.prototype.className="Star",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,G._registerNode)(C),h.Factory.addGetterSetter(C,"numPoints",5,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(C,"innerRadius",0,(0,H.getNumberValidator)()),h.Factory.addGetterSetter(C,"outerRadius",0,(0,H.getNumberValidator)()),Ci}var Nn={},mh;function l0(){if(mh)return Nn;mh=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Text=void 0,Nn.stringToArray=g;const h=wt(),r=Tt(),H=oe(),G=bt(),C=xt(),v=bt();function g(I){return[...I].reduce((j,et,st,$)=>{if(new RegExp("\\p{Emoji}","u").test(et)){const L=$[st+1];L&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(L)?(j.push(et+L),$[st+1]=""):j.push(et)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(et+($[st+1]||""))?j.push(et+$[st+1]):st>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(et)?j[j.length-1]+=et:et&&j.push(et);return j},[])}const d="auto",f="center",p="inherit",y="justify",T="Change.konva",m="2d",u="-",o="left",b="text",E="Text",O="top",c="bottom",s="middle",_="normal",x="px ",U=" ",K="right",N="rtl",R="word",D="char",V="none",w="…",X=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],F=X.length;function q(I){return I.split(",").map(j=>{j=j.trim();const et=j.indexOf(" ")>=0,st=j.indexOf('"')>=0||j.indexOf("'")>=0;return et&&!st&&(j=`"${j}"`),j}).join(", ")}let tt;function S(){return tt||(tt=h.Util.createCanvasElement().getContext(m),tt)}function A(I){I.fillText(this._partialText,this._partialTextX,this._partialTextY)}function z(I){I.setAttr("miterLimit",2),I.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B(I){return I=I||{},!I.fillLinearGradientColorStops&&!I.fillRadialGradientColorStops&&!I.fillPatternImage&&(I.fill=I.fill||"black"),I}let P=class extends H.Shape{constructor(j){super(B(j)),this._partialTextX=0,this._partialTextY=0;for(let et=0;et<F;et++)this.on(X[et]+T,this._setTextData);this._setTextData()}_sceneFunc(j){const et=this.textArr,st=et.length;if(!this.text())return;let $=this.padding(),L=this.fontSize(),J=this.lineHeight()*L,lt=this.verticalAlign(),rt=this.direction(),ct=0,mt=this.align(),pt=this.getWidth(),Ot=this.letterSpacing(),dt=this.fill(),Lt=this.textDecoration(),Dt=Lt.indexOf("underline")!==-1,qt=Lt.indexOf("line-through")!==-1,He;rt=rt===p?j.direction:rt;let ue=J/2,xe=s;if(G.Konva._fixTextRendering){const vt=this.measureSize("M");xe="alphabetic",ue=(vt.fontBoundingBoxAscent-vt.fontBoundingBoxDescent)/2+J/2}for(rt===N&&j.setAttr("direction",rt),j.setAttr("font",this._getContextFont()),j.setAttr("textBaseline",xe),j.setAttr("textAlign",o),lt===s?ct=(this.getHeight()-st*J-$*2)/2:lt===c&&(ct=this.getHeight()-st*J-$*2),j.translate($,ct+$),He=0;He<st;He++){let vt=0,me=0;const Ne=et[He],we=Ne.text,Zt=Ne.width,It=Ne.lastInParagraph;if(j.save(),mt===K?vt+=pt-Zt-$*2:mt===f&&(vt+=(pt-Zt-$*2)/2),Dt){j.save(),j.beginPath();const ne=G.Konva._fixTextRendering?Math.round(L/4):Math.round(L/2),Ae=vt,ce=ue+me+ne;j.moveTo(Ae,ce);const he=mt===y&&!It?pt-$*2:Zt;j.lineTo(Ae+Math.round(he),ce),j.lineWidth=L/15;const fa=this._getLinearGradient();j.strokeStyle=fa||dt,j.stroke(),j.restore()}if(qt){j.save(),j.beginPath();const ne=G.Konva._fixTextRendering?-Math.round(L/4):0;j.moveTo(vt,ue+me+ne);const Ae=mt===y&&!It?pt-$*2:Zt;j.lineTo(vt+Math.round(Ae),ue+me+ne),j.lineWidth=L/15;const ce=this._getLinearGradient();j.strokeStyle=ce||dt,j.stroke(),j.restore()}if(rt!==N&&(Ot!==0||mt===y)){const ne=we.split(" ").length-1,Ae=g(we);for(let ce=0;ce<Ae.length;ce++){const he=Ae[ce];he===" "&&!It&&mt===y&&(vt+=(pt-$*2-Zt)/ne),this._partialTextX=vt,this._partialTextY=ue+me,this._partialText=he,j.fillStrokeShape(this),vt+=this.measureSize(he).width+Ot}}else Ot!==0&&j.setAttr("letterSpacing",`${Ot}px`),this._partialTextX=vt,this._partialTextY=ue+me,this._partialText=we,j.fillStrokeShape(this);j.restore(),st>1&&(ue+=J)}}_hitFunc(j){const et=this.getWidth(),st=this.getHeight();j.beginPath(),j.rect(0,0,et,st),j.closePath(),j.fillStrokeShape(this)}setText(j){const et=h.Util._isString(j)?j:j==null?"":j+"";return this._setAttr(b,et),this}getWidth(){return this.attrs.width===d||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===d||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return h.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(j){var et,st,$,L,J,lt,rt,ct,mt,pt,Ot;let dt=S(),Lt=this.fontSize(),Dt;dt.save(),dt.font=this._getContextFont(),Dt=dt.measureText(j),dt.restore();const qt=Lt/100;return{actualBoundingBoxAscent:(et=Dt.actualBoundingBoxAscent)!==null&&et!==void 0?et:71.58203125*qt,actualBoundingBoxDescent:(st=Dt.actualBoundingBoxDescent)!==null&&st!==void 0?st:0,actualBoundingBoxLeft:($=Dt.actualBoundingBoxLeft)!==null&&$!==void 0?$:-7.421875*qt,actualBoundingBoxRight:(L=Dt.actualBoundingBoxRight)!==null&&L!==void 0?L:75.732421875*qt,alphabeticBaseline:(J=Dt.alphabeticBaseline)!==null&&J!==void 0?J:0,emHeightAscent:(lt=Dt.emHeightAscent)!==null&&lt!==void 0?lt:100*qt,emHeightDescent:(rt=Dt.emHeightDescent)!==null&&rt!==void 0?rt:-20*qt,fontBoundingBoxAscent:(ct=Dt.fontBoundingBoxAscent)!==null&&ct!==void 0?ct:91*qt,fontBoundingBoxDescent:(mt=Dt.fontBoundingBoxDescent)!==null&&mt!==void 0?mt:21*qt,hangingBaseline:(pt=Dt.hangingBaseline)!==null&&pt!==void 0?pt:72.80000305175781*qt,ideographicBaseline:(Ot=Dt.ideographicBaseline)!==null&&Ot!==void 0?Ot:-21*qt,width:Dt.width,height:Lt}}_getContextFont(){return this.fontStyle()+U+this.fontVariant()+U+(this.fontSize()+x)+q(this.fontFamily())}_addTextLine(j){this.align()===y&&(j=j.trim());const st=this._getTextWidth(j);return this.textArr.push({text:j,width:st,lastInParagraph:!1})}_getTextWidth(j){const et=this.letterSpacing(),st=j.length;return S().measureText(j).width+et*st}_setTextData(){let j=this.text().split(`
`),et=+this.fontSize(),st=0,$=this.lineHeight()*et,L=this.attrs.width,J=this.attrs.height,lt=L!==d&&L!==void 0,rt=J!==d&&J!==void 0,ct=this.padding(),mt=L-ct*2,pt=J-ct*2,Ot=0,dt=this.wrap(),Lt=dt!==V,Dt=dt!==D&&Lt,qt=this.ellipsis();this.textArr=[],S().font=this._getContextFont();const He=qt?this._getTextWidth(w):0;for(let ue=0,xe=j.length;ue<xe;++ue){let vt=j[ue],me=this._getTextWidth(vt);if(lt&&me>mt)for(;vt.length>0;){let Ne=0,we=g(vt).length,Zt="",It=0;for(;Ne<we;){const ne=Ne+we>>>1,Ae=g(vt),ce=Ae.slice(0,ne+1).join(""),he=this._getTextWidth(ce);(qt&&rt&&Ot+$>pt?he+He:he)<=mt?(Ne=ne+1,Zt=ce,It=he):we=ne}if(Zt){if(Dt){const ce=g(vt),he=g(Zt),fa=ce[he.length],Mn=fa===U||fa===u;let Ja;if(Mn&&It<=mt)Ja=he.length;else{const On=he.lastIndexOf(U),Xl=he.lastIndexOf(u);Ja=Math.max(On,Xl)+1}Ja>0&&(Ne=Ja,Zt=ce.slice(0,Ne).join(""),It=this._getTextWidth(Zt))}if(Zt=Zt.trimRight(),this._addTextLine(Zt),st=Math.max(st,It),Ot+=$,this._shouldHandleEllipsis(Ot)){this._tryToAddEllipsisToLastLine();break}if(vt=g(vt).slice(Ne).join("").trimLeft(),vt.length>0&&(me=this._getTextWidth(vt),me<=mt)){this._addTextLine(vt),Ot+=$,st=Math.max(st,me);break}}else break}else this._addTextLine(vt),Ot+=$,st=Math.max(st,me),this._shouldHandleEllipsis(Ot)&&ue<xe-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),rt&&Ot+$>pt)break}this.textHeight=et,this.textWidth=st}_shouldHandleEllipsis(j){const et=+this.fontSize(),st=this.lineHeight()*et,$=this.attrs.height,L=$!==d&&$!==void 0,J=this.padding(),lt=$-J*2;return!(this.wrap()!==V)||L&&j+st>lt}_tryToAddEllipsisToLastLine(){const j=this.attrs.width,et=j!==d&&j!==void 0,st=this.padding(),$=j-st*2,L=this.ellipsis(),J=this.textArr[this.textArr.length-1];!J||!L||(et&&(this._getTextWidth(J.text+w)<$||(J.text=J.text.slice(0,J.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(J.text+w))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const j=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,et=this.hasShadow();return j&&et?!0:super._useBufferCanvas()}};return Nn.Text=P,P.prototype._fillFunc=A,P.prototype._strokeFunc=z,P.prototype.className=E,P.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,v._registerNode)(P),r.Factory.overWriteSetter(P,"width",(0,C.getNumberOrAutoValidator)()),r.Factory.overWriteSetter(P,"height",(0,C.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(P,"direction",p),r.Factory.addGetterSetter(P,"fontFamily","Arial"),r.Factory.addGetterSetter(P,"fontSize",12,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(P,"fontStyle",_),r.Factory.addGetterSetter(P,"fontVariant",_),r.Factory.addGetterSetter(P,"padding",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(P,"align",o),r.Factory.addGetterSetter(P,"verticalAlign",O),r.Factory.addGetterSetter(P,"lineHeight",1,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(P,"wrap",R),r.Factory.addGetterSetter(P,"ellipsis",!1,(0,C.getBooleanValidator)()),r.Factory.addGetterSetter(P,"letterSpacing",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(P,"text","",(0,C.getStringValidator)()),r.Factory.addGetterSetter(P,"textDecoration",""),Nn}var Ei={},ph;function Pf(){if(ph)return Ei;ph=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.TextPath=void 0;const h=wt(),r=Tt(),H=oe(),G=Xr(),C=l0(),v=xt(),g=bt(),d="",f="normal";function p(m){m.fillText(this.partialText,0,0)}function y(m){m.strokeText(this.partialText,0,0)}let T=class extends H.Shape{constructor(u){super(u),this.dummyCanvas=h.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return G.Path.getPathLength(this.dataArray)}_getPointAtLength(u){if(!this.attrs.data)return null;const o=this.pathLength;return u-1>o?null:G.Path.getPointAtLengthOfDataArray(u,this.dataArray)}_readDataAttribute(){this.dataArray=G.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(u){u.setAttr("font",this._getContextFont()),u.setAttr("textBaseline",this.textBaseline()),u.setAttr("textAlign","left"),u.save();const o=this.textDecoration(),b=this.fill(),E=this.fontSize(),O=this.glyphInfo;o==="underline"&&u.beginPath();for(let c=0;c<O.length;c++){u.save();const s=O[c].p0;u.translate(s.x,s.y),u.rotate(O[c].rotation),this.partialText=O[c].text,u.fillStrokeShape(this),o==="underline"&&(c===0&&u.moveTo(0,E/2+1),u.lineTo(E,E/2+1)),u.restore()}o==="underline"&&(u.strokeStyle=b,u.lineWidth=E/20,u.stroke()),u.restore()}_hitFunc(u){u.beginPath();const o=this.glyphInfo;if(o.length>=1){const b=o[0].p0;u.moveTo(b.x,b.y)}for(let b=0;b<o.length;b++){const E=o[b].p1;u.lineTo(E.x,E.y)}u.setAttr("lineWidth",this.fontSize()),u.setAttr("strokeStyle",this.colorKey),u.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return h.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(u){return C.Text.prototype.setText.call(this,u)}_getContextFont(){return C.Text.prototype._getContextFont.call(this)}_getTextSize(u){const b=this.dummyCanvas.getContext("2d");b.save(),b.font=this._getContextFont();const E=b.measureText(u);return b.restore(),{width:E.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:u,height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=u,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const b=this.letterSpacing(),E=this.align(),O=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*b,0);let s=0;E==="center"&&(s=Math.max(0,this.pathLength/2-c/2)),E==="right"&&(s=Math.max(0,this.pathLength-c));const _=(0,C.stringToArray)(this.text());let x=s;for(let U=0;U<_.length;U++){const K=this._getPointAtLength(x);if(!K)return;let N=this._getTextSize(_[U]).width+b;if(_[U]===" "&&E==="justify"){const F=this.text().split(" ").length-1;N+=(this.pathLength-c)/F}const R=this._getPointAtLength(x+N);if(!R)return;const D=G.Path.getLineLength(K.x,K.y,R.x,R.y);let V=0;if(O)try{V=O(_[U-1],_[U])*this.fontSize()}catch{V=0}K.x+=V,R.x+=V,this.textWidth+=V;const w=G.Path.getPointOnLine(V+D/2,K.x,K.y,R.x,R.y),X=Math.atan2(R.y-K.y,R.x-K.x);this.glyphInfo.push({transposeX:w.x,transposeY:w.y,text:_[U],rotation:X,p0:K,p1:R}),x+=N}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const u=[];this.glyphInfo.forEach(function(x){u.push(x.p0.x),u.push(x.p0.y),u.push(x.p1.x),u.push(x.p1.y)});let o=u[0]||0,b=u[0]||0,E=u[1]||0,O=u[1]||0,c,s;for(let x=0;x<u.length/2;x++)c=u[x*2],s=u[x*2+1],o=Math.min(o,c),b=Math.max(b,c),E=Math.min(E,s),O=Math.max(O,s);const _=this.fontSize();return{x:o-_/2,y:E-_/2,width:b-o+_,height:O-E+_}}destroy(){return h.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ei.TextPath=T,T.prototype._fillFunc=p,T.prototype._strokeFunc=y,T.prototype._fillFuncHit=p,T.prototype._strokeFuncHit=y,T.prototype.className="TextPath",T.prototype._attrsAffectingSize=["text","fontSize","data"],(0,g._registerNode)(T),r.Factory.addGetterSetter(T,"data"),r.Factory.addGetterSetter(T,"fontFamily","Arial"),r.Factory.addGetterSetter(T,"fontSize",12,(0,v.getNumberValidator)()),r.Factory.addGetterSetter(T,"fontStyle",f),r.Factory.addGetterSetter(T,"align","left"),r.Factory.addGetterSetter(T,"letterSpacing",0,(0,v.getNumberValidator)()),r.Factory.addGetterSetter(T,"textBaseline","middle"),r.Factory.addGetterSetter(T,"fontVariant",f),r.Factory.addGetterSetter(T,"text",d),r.Factory.addGetterSetter(T,"textDecoration",""),r.Factory.addGetterSetter(T,"kerningFunc",void 0),Ei}var Ti={},yh;function Yf(){if(yh)return Ti;yh=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Transformer=void 0;const h=wt(),r=Tt(),H=Qt(),G=oe(),C=i0(),v=wr(),g=bt(),d=xt(),f=bt(),p="tr-konva",y=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(N=>N+`.${p}`).join(" "),T="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],u={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},o="ontouchstart"in g.Konva._global;function b(N,R,D){if(N==="rotater")return D;R+=h.Util.degToRad(u[N]||0);const V=(h.Util.radToDeg(R)%360+360)%360;return h.Util._inRange(V,315+22.5,360)||h.Util._inRange(V,0,22.5)?"ns-resize":h.Util._inRange(V,45-22.5,45+22.5)?"nesw-resize":h.Util._inRange(V,90-22.5,90+22.5)?"ew-resize":h.Util._inRange(V,135-22.5,135+22.5)?"nwse-resize":h.Util._inRange(V,180-22.5,180+22.5)?"ns-resize":h.Util._inRange(V,225-22.5,225+22.5)?"nesw-resize":h.Util._inRange(V,270-22.5,270+22.5)?"ew-resize":h.Util._inRange(V,315-22.5,315+22.5)?"nwse-resize":(h.Util.error("Transformer has unknown angle for cursor detection: "+V),"pointer")}const E=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function O(N){return{x:N.x+N.width/2*Math.cos(N.rotation)+N.height/2*Math.sin(-N.rotation),y:N.y+N.height/2*Math.cos(N.rotation)+N.width/2*Math.sin(N.rotation)}}function c(N,R,D){const V=D.x+(N.x-D.x)*Math.cos(R)-(N.y-D.y)*Math.sin(R),w=D.y+(N.x-D.x)*Math.sin(R)+(N.y-D.y)*Math.cos(R);return{...N,rotation:N.rotation+R,x:V,y:w}}function s(N,R){const D=O(N);return c(N,R,D)}function _(N,R,D){let V=R;for(let w=0;w<N.length;w++){const X=g.Konva.getAngle(N[w]),F=Math.abs(X-R)%(Math.PI*2);Math.min(F,Math.PI*2-F)<D&&(V=X)}return V}let x=0,U=class extends v.Group{constructor(R){super(R),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(y,this.update),this.getNode()&&this.update()}attachTo(R){return this.setNode(R),this}setNode(R){return h.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([R])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return p+this._id}setNodes(R=[]){this._nodes&&this._nodes.length&&this.detach();const D=R.filter(w=>w.isAncestorOf(this)?(h.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=R=D,R.length===1&&this.useSingleNodeRotation()?this.rotation(R[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(w=>{const X=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(w._attrsAffectingSize.length){const F=w._attrsAffectingSize.map(q=>q+"Change."+this._getEventNamespace()).join(" ");w.on(F,X)}w.on(m.map(F=>F+`.${this._getEventNamespace()}`).join(" "),X),w.on(`absoluteTransformChange.${this._getEventNamespace()}`,X),this._proxyDrag(w)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(R){let D;R.on(`dragstart.${this._getEventNamespace()}`,V=>{D=R.getAbsolutePosition(),!this.isDragging()&&R!==this.findOne(".back")&&this.startDrag(V,!1)}),R.on(`dragmove.${this._getEventNamespace()}`,V=>{if(!D)return;const w=R.getAbsolutePosition(),X=w.x-D.x,F=w.y-D.y;this.nodes().forEach(q=>{if(q===R||q.isDragging())return;const tt=q.getAbsolutePosition();q.setAbsolutePosition({x:tt.x+X,y:tt.y+F}),q.startDrag(V)}),D=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(R=>{R.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(T),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(T,this.__getNodeRect)}__getNodeShape(R,D=this.rotation(),V){const w=R.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),X=R.getAbsoluteScale(V),F=R.getAbsolutePosition(V),q=w.x*X.x-R.offsetX()*X.x,tt=w.y*X.y-R.offsetY()*X.y,S=(g.Konva.getAngle(R.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:F.x+q*Math.cos(S)+tt*Math.sin(-S),y:F.y+tt*Math.cos(S)+q*Math.sin(S),width:w.width*X.x,height:w.height*X.y,rotation:S};return c(A,-g.Konva.getAngle(D),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const D=[];this.nodes().map(S=>{const A=S.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),z=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],B=S.getAbsoluteTransform();z.forEach(function(P){const I=B.point(P);D.push(I)})});const V=new h.Transform;V.rotate(-g.Konva.getAngle(this.rotation()));let w=1/0,X=1/0,F=-1/0,q=-1/0;D.forEach(function(S){const A=V.point(S);w===void 0&&(w=F=A.x,X=q=A.y),w=Math.min(w,A.x),X=Math.min(X,A.y),F=Math.max(F,A.x),q=Math.max(q,A.y)}),V.invert();const tt=V.point({x:w,y:X});return{x:tt.x,y:tt.y,width:F-w,height:q-X,rotation:g.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),E.forEach(R=>{this._createAnchor(R)}),this._createAnchor("rotater")}_createAnchor(R){const D=new C.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:R+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:o?10:"auto"}),V=this;D.on("mousedown touchstart",function(w){V._handleMouseDown(w)}),D.on("dragstart",w=>{D.stopDrag(),w.cancelBubble=!0}),D.on("dragend",w=>{w.cancelBubble=!0}),D.on("mouseenter",()=>{const w=g.Konva.getAngle(this.rotation()),X=this.rotateAnchorCursor(),F=b(R,w,X);D.getStage().content&&(D.getStage().content.style.cursor=F),this._cursorChange=!0}),D.on("mouseout",()=>{D.getStage().content&&(D.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(D)}_createBack(){const R=new G.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(D,V){const w=V.getParent(),X=w.padding();D.beginPath(),D.rect(-X,-X,V.width()+X*2,V.height()+X*2),D.moveTo(V.width()/2,-X),w.rotateEnabled()&&w.rotateLineVisible()&&D.lineTo(V.width()/2,-w.rotateAnchorOffset()*h.Util._sign(V.height())-X),D.fillStrokeShape(V)},hitFunc:(D,V)=>{if(!this.shouldOverdrawWholeArea())return;const w=this.padding();D.beginPath(),D.rect(-w,-w,V.width()+w*2,V.height()+w*2),D.fillStrokeShape(V)}});this.add(R),this._proxyDrag(R),R.on("dragstart",D=>{D.cancelBubble=!0}),R.on("dragmove",D=>{D.cancelBubble=!0}),R.on("dragend",D=>{D.cancelBubble=!0}),this.on("dragmove",D=>{this.update()})}_handleMouseDown(R){if(this._transforming)return;this._movingAnchorName=R.target.name().split(" ")[0];const D=this._getNodeRect(),V=D.width,w=D.height,X=Math.sqrt(Math.pow(V,2)+Math.pow(w,2));this.sin=Math.abs(w/X),this.cos=Math.abs(V/X),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const F=R.target.getAbsolutePosition(),q=R.target.getStage().getPointerPosition();this._anchorDragOffset={x:q.x-F.x,y:q.y-F.y},x++,this._fire("transformstart",{evt:R.evt,target:this.getNode()}),this._nodes.forEach(tt=>{tt._fire("transformstart",{evt:R.evt,target:tt})})}_handleMouseMove(R){let D,V,w;const X=this.findOne("."+this._movingAnchorName),F=X.getStage();F.setPointersPositions(R);const q=F.getPointerPosition();let tt={x:q.x-this._anchorDragOffset.x,y:q.y-this._anchorDragOffset.y};const S=X.getAbsolutePosition();this.anchorDragBoundFunc()&&(tt=this.anchorDragBoundFunc()(S,tt,R)),X.setAbsolutePosition(tt);const A=X.getAbsolutePosition();if(S.x===A.x&&S.y===A.y)return;if(this._movingAnchorName==="rotater"){const $=this._getNodeRect();D=X.x()-$.width/2,V=-X.y()+$.height/2;let L=Math.atan2(-V,D)+Math.PI/2;$.height<0&&(L-=Math.PI);const lt=g.Konva.getAngle(this.rotation())+L,rt=g.Konva.getAngle(this.rotationSnapTolerance()),mt=_(this.rotationSnaps(),lt,rt)-$.rotation,pt=s($,mt);this._fitNodesInto(pt,R);return}const z=this.shiftBehavior();let B;z==="inverted"?B=this.keepRatio()&&!R.shiftKey:z==="none"?B=this.keepRatio():B=this.keepRatio()||R.shiftKey;let P=this.centeredScaling()||R.altKey;if(this._movingAnchorName==="top-left"){if(B){const $=P?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};w=Math.sqrt(Math.pow($.x-X.x(),2)+Math.pow($.y-X.y(),2));const L=this.findOne(".top-left").x()>$.x?-1:1,J=this.findOne(".top-left").y()>$.y?-1:1;D=w*this.cos*L,V=w*this.sin*J,this.findOne(".top-left").x($.x-D),this.findOne(".top-left").y($.y-V)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(X.y());else if(this._movingAnchorName==="top-right"){if(B){const $=P?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};w=Math.sqrt(Math.pow(X.x()-$.x,2)+Math.pow($.y-X.y(),2));const L=this.findOne(".top-right").x()<$.x?-1:1,J=this.findOne(".top-right").y()>$.y?-1:1;D=w*this.cos*L,V=w*this.sin*J,this.findOne(".top-right").x($.x+D),this.findOne(".top-right").y($.y-V)}var I=X.position();this.findOne(".top-left").y(I.y),this.findOne(".bottom-right").x(I.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(X.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(X.x());else if(this._movingAnchorName==="bottom-left"){if(B){const $=P?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};w=Math.sqrt(Math.pow($.x-X.x(),2)+Math.pow(X.y()-$.y,2));const L=$.x<X.x()?-1:1,J=X.y()<$.y?-1:1;D=w*this.cos*L,V=w*this.sin*J,X.x($.x-D),X.y($.y+V)}I=X.position(),this.findOne(".top-left").x(I.x),this.findOne(".bottom-right").y(I.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(X.y());else if(this._movingAnchorName==="bottom-right"){if(B){const $=P?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};w=Math.sqrt(Math.pow(X.x()-$.x,2)+Math.pow(X.y()-$.y,2));const L=this.findOne(".bottom-right").x()<$.x?-1:1,J=this.findOne(".bottom-right").y()<$.y?-1:1;D=w*this.cos*L,V=w*this.sin*J,this.findOne(".bottom-right").x($.x+D),this.findOne(".bottom-right").y($.y+V)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(P=this.centeredScaling()||R.altKey,P){const $=this.findOne(".top-left"),L=this.findOne(".bottom-right"),J=$.x(),lt=$.y(),rt=this.getWidth()-L.x(),ct=this.getHeight()-L.y();L.move({x:-J,y:-lt}),$.move({x:rt,y:ct})}const j=this.findOne(".top-left").getAbsolutePosition();D=j.x,V=j.y;const et=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),st=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:V,width:et,height:st,rotation:g.Konva.getAngle(this.rotation())},R)}_handleMouseUp(R){this._removeEvents(R)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(R){var D;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const V=this.getNode();x--,this._fire("transformend",{evt:R,target:V}),(D=this.getLayer())===null||D===void 0||D.batchDraw(),V&&this._nodes.forEach(w=>{var X;w._fire("transformend",{evt:R,target:w}),(X=w.getLayer())===null||X===void 0||X.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(R,D){const V=this._getNodeRect(),w=1;if(h.Util._inRange(R.width,-this.padding()*2-w,w)){this.update();return}if(h.Util._inRange(R.height,-this.padding()*2-w,w)){this.update();return}const X=new h.Transform;if(X.rotate(g.Konva.getAngle(this.rotation())),this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("left")>=0){const B=X.point({x:-this.padding()*2,y:0});R.x+=B.x,R.y+=B.y,R.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y}else if(this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("right")>=0){const B=X.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,R.width+=this.padding()*2}if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("top")>=0){const B=X.point({x:0,y:-this.padding()*2});R.x+=B.x,R.y+=B.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,R.height+=this.padding()*2}else if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const B=X.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,R.height+=this.padding()*2}if(this.boundBoxFunc()){const B=this.boundBoxFunc()(V,R);B?R=B:h.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const F=1e7,q=new h.Transform;q.translate(V.x,V.y),q.rotate(V.rotation),q.scale(V.width/F,V.height/F);const tt=new h.Transform,S=R.width/F,A=R.height/F;this.flipEnabled()===!1?(tt.translate(R.x,R.y),tt.rotate(R.rotation),tt.translate(R.width<0?R.width:0,R.height<0?R.height:0),tt.scale(Math.abs(S),Math.abs(A))):(tt.translate(R.x,R.y),tt.rotate(R.rotation),tt.scale(S,A));const z=tt.multiply(q.invert());this._nodes.forEach(B=>{var P;const I=B.getParent().getAbsoluteTransform(),j=B.getTransform().copy();j.translate(B.offsetX(),B.offsetY());const et=new h.Transform;et.multiply(I.copy().invert()).multiply(z).multiply(I).multiply(j);const st=et.decompose();B.setAttrs(st),(P=B.getLayer())===null||P===void 0||P.batchDraw()}),this.rotation(h.Util._getRotation(R.rotation)),this._nodes.forEach(B=>{this._fire("transform",{evt:D,target:B}),B._fire("transform",{evt:D,target:B})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(R,D){this.findOne(R).setAttrs(D)}update(){var R;const D=this._getNodeRect();this.rotation(h.Util._getRotation(D.rotation));const V=D.width,w=D.height,X=this.enabledAnchors(),F=this.resizeEnabled(),q=this.padding(),tt=this.anchorSize(),S=this.find("._anchor");S.forEach(z=>{z.setAttrs({width:tt,height:tt,offsetX:tt/2,offsetY:tt/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:tt/2+q,offsetY:tt/2+q,visible:F&&X.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:V/2,y:0,offsetY:tt/2+q,visible:F&&X.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:V,y:0,offsetX:tt/2-q,offsetY:tt/2+q,visible:F&&X.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:w/2,offsetX:tt/2+q,visible:F&&X.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:V,y:w/2,offsetX:tt/2-q,visible:F&&X.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:w,offsetX:tt/2+q,offsetY:tt/2-q,visible:F&&X.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:V/2,y:w,offsetY:tt/2-q,visible:F&&X.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:V,y:w,offsetX:tt/2-q,offsetY:tt/2-q,visible:F&&X.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:V/2,y:-this.rotateAnchorOffset()*h.Util._sign(w)-q,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:V,height:w,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const A=this.anchorStyleFunc();A&&S.forEach(z=>{A(z)}),(R=this.getLayer())===null||R===void 0||R.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const R=this.findOne("."+this._movingAnchorName);R&&R.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),v.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return H.Node.prototype.toObject.call(this)}clone(R){return H.Node.prototype.clone.call(this,R)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ti.Transformer=U,U.isTransforming=()=>x>0;function K(N){return N instanceof Array||h.Util.warn("enabledAnchors value should be an array"),N instanceof Array&&N.forEach(function(R){E.indexOf(R)===-1&&h.Util.warn("Unknown anchor name: "+R+". Available names are: "+E.join(", "))}),N||[]}return U.prototype.className="Transformer",(0,f._registerNode)(U),r.Factory.addGetterSetter(U,"enabledAnchors",E,K),r.Factory.addGetterSetter(U,"flipEnabled",!0,(0,d.getBooleanValidator)()),r.Factory.addGetterSetter(U,"resizeEnabled",!0),r.Factory.addGetterSetter(U,"anchorSize",10,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"rotateEnabled",!0),r.Factory.addGetterSetter(U,"rotateLineVisible",!0),r.Factory.addGetterSetter(U,"rotationSnaps",[]),r.Factory.addGetterSetter(U,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"rotateAnchorCursor","crosshair"),r.Factory.addGetterSetter(U,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"borderEnabled",!0),r.Factory.addGetterSetter(U,"anchorStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(U,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"anchorFill","white"),r.Factory.addGetterSetter(U,"anchorCornerRadius",0,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"borderStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(U,"borderStrokeWidth",1,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"borderDash"),r.Factory.addGetterSetter(U,"keepRatio",!0),r.Factory.addGetterSetter(U,"shiftBehavior","default"),r.Factory.addGetterSetter(U,"centeredScaling",!1),r.Factory.addGetterSetter(U,"ignoreStroke",!1),r.Factory.addGetterSetter(U,"padding",0,(0,d.getNumberValidator)()),r.Factory.addGetterSetter(U,"nodes"),r.Factory.addGetterSetter(U,"node"),r.Factory.addGetterSetter(U,"boundBoxFunc"),r.Factory.addGetterSetter(U,"anchorDragBoundFunc"),r.Factory.addGetterSetter(U,"anchorStyleFunc"),r.Factory.addGetterSetter(U,"shouldOverdrawWholeArea",!1),r.Factory.addGetterSetter(U,"useSingleNodeRotation",!0),r.Factory.backCompat(U,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ti}var xi={},vh;function Ff(){if(vh)return xi;vh=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Wedge=void 0;const h=Tt(),r=oe(),H=bt(),G=xt(),C=bt();let v=class extends r.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.radius(),0,H.Konva.getAngle(this.angle()),this.clockwise()),d.lineTo(0,0),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return xi.Wedge=v,v.prototype.className="Wedge",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["radius"],(0,C._registerNode)(v),h.Factory.addGetterSetter(v,"radius",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"angle",0,(0,G.getNumberValidator)()),h.Factory.addGetterSetter(v,"clockwise",!1),h.Factory.backCompat(v,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),xi}var Ni={},_h;function Kf(){if(_h)return Ni;_h=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Blur=void 0;const h=Tt(),r=Qt(),H=xt();function G(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const C=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],v=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function g(f,p){const y=f.data,T=f.width,m=f.height;let u,o,b,E,O,c,s,_,x,U,K,N,R,D,V,w,X,F,q,tt;const S=p+p+1,A=T-1,z=m-1,B=p+1,P=B*(B+1)/2,I=new G,j=C[p],et=v[p];let st=null,$=I,L=null,J=null;for(let lt=1;lt<S;lt++)$=$.next=new G,lt===B&&(st=$);$.next=I,b=o=0;for(let lt=0;lt<m;lt++){N=R=D=V=E=O=c=s=0,_=B*(w=y[o]),x=B*(X=y[o+1]),U=B*(F=y[o+2]),K=B*(q=y[o+3]),E+=P*w,O+=P*X,c+=P*F,s+=P*q,$=I;for(let rt=0;rt<B;rt++)$.r=w,$.g=X,$.b=F,$.a=q,$=$.next;for(let rt=1;rt<B;rt++)u=o+((A<rt?A:rt)<<2),E+=($.r=w=y[u])*(tt=B-rt),O+=($.g=X=y[u+1])*tt,c+=($.b=F=y[u+2])*tt,s+=($.a=q=y[u+3])*tt,N+=w,R+=X,D+=F,V+=q,$=$.next;L=I,J=st;for(let rt=0;rt<T;rt++)y[o+3]=q=s*j>>et,q!==0?(q=255/q,y[o]=(E*j>>et)*q,y[o+1]=(O*j>>et)*q,y[o+2]=(c*j>>et)*q):y[o]=y[o+1]=y[o+2]=0,E-=_,O-=x,c-=U,s-=K,_-=L.r,x-=L.g,U-=L.b,K-=L.a,u=b+((u=rt+p+1)<A?u:A)<<2,N+=L.r=y[u],R+=L.g=y[u+1],D+=L.b=y[u+2],V+=L.a=y[u+3],E+=N,O+=R,c+=D,s+=V,L=L.next,_+=w=J.r,x+=X=J.g,U+=F=J.b,K+=q=J.a,N-=w,R-=X,D-=F,V-=q,J=J.next,o+=4;b+=T}for(let lt=0;lt<T;lt++){R=D=V=N=O=c=s=E=0,o=lt<<2,_=B*(w=y[o]),x=B*(X=y[o+1]),U=B*(F=y[o+2]),K=B*(q=y[o+3]),E+=P*w,O+=P*X,c+=P*F,s+=P*q,$=I;for(let ct=0;ct<B;ct++)$.r=w,$.g=X,$.b=F,$.a=q,$=$.next;let rt=T;for(let ct=1;ct<=p;ct++)o=rt+lt<<2,E+=($.r=w=y[o])*(tt=B-ct),O+=($.g=X=y[o+1])*tt,c+=($.b=F=y[o+2])*tt,s+=($.a=q=y[o+3])*tt,N+=w,R+=X,D+=F,V+=q,$=$.next,ct<z&&(rt+=T);o=lt,L=I,J=st;for(let ct=0;ct<m;ct++)u=o<<2,y[u+3]=q=s*j>>et,q>0?(q=255/q,y[u]=(E*j>>et)*q,y[u+1]=(O*j>>et)*q,y[u+2]=(c*j>>et)*q):y[u]=y[u+1]=y[u+2]=0,E-=_,O-=x,c-=U,s-=K,_-=L.r,x-=L.g,U-=L.b,K-=L.a,u=lt+((u=ct+B)<z?u:z)*T<<2,E+=N+=L.r=y[u],O+=R+=L.g=y[u+1],c+=D+=L.b=y[u+2],s+=V+=L.a=y[u+3],L=L.next,_+=w=J.r,x+=X=J.g,U+=F=J.b,K+=q=J.a,N-=w,R-=X,D-=F,V-=q,J=J.next,o+=T}}const d=function(p){const y=Math.round(this.blurRadius());y>0&&g(p,y)};return Ni.Blur=d,h.Factory.addGetterSetter(r.Node,"blurRadius",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Ni}var Ai={},Sh;function wf(){if(Sh)return Ai;Sh=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Brighten=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=this.brightness()*255,g=C.data,d=g.length;for(let f=0;f<d;f+=4)g[f]+=v,g[f+1]+=v,g[f+2]+=v};return Ai.Brighten=G,h.Factory.addGetterSetter(r.Node,"brightness",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Ai}var Ri={},bh;function jf(){if(bh)return Ri;bh=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Contrast=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=Math.pow((this.contrast()+100)/100,2),g=C.data,d=g.length;let f=150,p=150,y=150;for(let T=0;T<d;T+=4)f=g[T],p=g[T+1],y=g[T+2],f/=255,f-=.5,f*=v,f+=.5,f*=255,p/=255,p-=.5,p*=v,p+=.5,p*=255,y/=255,y-=.5,y*=v,y+=.5,y*=255,f=f<0?0:f>255?255:f,p=p<0?0:p>255?255:p,y=y<0?0:y>255?255:y,g[T]=f,g[T+1]=p,g[T+2]=y};return Ri.Contrast=G,h.Factory.addGetterSetter(r.Node,"contrast",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Ri}var Mi={},Ch;function Xf(){if(Ch)return Mi;Ch=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Emboss=void 0;const h=Tt(),r=Qt(),H=wt(),G=xt(),C=function(v){const g=this.embossStrength()*10,d=this.embossWhiteLevel()*255,f=this.embossDirection(),p=this.embossBlend(),y=v.data,T=v.width,m=v.height,u=T*4;let o=0,b=0,E=m;switch(f){case"top-left":o=-1,b=-1;break;case"top":o=-1,b=0;break;case"top-right":o=-1,b=1;break;case"right":o=0,b=1;break;case"bottom-right":o=1,b=1;break;case"bottom":o=1,b=0;break;case"bottom-left":o=1,b=-1;break;case"left":o=0,b=-1;break;default:H.Util.error("Unknown emboss direction: "+f)}do{const O=(E-1)*u;let c=o;E+c<1&&(c=0),E+c>m&&(c=0);const s=(E-1+c)*T*4;let _=T;do{const x=O+(_-1)*4;let U=b;_+U<1&&(U=0),_+U>T&&(U=0);const K=s+(_-1+U)*4,N=y[x]-y[K],R=y[x+1]-y[K+1],D=y[x+2]-y[K+2];let V=N;const w=V>0?V:-V,X=R>0?R:-R,F=D>0?D:-D;if(X>w&&(V=R),F>w&&(V=D),V*=g,p){const q=y[x]+V,tt=y[x+1]+V,S=y[x+2]+V;y[x]=q>255?255:q<0?0:q,y[x+1]=tt>255?255:tt<0?0:tt,y[x+2]=S>255?255:S<0?0:S}else{let q=d-V;q<0?q=0:q>255&&(q=255),y[x]=y[x+1]=y[x+2]=q}}while(--_)}while(--E)};return Mi.Emboss=C,h.Factory.addGetterSetter(r.Node,"embossStrength",.5,(0,G.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"embossWhiteLevel",.5,(0,G.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"embossDirection","top-left",void 0,h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"embossBlend",!1,void 0,h.Factory.afterSetFilter),Mi}var Oi={},Eh;function Qf(){if(Eh)return Oi;Eh=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Enhance=void 0;const h=Tt(),r=Qt(),H=xt();function G(v,g,d,f,p){const y=d-g,T=p-f;if(y===0)return f+T/2;if(T===0)return f;let m=(v-g)/y;return m=T*m+f,m}const C=function(v){const g=v.data,d=g.length;let f=g[0],p=f,y,T=g[1],m=T,u,o=g[2],b=o,E;const O=this.enhance();if(O===0)return;for(let N=0;N<d;N+=4)y=g[N+0],y<f?f=y:y>p&&(p=y),u=g[N+1],u<T?T=u:u>m&&(m=u),E=g[N+2],E<o?o=E:E>b&&(b=E);p===f&&(p=255,f=0),m===T&&(m=255,T=0),b===o&&(b=255,o=0);let c,s,_,x,U,K;if(O>0)c=p+O*(255-p),s=f-O*(f-0),_=m+O*(255-m),x=T-O*(T-0),U=b+O*(255-b),K=o-O*(o-0);else{const N=(p+f)*.5;c=p+O*(p-N),s=f+O*(f-N);const R=(m+T)*.5;_=m+O*(m-R),x=T+O*(T-R);const D=(b+o)*.5;U=b+O*(b-D),K=o+O*(o-D)}for(let N=0;N<d;N+=4)g[N+0]=G(g[N+0],f,p,s,c),g[N+1]=G(g[N+1],T,m,x,_),g[N+2]=G(g[N+2],o,b,K,U)};return Oi.Enhance=C,h.Factory.addGetterSetter(r.Node,"enhance",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Oi}var Di={},Th;function Zf(){if(Th)return Di;Th=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Grayscale=void 0;const h=function(r){const H=r.data,G=H.length;for(let C=0;C<G;C+=4){const v=.34*H[C]+.5*H[C+1]+.16*H[C+2];H[C]=v,H[C+1]=v,H[C+2]=v}};return Di.Grayscale=h,Di}var Gi={},xh;function Jf(){if(xh)return Gi;xh=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HSL=void 0;const h=Tt(),r=Qt(),H=xt();h.Factory.addGetterSetter(r.Node,"hue",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"saturation",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"luminance",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter);const G=function(C){const v=C.data,g=v.length,d=1,f=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,y=this.luminance()*127,T=d*f*Math.cos(p*Math.PI/180),m=d*f*Math.sin(p*Math.PI/180),u=.299*d+.701*T+.167*m,o=.587*d-.587*T+.33*m,b=.114*d-.114*T-.497*m,E=.299*d-.299*T-.328*m,O=.587*d+.413*T+.035*m,c=.114*d-.114*T+.293*m,s=.299*d-.3*T+1.25*m,_=.587*d-.586*T-1.05*m,x=.114*d+.886*T-.2*m;let U,K,N,R;for(let D=0;D<g;D+=4)U=v[D+0],K=v[D+1],N=v[D+2],R=v[D+3],v[D+0]=u*U+o*K+b*N+y,v[D+1]=E*U+O*K+c*N+y,v[D+2]=s*U+_*K+x*N+y,v[D+3]=R};return Gi.HSL=G,Gi}var Ui={},Nh;function kf(){if(Nh)return Ui;Nh=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.HSV=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=C.data,g=v.length,d=Math.pow(2,this.value()),f=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,y=d*f*Math.cos(p*Math.PI/180),T=d*f*Math.sin(p*Math.PI/180),m=.299*d+.701*y+.167*T,u=.587*d-.587*y+.33*T,o=.114*d-.114*y-.497*T,b=.299*d-.299*y-.328*T,E=.587*d+.413*y+.035*T,O=.114*d-.114*y+.293*T,c=.299*d-.3*y+1.25*T,s=.587*d-.586*y-1.05*T,_=.114*d+.886*y-.2*T;for(let x=0;x<g;x+=4){const U=v[x+0],K=v[x+1],N=v[x+2],R=v[x+3];v[x+0]=m*U+u*K+o*N,v[x+1]=b*U+E*K+O*N,v[x+2]=c*U+s*K+_*N,v[x+3]=R}};return Ui.HSV=G,h.Factory.addGetterSetter(r.Node,"hue",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"saturation",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"value",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Ui}var zi={},Ah;function Wf(){if(Ah)return zi;Ah=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Invert=void 0;const h=function(r){const H=r.data,G=H.length;for(let C=0;C<G;C+=4)H[C]=255-H[C],H[C+1]=255-H[C+1],H[C+2]=255-H[C+2]};return zi.Invert=h,zi}var Bi={},Rh;function If(){if(Rh)return Bi;Rh=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Kaleidoscope=void 0;const h=Tt(),r=Qt(),H=wt(),G=xt(),C=function(d,f,p){const y=d.data,T=f.data,m=d.width,u=d.height,o=p.polarCenterX||m/2,b=p.polarCenterY||u/2;let E=Math.sqrt(o*o+b*b),O=m-o,c=u-b;const s=Math.sqrt(O*O+c*c);E=s>E?s:E;const _=u,x=m,U=360/x*Math.PI/180;for(let K=0;K<x;K+=1){const N=Math.sin(K*U),R=Math.cos(K*U);for(let D=0;D<_;D+=1){O=Math.floor(o+E*D/_*R),c=Math.floor(b+E*D/_*N);let V=(c*m+O)*4;const w=y[V+0],X=y[V+1],F=y[V+2],q=y[V+3];V=(K+D*m)*4,T[V+0]=w,T[V+1]=X,T[V+2]=F,T[V+3]=q}}},v=function(d,f,p){const y=d.data,T=f.data,m=d.width,u=d.height,o=p.polarCenterX||m/2,b=p.polarCenterY||u/2;let E=Math.sqrt(o*o+b*b),O=m-o,c=u-b;const s=Math.sqrt(O*O+c*c);E=s>E?s:E;const _=u,x=m,U=0;let K,N;for(O=0;O<m;O+=1)for(c=0;c<u;c+=1){const R=O-o,D=c-b,V=Math.sqrt(R*R+D*D)*_/E;let w=(Math.atan2(D,R)*180/Math.PI+360+U)%360;w=w*x/360,K=Math.floor(w),N=Math.floor(V);let X=(N*m+K)*4;const F=y[X+0],q=y[X+1],tt=y[X+2],S=y[X+3];X=(c*m+O)*4,T[X+0]=F,T[X+1]=q,T[X+2]=tt,T[X+3]=S}},g=function(d){const f=d.width,p=d.height;let y,T,m,u,o,b,E,O,c,s,_=Math.round(this.kaleidoscopePower());const x=Math.round(this.kaleidoscopeAngle()),U=Math.floor(f*(x%360)/360);if(_<1)return;const K=H.Util.createCanvasElement();K.width=f,K.height=p;const N=K.getContext("2d").getImageData(0,0,f,p);H.Util.releaseCanvas(K),C(d,N,{polarCenterX:f/2,polarCenterY:p/2});let R=f/Math.pow(2,_);for(;R<=8;)R=R*2,_-=1;R=Math.ceil(R);let D=R,V=0,w=D,X=1;for(U+R>f&&(V=D,w=0,X=-1),T=0;T<p;T+=1)for(y=V;y!==w;y+=X)m=Math.round(y+U)%f,c=(f*T+m)*4,o=N.data[c+0],b=N.data[c+1],E=N.data[c+2],O=N.data[c+3],s=(f*T+y)*4,N.data[s+0]=o,N.data[s+1]=b,N.data[s+2]=E,N.data[s+3]=O;for(T=0;T<p;T+=1)for(D=Math.floor(R),u=0;u<_;u+=1){for(y=0;y<D+1;y+=1)c=(f*T+y)*4,o=N.data[c+0],b=N.data[c+1],E=N.data[c+2],O=N.data[c+3],s=(f*T+D*2-y-1)*4,N.data[s+0]=o,N.data[s+1]=b,N.data[s+2]=E,N.data[s+3]=O;D*=2}v(N,d,{})};return Bi.Kaleidoscope=g,h.Factory.addGetterSetter(r.Node,"kaleidoscopePower",2,(0,G.getNumberValidator)(),h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"kaleidoscopeAngle",0,(0,G.getNumberValidator)(),h.Factory.afterSetFilter),Bi}var Hi={},Mh;function $f(){if(Mh)return Hi;Mh=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Mask=void 0;const h=Tt(),r=Qt(),H=xt();function G(m,u,o){let b=(o*m.width+u)*4;const E=[];return E.push(m.data[b++],m.data[b++],m.data[b++],m.data[b++]),E}function C(m,u){return Math.sqrt(Math.pow(m[0]-u[0],2)+Math.pow(m[1]-u[1],2)+Math.pow(m[2]-u[2],2))}function v(m){const u=[0,0,0];for(let o=0;o<m.length;o++)u[0]+=m[o][0],u[1]+=m[o][1],u[2]+=m[o][2];return u[0]/=m.length,u[1]/=m.length,u[2]/=m.length,u}function g(m,u){const o=G(m,0,0),b=G(m,m.width-1,0),E=G(m,0,m.height-1),O=G(m,m.width-1,m.height-1),c=u||10;if(C(o,b)<c&&C(b,O)<c&&C(O,E)<c&&C(E,o)<c){const s=v([b,o,O,E]),_=[];for(let x=0;x<m.width*m.height;x++){const U=C(s,[m.data[x*4],m.data[x*4+1],m.data[x*4+2]]);_[x]=U<c?0:255}return _}}function d(m,u){for(let o=0;o<m.width*m.height;o++)m.data[4*o+3]=u[o]}function f(m,u,o){const b=[1,1,1,1,0,1,1,1,1],E=Math.round(Math.sqrt(b.length)),O=Math.floor(E/2),c=[];for(let s=0;s<o;s++)for(let _=0;_<u;_++){const x=s*u+_;let U=0;for(let K=0;K<E;K++)for(let N=0;N<E;N++){const R=s+K-O,D=_+N-O;if(R>=0&&R<o&&D>=0&&D<u){const V=R*u+D,w=b[K*E+N];U+=m[V]*w}}c[x]=U===2040?255:0}return c}function p(m,u,o){const b=[1,1,1,1,1,1,1,1,1],E=Math.round(Math.sqrt(b.length)),O=Math.floor(E/2),c=[];for(let s=0;s<o;s++)for(let _=0;_<u;_++){const x=s*u+_;let U=0;for(let K=0;K<E;K++)for(let N=0;N<E;N++){const R=s+K-O,D=_+N-O;if(R>=0&&R<o&&D>=0&&D<u){const V=R*u+D,w=b[K*E+N];U+=m[V]*w}}c[x]=U>=1020?255:0}return c}function y(m,u,o){const b=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],E=Math.round(Math.sqrt(b.length)),O=Math.floor(E/2),c=[];for(let s=0;s<o;s++)for(let _=0;_<u;_++){const x=s*u+_;let U=0;for(let K=0;K<E;K++)for(let N=0;N<E;N++){const R=s+K-O,D=_+N-O;if(R>=0&&R<o&&D>=0&&D<u){const V=R*u+D,w=b[K*E+N];U+=m[V]*w}}c[x]=U}return c}const T=function(m){const u=this.threshold();let o=g(m,u);return o&&(o=f(o,m.width,m.height),o=p(o,m.width,m.height),o=y(o,m.width,m.height),d(m,o)),m};return Hi.Mask=T,h.Factory.addGetterSetter(r.Node,"threshold",0,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Hi}var Li={},Oh;function t1(){if(Oh)return Li;Oh=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Noise=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=this.noise()*255,g=C.data,d=g.length,f=v/2;for(let p=0;p<d;p+=4)g[p+0]+=f-2*f*Math.random(),g[p+1]+=f-2*f*Math.random(),g[p+2]+=f-2*f*Math.random()};return Li.Noise=G,h.Factory.addGetterSetter(r.Node,"noise",.2,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),Li}var Vi={},Dh;function e1(){if(Dh)return Vi;Dh=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Pixelate=void 0;const h=Tt(),r=wt(),H=Qt(),G=xt(),C=function(v){let g=Math.ceil(this.pixelSize()),d=v.width,f=v.height,p=Math.ceil(d/g),y=Math.ceil(f/g),T=v.data;if(g<=0){r.Util.error("pixelSize value can not be <= 0");return}for(let m=0;m<p;m+=1)for(let u=0;u<y;u+=1){let o=0,b=0,E=0,O=0;const c=m*g,s=c+g,_=u*g,x=_+g;let U=0;for(let K=c;K<s;K+=1)if(!(K>=d))for(let N=_;N<x;N+=1){if(N>=f)continue;const R=(d*N+K)*4;o+=T[R+0],b+=T[R+1],E+=T[R+2],O+=T[R+3],U+=1}o=o/U,b=b/U,E=E/U,O=O/U;for(let K=c;K<s;K+=1)if(!(K>=d))for(let N=_;N<x;N+=1){if(N>=f)continue;const R=(d*N+K)*4;T[R+0]=o,T[R+1]=b,T[R+2]=E,T[R+3]=O}}};return Vi.Pixelate=C,h.Factory.addGetterSetter(H.Node,"pixelSize",8,(0,G.getNumberValidator)(),h.Factory.afterSetFilter),Vi}var qi={},Gh;function a1(){if(Gh)return qi;Gh=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Posterize=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=Math.round(this.levels()*254)+1,g=C.data,d=g.length,f=255/v;for(let p=0;p<d;p+=1)g[p]=Math.floor(g[p]/f)*f};return qi.Posterize=G,h.Factory.addGetterSetter(r.Node,"levels",.5,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),qi}var Pi={},Uh;function n1(){if(Uh)return Pi;Uh=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.RGB=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=C.data,g=v.length,d=this.red(),f=this.green(),p=this.blue();for(let y=0;y<g;y+=4){const T=(.34*v[y]+.5*v[y+1]+.16*v[y+2])/255;v[y]=T*d,v[y+1]=T*f,v[y+2]=T*p,v[y+3]=v[y+3]}};return Pi.RGB=G,h.Factory.addGetterSetter(r.Node,"red",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),h.Factory.addGetterSetter(r.Node,"green",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),h.Factory.addGetterSetter(r.Node,"blue",0,H.RGBComponent,h.Factory.afterSetFilter),Pi}var Yi={},zh;function i1(){if(zh)return Yi;zh=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.RGBA=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=C.data,g=v.length,d=this.red(),f=this.green(),p=this.blue(),y=this.alpha();for(let T=0;T<g;T+=4){const m=1-y;v[T]=d*y+v[T]*m,v[T+1]=f*y+v[T+1]*m,v[T+2]=p*y+v[T+2]*m}};return Yi.RGBA=G,h.Factory.addGetterSetter(r.Node,"red",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),h.Factory.addGetterSetter(r.Node,"green",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),h.Factory.addGetterSetter(r.Node,"blue",0,H.RGBComponent,h.Factory.afterSetFilter),h.Factory.addGetterSetter(r.Node,"alpha",1,function(C){return this._filterUpToDate=!1,C>1?1:C<0?0:C}),Yi}var Fi={},Bh;function l1(){if(Bh)return Fi;Bh=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Sepia=void 0;const h=function(r){const H=r.data,G=H.length;for(let C=0;C<G;C+=4){const v=H[C+0],g=H[C+1],d=H[C+2];H[C+0]=Math.min(255,v*.393+g*.769+d*.189),H[C+1]=Math.min(255,v*.349+g*.686+d*.168),H[C+2]=Math.min(255,v*.272+g*.534+d*.131)}};return Fi.Sepia=h,Fi}var Ki={},Hh;function s1(){if(Hh)return Ki;Hh=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Solarize=void 0;const h=function(r){const H=r.data,G=r.width,C=r.height,v=G*4;let g=C;do{const d=(g-1)*v;let f=G;do{const p=d+(f-1)*4;let y=H[p],T=H[p+1],m=H[p+2];y>127&&(y=255-y),T>127&&(T=255-T),m>127&&(m=255-m),H[p]=y,H[p+1]=T,H[p+2]=m}while(--f)}while(--g)};return Ki.Solarize=h,Ki}var wi={},Lh;function r1(){if(Lh)return wi;Lh=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Threshold=void 0;const h=Tt(),r=Qt(),H=xt(),G=function(C){const v=this.threshold()*255,g=C.data,d=g.length;for(let f=0;f<d;f+=1)g[f]=g[f]<v?0:255};return wi.Threshold=G,h.Factory.addGetterSetter(r.Node,"threshold",.5,(0,H.getNumberValidator)(),h.Factory.afterSetFilter),wi}var Vh;function o1(){if(Vh)return ii;Vh=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Konva=void 0;const h=Yr(),r=Mf(),H=Df(),G=Gf(),C=Uf(),v=zf(),g=Bf(),d=n0(),f=Xr(),p=i0(),y=Hf(),T=Lf(),m=Vf(),u=qf(),o=l0(),b=Pf(),E=Yf(),O=Ff(),c=Kf(),s=wf(),_=jf(),x=Xf(),U=Qf(),K=Zf(),N=Jf(),R=kf(),D=Wf(),V=If(),w=$f(),X=t1(),F=e1(),q=a1(),tt=n1(),S=i1(),A=l1(),z=s1(),B=r1();return ii.Konva=h.Konva.Util._assign(h.Konva,{Arc:r.Arc,Arrow:H.Arrow,Circle:G.Circle,Ellipse:C.Ellipse,Image:v.Image,Label:g.Label,Tag:g.Tag,Line:d.Line,Path:f.Path,Rect:p.Rect,RegularPolygon:y.RegularPolygon,Ring:T.Ring,Sprite:m.Sprite,Star:u.Star,Text:o.Text,TextPath:b.TextPath,Transformer:E.Transformer,Wedge:O.Wedge,Filters:{Blur:c.Blur,Brighten:s.Brighten,Contrast:_.Contrast,Emboss:x.Emboss,Enhance:U.Enhance,Grayscale:K.Grayscale,HSL:N.HSL,HSV:R.HSV,Invert:D.Invert,Kaleidoscope:V.Kaleidoscope,Mask:w.Mask,Noise:X.Noise,Pixelate:F.Pixelate,Posterize:q.Posterize,RGB:tt.RGB,RGBA:S.RGBA,Sepia:A.Sepia,Solarize:z.Solarize,Threshold:B.Threshold}}),ii}var u1=Vl.exports,qh;function c1(){if(qh)return Vl.exports;qh=1,Object.defineProperty(u1,"__esModule",{value:!0});const h=o1();return Vl.exports=h.Konva,Vl.exports}var h1=c1();const zr=Yl(h1);var Ll={exports:{}},Ph;function d1(){return Ph||(Ph=1,function(h,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Konva=void 0;var H=Yr();Object.defineProperty(r,"Konva",{enumerable:!0,get:function(){return H.Konva}});const G=Yr();h.exports=G.Konva}(Ll,Ll.exports)),Ll.exports}var f1=d1();const ql=Yl(f1);var Br={exports:{}},Hr={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function g1(){return Yh||(Yh=1,function(h){h.exports=function(r){function H(t,e,a,n){return new G0(t,e,a,n)}function G(){}function C(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(t){var e=t,a=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(a=e.return),t=e.return;while(t)}return e.tag===3?a:null}function g(t){if(v(t)!==t)throw Error(C(188))}function d(t){var e=t.alternate;if(!e){if(e=v(t),e===null)throw Error(C(188));return e!==t?null:t}for(var a=t,n=e;;){var i=a.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===a)return g(i),t;if(l===n)return g(i),e;l=l.sibling}throw Error(C(188))}if(a.return!==n.return)a=i,n=l;else{for(var M=!1,Y=i.child;Y;){if(Y===a){M=!0,a=i,n=l;break}if(Y===n){M=!0,n=i,a=l;break}Y=Y.sibling}if(!M){for(Y=l.child;Y;){if(Y===a){M=!0,a=l,n=i;break}if(Y===n){M=!0,n=l,a=i;break}Y=Y.sibling}if(!M)throw Error(C(189))}}if(a.alternate!==n)throw Error(C(190))}if(a.tag!==3)throw Error(C(188));return a.stateNode.current===a?t:e}function f(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=f(t),e!==null)return e;t=t.sibling}return null}function p(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(t.tag!==4&&(e=p(t),e!==null))return e;t=t.sibling}return null}function y(t){return t===null||typeof t!="object"?null:(t=ec&&t[ec]||t["@@iterator"],typeof t=="function"?t:null)}function T(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V0?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case an:return"Fragment";case Qs:return"Profiler";case $u:return"StrictMode";case Js:return"Suspense";case ks:return"SuspenseList";case Is:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case en:return"Portal";case Ca:return(t.displayName||"Context")+".Provider";case tc:return(t._context.displayName||"Context")+".Consumer";case Zs:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ws:return e=t.displayName||null,e!==null?e:T(t.type)||"Memo";case Ea:e=t._payload,t=t._init;try{return T(t(e))}catch{}}return null}function m(t){return{current:t}}function u(t){0>sn||(t.current=nr[sn],nr[sn]=null,sn--)}function o(t,e){sn++,nr[sn]=t.current,t.current=e}function b(t){return t>>>=0,t===0?32:31-(ef(t)/af|0)|0}function E(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function O(t,e,a){var n=t.pendingLanes;if(n===0)return 0;var i=0,l=t.suspendedLanes,M=t.pingedLanes;t=t.warmLanes;var Y=n&134217727;return Y!==0?(n=Y&~l,n!==0?i=E(n):(M&=Y,M!==0?i=E(M):a||(a=Y&~t,a!==0&&(i=E(a))))):(Y=n&~l,Y!==0?i=E(Y):M!==0?i=E(M):a||(a=n&~t,a!==0&&(i=E(a)))),i===0?0:e!==0&&e!==i&&(e&l)===0&&(l=i&-i,a=e&-e,l>=a||l===32&&(a&4194048)!==0)?e:i}function c(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function s(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _(){var t=pl;return pl<<=1,(pl&4194048)===0&&(pl=256),t}function x(){var t=yl;return yl<<=1,(yl&62914560)===0&&(yl=4194304),t}function U(t){for(var e=[],a=0;31>a;a++)e.push(t);return e}function K(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function N(t,e,a,n,i,l){var M=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var Y=t.entanglements,k=t.expirationTimes,at=t.hiddenUpdates;for(a=M&~a;0<a;){var it=31-Ge(a),ot=1<<it;Y[it]=0,k[it]=-1;var ut=at[it];if(ut!==null)for(at[it]=null,it=0;it<ut.length;it++){var _t=ut[it];_t!==null&&(_t.lane&=-536870913)}a&=~ot}n!==0&&R(t,n,0),l!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=l&~(M&~e))}function R(t,e,a){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Ge(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|a&4194090}function D(t,e){var a=t.entangledLanes|=e;for(t=t.entanglements;a;){var n=31-Ge(a),i=1<<n;i&e|t[n]&e&&(t[n]|=e),a&=~i}}function V(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function w(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function X(t){if(typeof of=="function"&&uf(t),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Qn,t)}catch{}}function F(t){if(sr===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);sr=e&&e[1]||"",Nc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sr+t+Nc}function q(t,e){if(!t||rr)return"";rr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(_t){var ut=_t}Reflect.construct(t,[],ot)}else{try{ot.call()}catch(_t){ut=_t}t.call(ot.prototype)}}else{try{throw Error()}catch(_t){ut=_t}(ot=t())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(_t){if(_t&&ut&&typeof _t.stack=="string")return[_t.stack,ut.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),M=l[0],Y=l[1];if(M&&Y){var k=M.split(`
`),at=Y.split(`
`);for(i=n=0;n<k.length&&!k[n].includes("DetermineComponentFrameRoot");)n++;for(;i<at.length&&!at[i].includes("DetermineComponentFrameRoot");)i++;if(n===k.length||i===at.length)for(n=k.length-1,i=at.length-1;1<=n&&0<=i&&k[n]!==at[i];)i--;for(;1<=n&&0<=i;n--,i--)if(k[n]!==at[i]){if(n!==1||i!==1)do if(n--,i--,0>i||k[n]!==at[i]){var it=`
`+k[n].replace(" at new "," at ");return t.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",t.displayName)),it}while(1<=n&&0<=i);break}}}finally{rr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?F(a):""}function tt(t){switch(t.tag){case 26:case 27:case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 15:return q(t.type,!1);case 11:return q(t.type.render,!1);case 1:return q(t.type,!0);case 31:return F("Activity");default:return""}}function S(t){try{var e="";do e+=tt(t),t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function A(t,e){if(typeof t=="object"&&t!==null){var a=Ac.get(t);return a!==void 0?a:(e={value:t,source:e,stack:S(e)},Ac.set(t,e),e)}return{value:t,source:e,stack:S(e)}}function z(t,e){on[un++]=Sl,on[un++]=_l,_l=t,Sl=e}function B(t,e,a){Ve[qe++]=la,Ve[qe++]=sa,Ve[qe++]=Ya,Ya=t;var n=la;t=sa;var i=32-Ge(n)-1;n&=~(1<<i),a+=1;var l=32-Ge(e)+i;if(30<l){var M=i-i%5;l=(n&(1<<M)-1).toString(32),n>>=M,i-=M,la=1<<32-Ge(e)+i|a<<i|n,sa=l+t}else la=1<<l|a<<i|n,sa=t}function P(t){t.return!==null&&(z(t,1),B(t,1,0))}function I(t){for(;t===_l;)_l=on[--un],on[un]=null,Sl=on[--un],on[un]=null;for(;t===Ya;)Ya=Ve[--qe],Ve[qe]=null,sa=Ve[--qe],Ve[qe]=null,la=Ve[--qe],Ve[qe]=null}function j(t,e){o(xa,e),o(Zn,t),o(fe,null),t=Y0(e),u(fe),o(fe,t)}function et(){u(fe),u(Zn),u(xa)}function st(t){t.memoizedState!==null&&o(bl,t);var e=fe.current,a=F0(e,t.type);e!==a&&(o(Zn,t),o(fe,a))}function $(t){Zn.current===t&&(u(fe),u(Zn)),bl.current===t&&(u(bl),na?Pa._currentValue=nn:Pa._currentValue2=nn)}function L(t){var e=Error(C(418,""));throw pt(A(e,t)),or}function J(t,e){if(!Le)throw Error(C(175));qd(t.stateNode,t.type,t.memoizedProps,e,t)||L(t)}function lt(t){for(ve=t.return;ve;)switch(ve.tag){case 5:case 13:We=!1;return;case 27:case 3:We=!0;return;default:ve=ve.return}}function rt(t){if(!Le||t!==ve)return!1;if(!Gt)return lt(t),Gt=!0,!1;var e=t.tag;if($t?e!==3&&e!==27&&(e!==5||gc(t.type)&&!ml(t.type,t.memoizedProps))&&te&&L(t):e!==3&&(e!==5||gc(t.type)&&!ml(t.type,t.memoizedProps))&&te&&L(t),lt(t),e===13){if(!Le)throw Error(C(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));te=Fd(t)}else te=$t&&e===27?Dd(t.type,te):ve?fc(t.stateNode):null;return!0}function ct(){Le&&(te=ve=null,Gt=!1)}function mt(){var t=Fa;return t!==null&&(Ce===null?Ce=t:Ce.push.apply(Ce,t),Fa=null),t}function pt(t){Fa===null?Fa=[t]:Fa.push(t)}function Ot(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}function dt(t,e,a){na?(o(Cl,e._currentValue),e._currentValue=a):(o(Cl,e._currentValue2),e._currentValue2=a)}function Lt(t){var e=Cl.current;na?t._currentValue=e:t._currentValue2=e,u(Cl)}function Dt(t,e,a){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===a)break;t=t.return}}function qt(t,e,a,n){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){var M=i.child;l=l.firstContext;t:for(;l!==null;){var Y=l;l=i;for(var k=0;k<e.length;k++)if(Y.context===e[k]){l.lanes|=a,Y=l.alternate,Y!==null&&(Y.lanes|=a),Dt(l.return,a,t),n||(M=null);break t}l=Y.next}}else if(i.tag===18){if(M=i.return,M===null)throw Error(C(341));M.lanes|=a,l=M.alternate,l!==null&&(l.lanes|=a),Dt(M,a,t),M=null}else M=i.child;if(M!==null)M.return=i;else for(M=i;M!==null;){if(M===t){M=null;break}if(i=M.sibling,i!==null){i.return=M.return,M=i;break}M=M.return}i=M}}function He(t,e,a,n){t=null;for(var i=e,l=!1;i!==null;){if(!l){if((i.flags&524288)!==0)l=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var M=i.alternate;if(M===null)throw Error(C(387));if(M=M.memoizedProps,M!==null){var Y=i.type;ze(i.pendingProps.value,M.value)||(t!==null?t.push(Y):t=[Y])}}else if(i===bl.current){if(M=i.alternate,M===null)throw Error(C(387));M.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Pa):t=[Pa])}i=i.return}t!==null&&qt(e,t,a,n),e.flags|=262144}function ue(t){for(t=t.firstContext;t!==null;){var e=t.context;if(!ze(na?e._currentValue:e._currentValue2,t.memoizedValue))return!0;t=t.next}return!1}function xe(t){Ka=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vt(t){return Ne(Ka,t)}function me(t,e){return Ka===null&&xe(t),Ne(t,e)}function Ne(t,e){var a=na?e._currentValue:e._currentValue2;if(e={context:e,memoizedValue:a,next:null},ra===null){if(t===null)throw Error(C(308));ra=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ra=ra.next=e;return a}function we(){return{controller:new cf,data:new Map,refCount:0}}function Zt(t){t.refCount--,t.refCount===0&&hf(df,function(){t.controller.abort()})}function It(t){t!==cn&&t.next===null&&(cn===null?El=cn=t:cn=cn.next=t),Tl=!0,ur||(ur=!0,Ja())}function ne(t,e){if(!cr&&Tl){cr=!0;do for(var a=!1,n=El;n!==null;){if(t!==0){var i=n.pendingLanes;if(i===0)var l=0;else{var M=n.suspendedLanes,Y=n.pingedLanes;l=(1<<31-Ge(42|t)+1)-1,l&=i&~(M&~Y),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(a=!0,Mn(n,l))}else l=At,l=O(n,n===Vt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==qa),(l&3)===0||c(n,l)||(a=!0,Mn(n,l));n=n.next}while(a);cr=!1}}function Ae(){ce()}function ce(){Tl=ur=!1;var t=0;hn!==0&&(W0()&&(t=hn),hn=0);for(var e=Qe(),a=null,n=El;n!==null;){var i=n.next,l=he(n,e);l===0?(n.next=null,a===null?El=i:a.next=i,i===null&&(cn=a)):(a=n,(t!==0||(l&3)!==0)&&(Tl=!0)),n=i}ne(t)}function he(t,e){for(var a=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,l=t.pendingLanes&-62914561;0<l;){var M=31-Ge(l),Y=1<<M,k=i[M];k===-1?((Y&a)===0||(Y&n)!==0)&&(i[M]=s(Y,e)):k<=e&&(t.expiredLanes|=Y),l&=~Y}if(e=Vt,a=At,a=O(t,t===e?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==qa),n=t.callbackNode,a===0||t===e&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&ir(n),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||c(t,a)){if(e=a&-a,e===t.callbackPriority)return e;switch(n!==null&&ir(n),w(a)){case 2:case 8:a=sf;break;case 32:a=lr;break;case 268435456:a=rf;break;default:a=lr}return n=fa.bind(null,t),a=vl(a,n),t.callbackPriority=e,t.callbackNode=a,e}return n!==null&&n!==null&&ir(n),t.callbackPriority=2,t.callbackNode=null,2}function fa(t,e){if(ge!==0&&ge!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Kn()&&t.callbackNode!==a)return null;var n=At;return n=O(t,t===Vt?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==qa),n===0?null:(Mu(t,n,e),he(t,Qe()),t.callbackNode!=null&&t.callbackNode===a?fa.bind(null,t):null)}function Mn(t,e){if(Kn())return null;Mu(t,e,!0)}function Ja(){nd?id(function(){(Nt&6)!==0?vl(xc,Ae):ce()}):vl(xc,Ae)}function On(){return hn===0&&(hn=_()),hn}function Xl(t,e){if(Jn===null){var a=Jn=[];hr=0,dn=On(),fn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return hr++,e.then(Zr,Zr),e}function Zr(){if(--hr===0&&Jn!==null){fn!==null&&(fn.status="fulfilled");var t=Jn;Jn=null,dn=0,fn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function d0(t,e){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var i=0;i<a.length;i++)(0,a[i])(e)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}function Ql(){var t=wa.current;return t!==null?t:Vt.pooledCache}function ji(t,e){e===null?o(wa,wa.current):o(wa,e.pool)}function Jr(){var t=Ql();return t===null?null:{parent:na?Ft._currentValue:Ft._currentValue2,pool:t}}function Xi(t,e){if(ze(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!ff.call(e,i)||!ze(t[i],e[i]))return!1}return!0}function kr(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qi(){}function Wr(t,e,a){switch(a=t[a],a===void 0?t.push(e):a!==e&&(e.then(Qi,Qi),e=a),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$r(t),t;default:if(typeof e.status=="string")e.then(Qi,Qi);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(C(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=n}},function(n){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$r(t),t}throw gn=e,kn}}function Ir(){if(gn===null)throw Error(C(459));var t=gn;return gn=null,t}function $r(t){if(t===kn||t===xl)throw Error(C(483))}function Zi(){for(var t=mn,e=fr=mn=0;e<t;){var a=Pe[e];Pe[e++]=null;var n=Pe[e];Pe[e++]=null;var i=Pe[e];Pe[e++]=null;var l=Pe[e];if(Pe[e++]=null,n!==null&&i!==null){var M=n.pending;M===null?i.next=i:(i.next=M.next,M.next=i),n.pending=i}l!==0&&to(a,i,l)}}function Ji(t,e,a,n){Pe[mn++]=t,Pe[mn++]=e,Pe[mn++]=a,Pe[mn++]=n,fr|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function Zl(t,e,a,n){return Ji(t,e,a,n),ki(t)}function ka(t,e){return Ji(t,null,null,e),ki(t)}function to(t,e,a){t.lanes|=a;var n=t.alternate;n!==null&&(n.lanes|=a);for(var i=!1,l=t.return;l!==null;)l.childLanes|=a,n=l.alternate,n!==null&&(n.childLanes|=a),l.tag===22&&(t=l.stateNode,t===null||t._visibility&1||(i=!0)),t=l,l=l.return;return t.tag===3?(l=t.stateNode,i&&e!==null&&(i=31-Ge(a),t=l.hiddenUpdates,n=t[i],n===null?t[i]=[e]:n.push(e),e.lane=a|536870912),l):null}function ki(t){if(50<ai)throw ai=0,Tr=null,Error(C(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}function Jl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ga(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ma(t,e,a){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(Nt&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,e=ki(t),to(t,null,a),e}return Ji(t,n,e,a),ki(t)}function Dn(t,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,D(t,a)}}function Wl(t,e){var a=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,l=null;if(a=a.firstBaseUpdate,a!==null){do{var M={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};l===null?i=l=M:l=l.next=M,a=a.next}while(a!==null);l===null?i=l=e:l=l.next=e}else i=l=e;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=e:t.next=e,a.lastBaseUpdate=e}function Gn(){if(gr){var t=fn;if(t!==null)throw t}}function Un(t,e,a,n){gr=!1;var i=t.updateQueue;Na=!1;var l=i.firstBaseUpdate,M=i.lastBaseUpdate,Y=i.shared.pending;if(Y!==null){i.shared.pending=null;var k=Y,at=k.next;k.next=null,M===null?l=at:M.next=at,M=k;var it=t.alternate;it!==null&&(it=it.updateQueue,Y=it.lastBaseUpdate,Y!==M&&(Y===null?it.firstBaseUpdate=at:Y.next=at,it.lastBaseUpdate=k))}if(l!==null){var ot=i.baseState;M=0,it=at=k=null,Y=l;do{var ut=Y.lane&-536870913,_t=ut!==Y.lane;if(_t?(At&ut)===ut:(n&ut)===ut){ut!==0&&ut===dn&&(gr=!0),it!==null&&(it=it.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});t:{var Ke=t,ni=Y;ut=e;var Qa=a;switch(ni.tag){case 1:if(Ke=ni.payload,typeof Ke=="function"){ot=Ke.call(Qa,ot,ut);break t}ot=Ke;break t;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=ni.payload,ut=typeof Ke=="function"?Ke.call(Qa,ot,ut):Ke,ut==null)break t;ot=Xs({},ot,ut);break t;case 2:Na=!0}}ut=Y.callback,ut!==null&&(t.flags|=64,_t&&(t.flags|=8192),_t=i.callbacks,_t===null?i.callbacks=[ut]:_t.push(ut))}else _t={lane:ut,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},it===null?(at=it=_t,k=ot):it=it.next=_t,M|=ut;if(Y=Y.next,Y===null){if(Y=i.shared.pending,Y===null)break;_t=Y,Y=_t.next,_t.next=null,i.lastBaseUpdate=_t,i.shared.pending=null}}while(!0);it===null&&(k=ot),i.baseState=k,i.firstBaseUpdate=at,i.lastBaseUpdate=it,l===null&&(i.shared.lanes=0),Ma|=M,t.lanes=M,t.memoizedState=ot}}function eo(t,e){if(typeof t!="function")throw Error(C(191,t));t.call(e)}function ao(t,e){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)eo(a[t],e)}function no(t,e){t=ua,o(Al,t),o(pn,e),ua=t|e.baseLanes}function Il(){o(Al,ua),o(pn,pn.current)}function $l(){ua=Al.current,u(pn),u(Al)}function jt(){throw Error(C(321))}function ts(t,e){if(e===null)return!1;for(var a=0;a<e.length&&a<t.length;a++)if(!ze(t[a],e[a]))return!1;return!0}function es(t,e,a,n,i,l){return Aa=l,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ft.H=t===null||t.memoizedState===null?Mc:Oc,ja=!1,l=a(n,i),ja=!1,yn&&(l=lo(e,a,n,i)),io(t),l}function io(t){ft.H=Ol;var e=Ht!==null&&Ht.next!==null;if(Aa=0,kt=Ht=St=null,Rl=!1,Wn=0,vn=null,e)throw Error(C(300));t===null||le||(t=t.dependencies,t!==null&&ue(t)&&(le=!0))}function lo(t,e,a,n){St=t;var i=0;do{if(yn&&(vn=null),Wn=0,yn=!1,25<=i)throw Error(C(301));if(i+=1,kt=Ht=null,t.updateQueue!=null){var l=t.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}ft.H=mf,l=e(a,n)}while(yn);return l}function f0(){var t=ft.H,e=t.useState()[0];return e=typeof e.then=="function"?zn(e):e,t=t.useState()[0],(Ht!==null?Ht.memoizedState:null)!==t&&(St.flags|=1024),e}function as(){var t=Ml!==0;return Ml=0,t}function ns(t,e,a){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a}function is(t){if(Rl){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Rl=!1}Aa=0,kt=Ht=St=null,yn=!1,Wn=Ml=0,vn=null}function _e(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?St.memoizedState=kt=t:kt=kt.next=t,kt}function Jt(){if(Ht===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=kt===null?St.memoizedState:kt.next;if(e!==null)kt=e,Ht=t;else{if(t===null)throw St.alternate===null?Error(C(467)):Error(C(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},kt===null?St.memoizedState=kt=t:kt=kt.next=t}return kt}function ls(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zn(t){var e=Wn;return Wn+=1,vn===null&&(vn=[]),t=Wr(vn,t,e),e=St,(kt===null?e.memoizedState:kt.next)===null&&(e=e.alternate,ft.H=e===null||e.memoizedState===null?Mc:Oc),t}function Wi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zn(t);if(t.$$typeof===Ca)return vt(t)}throw Error(C(438,String(t)))}function ss(t){var e=null,a=St.updateQueue;if(a!==null&&(e=a.memoCache),e==null){var n=St.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),a===null&&(a=ls(),St.updateQueue=a),a.memoCache=e,a=e.data[e.index],a===void 0)for(a=e.data[e.index]=Array(t),n=0;n<t;n++)a[n]=L0;return e.index++,a}function $e(t,e){return typeof e=="function"?e(t):e}function Ii(t){var e=Jt();return rs(e,Ht,t)}function rs(t,e,a){var n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=a;var i=t.baseQueue,l=n.pending;if(l!==null){if(i!==null){var M=i.next;i.next=l.next,l.next=M}e.baseQueue=i=l,n.pending=null}if(l=t.baseState,i===null)t.memoizedState=l;else{e=i.next;var Y=M=null,k=null,at=e,it=!1;do{var ot=at.lane&-536870913;if(ot!==at.lane?(At&ot)===ot:(Aa&ot)===ot){var ut=at.revertLane;if(ut===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),ot===dn&&(it=!0);else if((Aa&ut)===ut){at=at.next,ut===dn&&(it=!0);continue}else ot={lane:0,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},k===null?(Y=k=ot,M=l):k=k.next=ot,St.lanes|=ut,Ma|=ut;ot=at.action,ja&&a(l,ot),l=at.hasEagerState?at.eagerState:a(l,ot)}else ut={lane:ot,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},k===null?(Y=k=ut,M=l):k=k.next=ut,St.lanes|=ot,Ma|=ot;at=at.next}while(at!==null&&at!==e);if(k===null?M=l:k.next=Y,!ze(l,t.memoizedState)&&(le=!0,it&&(a=fn,a!==null)))throw a;t.memoizedState=l,t.baseState=M,t.baseQueue=k,n.lastRenderedState=l}return i===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function os(t){var e=Jt(),a=e.queue;if(a===null)throw Error(C(311));a.lastRenderedReducer=t;var n=a.dispatch,i=a.pending,l=e.memoizedState;if(i!==null){a.pending=null;var M=i=i.next;do l=t(l,M.action),M=M.next;while(M!==i);ze(l,e.memoizedState)||(le=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),a.lastRenderedState=l}return[l,n]}function so(t,e,a){var n=St,i=Jt(),l=Gt;if(l){if(a===void 0)throw Error(C(407));a=a()}else a=e();var M=!ze((Ht||i).memoizedState,a);M&&(i.memoizedState=a,le=!0),i=i.queue;var Y=uo.bind(null,n,i,t);if(Bn(2048,8,Y,[t]),i.getSnapshot!==e||M||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Wa(9,$i(),oo.bind(null,n,i,a,e),null),Vt===null)throw Error(C(349));l||(Aa&124)!==0||ro(n,e,a)}return a}function ro(t,e,a){t.flags|=16384,t={getSnapshot:e,value:a},e=St.updateQueue,e===null?(e=ls(),St.updateQueue=e,e.stores=[t]):(a=e.stores,a===null?e.stores=[t]:a.push(t))}function oo(t,e,a,n){e.value=a,e.getSnapshot=n,co(e)&&ho(t)}function uo(t,e,a){return a(function(){co(e)&&ho(t)})}function co(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!ze(t,a)}catch{return!0}}function ho(t){var e=ka(t,2);e!==null&&Oe(e,t,2)}function us(t){var e=_e();if(typeof t=="function"){var a=t;if(t=a(),ja){X(!0);try{a()}finally{X(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:t},e}function fo(t,e,a,n){return t.baseState=a,rs(t,Ht,typeof n=="function"?n:$e)}function g0(t,e,a,n,i){if(el(t))throw Error(C(485));if(t=e.action,t!==null){var l={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){l.listeners.push(M)}};ft.T!==null?a(!0):l.isTransition=!1,n(l),a=e.pending,a===null?(l.next=e.pending=l,go(e,l)):(l.next=a.next,e.pending=a.next=l)}}function go(t,e){var a=e.action,n=e.payload,i=t.state;if(e.isTransition){var l=ft.T,M={};ft.T=M;try{var Y=a(i,n),k=ft.S;k!==null&&k(M,Y),mo(t,e,Y)}catch(at){cs(t,e,at)}finally{ft.T=l}}else try{l=a(i,n),mo(t,e,l)}catch(at){cs(t,e,at)}}function mo(t,e,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){po(t,e,n)},function(n){return cs(t,e,n)}):po(t,e,a)}function po(t,e,a){e.status="fulfilled",e.value=a,yo(e),t.state=a,e=t.pending,e!==null&&(a=e.next,a===e?t.pending=null:(a=a.next,e.next=a,go(t,a)))}function cs(t,e,a){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=a,yo(e),e=e.next;while(e!==n)}t.action=null}function yo(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function vo(t,e){return e}function _o(t,e){if(Gt){var a=Vt.formState;if(a!==null){t:{var n=St;if(Gt){if(te){var i=Md(te,We);if(i){te=fc(i),n=Od(i);break t}}L(n)}n=!1}n&&(e=a[0])}}a=_e(),a.memoizedState=a.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:e},a.queue=n,a=Lo.bind(null,St,n),n.dispatch=a,n=us(!1);var l=gs.bind(null,St,!1,n.queue);return n=_e(),i={state:e,dispatch:null,action:t,pending:null},n.queue=i,a=g0.bind(null,St,i,l,a),i.dispatch=a,n.memoizedState=t,[e,a,!1]}function So(t){var e=Jt();return bo(e,Ht,t)}function bo(t,e,a){if(e=rs(t,e,vo)[0],t=Ii($e)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=zn(e)}catch(M){throw M===kn?xl:M}else n=e;e=Jt();var i=e.queue,l=i.dispatch;return a!==e.memoizedState&&(St.flags|=2048,Wa(9,$i(),m0.bind(null,i,a),null)),[n,l,t]}function m0(t,e){t.action=e}function Co(t){var e=Jt(),a=Ht;if(a!==null)return bo(e,a,t);Jt(),e=e.memoizedState,a=Jt();var n=a.queue.dispatch;return a.memoizedState=t,[e,n,!1]}function Wa(t,e,a,n){return t={tag:t,create:a,deps:n,inst:e,next:null},e=St.updateQueue,e===null&&(e=ls(),St.updateQueue=e),a=e.lastEffect,a===null?e.lastEffect=t.next=t:(n=a.next,a.next=t,t.next=n,e.lastEffect=t),t}function $i(){return{destroy:void 0,resource:void 0}}function Eo(){return Jt().memoizedState}function tl(t,e,a,n){var i=_e();n=n===void 0?null:n,St.flags|=t,i.memoizedState=Wa(1|e,$i(),a,n)}function Bn(t,e,a,n){var i=Jt();n=n===void 0?null:n;var l=i.memoizedState.inst;Ht!==null&&n!==null&&ts(n,Ht.memoizedState.deps)?i.memoizedState=Wa(e,l,a,n):(St.flags|=t,i.memoizedState=Wa(1|e,l,a,n))}function To(t,e){tl(8390656,8,t,e)}function xo(t,e){Bn(2048,8,t,e)}function No(t,e){return Bn(4,2,t,e)}function Ao(t,e){return Bn(4,4,t,e)}function Ro(t,e){if(typeof e=="function"){t=t();var a=e(t);return function(){typeof a=="function"?a():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Mo(t,e,a){a=a!=null?a.concat([t]):null,Bn(4,4,Ro.bind(null,e,t),a)}function hs(){}function Oo(t,e){var a=Jt();e=e===void 0?null:e;var n=a.memoizedState;return e!==null&&ts(e,n[1])?n[0]:(a.memoizedState=[t,e],t)}function Do(t,e){var a=Jt();e=e===void 0?null:e;var n=a.memoizedState;if(e!==null&&ts(e,n[1]))return n[0];if(n=t(),ja){X(!0);try{t()}finally{X(!1)}}return a.memoizedState=[n,e],n}function ds(t,e,a){return a===void 0||(Aa&1073741824)!==0?t.memoizedState=e:(t.memoizedState=a,t=Ru(),St.lanes|=t,Ma|=t,a)}function Go(t,e,a,n){return ze(a,e)?a:pn.current!==null?(t=ds(t,a,n),ze(t,e)||(le=!0),t):(Aa&42)===0?(le=!0,t.memoizedState=a):(t=Ru(),St.lanes|=t,Ma|=t,e)}function Uo(t,e,a,n,i){var l=ia();ie(l!==0&&8>l?l:8);var M=ft.T,Y={};ft.T=Y,gs(t,!1,e,a);try{var k=i(),at=ft.S;if(at!==null&&at(Y,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var it=d0(k,n);Hn(t,e,it,Me(t))}else Hn(t,e,n,Me(t))}catch(ot){Hn(t,e,{then:function(){},status:"rejected",reason:ot},Me())}finally{ie(l),ft.T=M}}function zo(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:nn,baseState:nn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:nn},next:null};var a={};return e.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:a},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function fs(){return vt(Pa)}function Bo(){return Jt().memoizedState}function Ho(){return Jt().memoizedState}function p0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var a=Me();t=ga(a);var n=ma(e,t,a);n!==null&&(Oe(n,e,a),Dn(n,e,a)),e={cache:we()},t.payload=e;return}e=e.return}}function y0(t,e,a){var n=Me();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},el(t)?Vo(e,a):(a=Zl(t,e,a,n),a!==null&&(Oe(a,t,n),qo(a,e,n)))}function Lo(t,e,a){var n=Me();Hn(t,e,a,n)}function Hn(t,e,a,n){var i={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(el(t))Vo(e,i);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var M=e.lastRenderedState,Y=l(M,a);if(i.hasEagerState=!0,i.eagerState=Y,ze(Y,M))return Ji(t,e,i,0),Vt===null&&Zi(),!1}catch{}finally{}if(a=Zl(t,e,i,n),a!==null)return Oe(a,t,n),qo(a,e,n),!0}return!1}function gs(t,e,a,n){if(n={lane:2,revertLane:On(),action:n,hasEagerState:!1,eagerState:null,next:null},el(t)){if(e)throw Error(C(479))}else e=Zl(t,a,n,2),e!==null&&Oe(e,t,2)}function el(t){var e=t.alternate;return t===St||e!==null&&e===St}function Vo(t,e){yn=Rl=!0;var a=t.pending;a===null?e.next=e:(e.next=a.next,a.next=e),t.pending=e}function qo(t,e,a){if((a&4194048)!==0){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,D(t,a)}}function al(t){var e=In;return In+=1,_n===null&&(_n=[]),Wr(_n,t,e)}function Ln(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function nl(t,e){throw e.$$typeof===B0?Error(C(525)):(t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Po(t){var e=t._init;return e(t._payload)}function Yo(t){function e(Z,Q){if(t){var W=Z.deletions;W===null?(Z.deletions=[Q],Z.flags|=16):W.push(Q)}}function a(Z,Q){if(!t)return null;for(;Q!==null;)e(Z,Q),Q=Q.sibling;return null}function n(Z){for(var Q=new Map;Z!==null;)Z.key!==null?Q.set(Z.key,Z):Q.set(Z.index,Z),Z=Z.sibling;return Q}function i(Z,Q){return Z=aa(Z,Q),Z.index=0,Z.sibling=null,Z}function l(Z,Q,W){return Z.index=W,t?(W=Z.alternate,W!==null?(W=W.index,W<Q?(Z.flags|=67108866,Q):W):(Z.flags|=67108866,Q)):(Z.flags|=1048576,Q)}function M(Z){return t&&Z.alternate===null&&(Z.flags|=67108866),Z}function Y(Z,Q,W,nt){return Q===null||Q.tag!==6?(Q=Ks(W,Z.mode,nt),Q.return=Z,Q):(Q=i(Q,W),Q.return=Z,Q)}function k(Z,Q,W,nt){var ht=W.type;return ht===an?it(Z,Q,W.props.children,nt,W.key):Q!==null&&(Q.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Ea&&Po(ht)===Q.type)?(Q=i(Q,W.props),Ln(Q,W),Q.return=Z,Q):(Q=dl(W.type,W.key,W.props,null,Z.mode,nt),Ln(Q,W),Q.return=Z,Q)}function at(Z,Q,W,nt){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==W.containerInfo||Q.stateNode.implementation!==W.implementation?(Q=ws(W,Z.mode,nt),Q.return=Z,Q):(Q=i(Q,W.children||[]),Q.return=Z,Q)}function it(Z,Q,W,nt,ht){return Q===null||Q.tag!==7?(Q=Va(W,Z.mode,nt,ht),Q.return=Z,Q):(Q=i(Q,W),Q.return=Z,Q)}function ot(Z,Q,W){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Ks(""+Q,Z.mode,W),Q.return=Z,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case fl:return W=dl(Q.type,Q.key,Q.props,null,Z.mode,W),Ln(W,Q),W.return=Z,W;case en:return Q=ws(Q,Z.mode,W),Q.return=Z,Q;case Ea:var nt=Q._init;return Q=nt(Q._payload),ot(Z,Q,W)}if(gl(Q)||y(Q))return Q=Va(Q,Z.mode,W,null),Q.return=Z,Q;if(typeof Q.then=="function")return ot(Z,al(Q),W);if(Q.$$typeof===Ca)return ot(Z,me(Z,Q),W);nl(Z,Q)}return null}function ut(Z,Q,W,nt){var ht=Q!==null?Q.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ht!==null?null:Y(Z,Q,""+W,nt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case fl:return W.key===ht?k(Z,Q,W,nt):null;case en:return W.key===ht?at(Z,Q,W,nt):null;case Ea:return ht=W._init,W=ht(W._payload),ut(Z,Q,W,nt)}if(gl(W)||y(W))return ht!==null?null:it(Z,Q,W,nt,null);if(typeof W.then=="function")return ut(Z,Q,al(W),nt);if(W.$$typeof===Ca)return ut(Z,Q,me(Z,W),nt);nl(Z,W)}return null}function _t(Z,Q,W,nt,ht){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Z=Z.get(W)||null,Y(Q,Z,""+nt,ht);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case fl:return Z=Z.get(nt.key===null?W:nt.key)||null,k(Q,Z,nt,ht);case en:return Z=Z.get(nt.key===null?W:nt.key)||null,at(Q,Z,nt,ht);case Ea:var Pt=nt._init;return nt=Pt(nt._payload),_t(Z,Q,W,nt,ht)}if(gl(nt)||y(nt))return Z=Z.get(W)||null,it(Q,Z,nt,ht,null);if(typeof nt.then=="function")return _t(Z,Q,W,al(nt),ht);if(nt.$$typeof===Ca)return _t(Z,Q,W,me(Q,nt),ht);nl(Q,nt)}return null}function Ke(Z,Q,W,nt){for(var ht=null,Pt=null,gt=Q,Rt=Q=0,re=null;gt!==null&&Rt<W.length;Rt++){gt.index>Rt?(re=gt,gt=null):re=gt.sibling;var Mt=ut(Z,gt,W[Rt],nt);if(Mt===null){gt===null&&(gt=re);break}t&&gt&&Mt.alternate===null&&e(Z,gt),Q=l(Mt,Q,Rt),Pt===null?ht=Mt:Pt.sibling=Mt,Pt=Mt,gt=re}if(Rt===W.length)return a(Z,gt),Gt&&z(Z,Rt),ht;if(gt===null){for(;Rt<W.length;Rt++)gt=ot(Z,W[Rt],nt),gt!==null&&(Q=l(gt,Q,Rt),Pt===null?ht=gt:Pt.sibling=gt,Pt=gt);return Gt&&z(Z,Rt),ht}for(gt=n(gt);Rt<W.length;Rt++)re=_t(gt,Z,Rt,W[Rt],nt),re!==null&&(t&&re.alternate!==null&&gt.delete(re.key===null?Rt:re.key),Q=l(re,Q,Rt),Pt===null?ht=re:Pt.sibling=re,Pt=re);return t&&gt.forEach(function(Ga){return e(Z,Ga)}),Gt&&z(Z,Rt),ht}function ni(Z,Q,W,nt){if(W==null)throw Error(C(151));for(var ht=null,Pt=null,gt=Q,Rt=Q=0,re=null,Mt=W.next();gt!==null&&!Mt.done;Rt++,Mt=W.next()){gt.index>Rt?(re=gt,gt=null):re=gt.sibling;var Ga=ut(Z,gt,Mt.value,nt);if(Ga===null){gt===null&&(gt=re);break}t&&gt&&Ga.alternate===null&&e(Z,gt),Q=l(Ga,Q,Rt),Pt===null?ht=Ga:Pt.sibling=Ga,Pt=Ga,gt=re}if(Mt.done)return a(Z,gt),Gt&&z(Z,Rt),ht;if(gt===null){for(;!Mt.done;Rt++,Mt=W.next())Mt=ot(Z,Mt.value,nt),Mt!==null&&(Q=l(Mt,Q,Rt),Pt===null?ht=Mt:Pt.sibling=Mt,Pt=Mt);return Gt&&z(Z,Rt),ht}for(gt=n(gt);!Mt.done;Rt++,Mt=W.next())Mt=_t(gt,Z,Rt,Mt.value,nt),Mt!==null&&(t&&Mt.alternate!==null&&gt.delete(Mt.key===null?Rt:Mt.key),Q=l(Mt,Q,Rt),Pt===null?ht=Mt:Pt.sibling=Mt,Pt=Mt);return t&&gt.forEach(function(vf){return e(Z,vf)}),Gt&&z(Z,Rt),ht}function Qa(Z,Q,W,nt){if(typeof W=="object"&&W!==null&&W.type===an&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case fl:t:{for(var ht=W.key;Q!==null;){if(Q.key===ht){if(ht=W.type,ht===an){if(Q.tag===7){a(Z,Q.sibling),nt=i(Q,W.props.children),nt.return=Z,Z=nt;break t}}else if(Q.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Ea&&Po(ht)===Q.type){a(Z,Q.sibling),nt=i(Q,W.props),Ln(nt,W),nt.return=Z,Z=nt;break t}a(Z,Q);break}else e(Z,Q);Q=Q.sibling}W.type===an?(nt=Va(W.props.children,Z.mode,nt,W.key),nt.return=Z,Z=nt):(nt=dl(W.type,W.key,W.props,null,Z.mode,nt),Ln(nt,W),nt.return=Z,Z=nt)}return M(Z);case en:t:{for(ht=W.key;Q!==null;){if(Q.key===ht)if(Q.tag===4&&Q.stateNode.containerInfo===W.containerInfo&&Q.stateNode.implementation===W.implementation){a(Z,Q.sibling),nt=i(Q,W.children||[]),nt.return=Z,Z=nt;break t}else{a(Z,Q);break}else e(Z,Q);Q=Q.sibling}nt=ws(W,Z.mode,nt),nt.return=Z,Z=nt}return M(Z);case Ea:return ht=W._init,W=ht(W._payload),Qa(Z,Q,W,nt)}if(gl(W))return Ke(Z,Q,W,nt);if(y(W)){if(ht=y(W),typeof ht!="function")throw Error(C(150));return W=ht.call(W),ni(Z,Q,W,nt)}if(typeof W.then=="function")return Qa(Z,Q,al(W),nt);if(W.$$typeof===Ca)return Qa(Z,Q,me(Z,W),nt);nl(Z,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,Q!==null&&Q.tag===6?(a(Z,Q.sibling),nt=i(Q,W),nt.return=Z,Z=nt):(a(Z,Q),nt=Ks(W,Z.mode,nt),nt.return=Z,Z=nt),M(Z)):a(Z,Q)}return function(Z,Q,W,nt){try{In=0;var ht=Qa(Z,Q,W,nt);return _n=null,ht}catch(gt){if(gt===kn||gt===xl)throw gt;var Pt=H(29,gt,null,Z.mode);return Pt.lanes=nt,Pt.return=Z,Pt}finally{}}}function pa(t){var e=t.alternate;o(ee,ee.current&1),o(Ye,t),Ie===null&&(e===null||pn.current!==null||e.memoizedState!==null)&&(Ie=t)}function Fo(t){if(t.tag===22){if(o(ee,ee.current),o(Ye,t),Ie===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ie=t)}}else ya()}function ya(){o(ee,ee.current),o(Ye,Ye.current)}function ta(t){u(Ye),Ie===t&&(Ie=null),u(ee)}function il(t){for(var e=t;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tr(a)||er(a)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ms(t,e,a,n){e=t.memoizedState,a=a(n,e),a=a==null?e:Xs({},e,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}function Ko(t,e,a,n,i,l,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,M):e.prototype&&e.prototype.isPureReactComponent?!Xi(a,n)||!Xi(i,l):!0}function wo(t,e,a,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,n),e.state!==t&&mr.enqueueReplaceState(e,e.state,null)}function Ba(t,e){var a=e;if("ref"in e){a={};for(var n in e)n!=="ref"&&(a[n]=e[n])}if(t=t.defaultProps){a===e&&(a=Xs({},a));for(var i in t)a[i]===void 0&&(a[i]=t[i])}return a}function ll(t,e){try{var a=t.onUncaughtError;a(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function jo(t,e,a){try{var n=t.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ps(t,e,a){return a=ga(a),a.tag=3,a.payload={element:null},a.callback=function(){ll(t,e)},a}function Xo(t){return t=ga(t),t.tag=3,t}function Qo(t,e,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var l=n.value;t.payload=function(){return i(l)},t.callback=function(){jo(e,a,n)}}var M=a.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(t.callback=function(){jo(e,a,n),typeof i!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var Y=n.stack;this.componentDidCatch(n.value,{componentStack:Y!==null?Y:""})})}function v0(t,e,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=a.alternate,e!==null&&He(e,a,i,!0),a=Ye.current,a!==null){switch(a.tag){case 13:return Ie===null?qs():a.alternate===null&&Kt===0&&(Kt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===Nl?a.flags|=16384:(e=a.updateQueue,e===null?a.updateQueue=new Set([n]):e.add(n),Ys(t,n,i)),!1;case 22:return a.flags|=65536,n===Nl?a.flags|=16384:(e=a.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=e):(a=e.retryQueue,a===null?e.retryQueue=new Set([n]):a.add(n)),Ys(t,n,i)),!1}throw Error(C(435,a.tag))}return Ys(t,n,i),qs(),!1}if(Gt)return e=Ye.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=i,n!==or&&(t=Error(C(422),{cause:n}),pt(A(t,a)))):(n!==or&&(e=Error(C(423),{cause:n}),pt(A(e,a))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,n=A(n,a),i=ps(t.stateNode,n,i),Wl(t,i),Kt!==4&&(Kt=2)),!1;var l=Error(C(520),{cause:n});if(l=A(l,a),ti===null?ti=[l]:ti.push(l),Kt!==4&&(Kt=2),e===null)return!0;n=A(n,a),a=e;do{switch(a.tag){case 3:return a.flags|=65536,t=i&-i,a.lanes|=t,t=ps(a.stateNode,n,t),Wl(a,t),!1;case 1:if(e=a.type,l=a.stateNode,(a.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Oa===null||!Oa.has(l))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Xo(i),Qo(i,t,a,n),Wl(a,i),!1}a=a.return}while(a!==null);return!1}function de(t,e,a,n){e.child=t===null?Dc(e,null,a,n):Sn(e,t.child,a,n)}function Zo(t,e,a,n,i){a=a.render;var l=e.ref;if("ref"in n){var M={};for(var Y in n)Y!=="ref"&&(M[Y]=n[Y])}else M=n;return xe(e),n=es(t,e,a,M,l,i),Y=as(),t!==null&&!le?(ns(t,e,i),ea(t,e,i)):(Gt&&Y&&P(e),e.flags|=1,de(t,e,n,i),e.child)}function Jo(t,e,a,n,i){if(t===null){var l=a.type;return typeof l=="function"&&!Fs(l)&&l.defaultProps===void 0&&a.compare===null?(e.tag=15,e.type=l,ko(t,e,l,n,i)):(t=dl(a.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!Es(t,i)){var M=l.memoizedProps;if(a=a.compare,a=a!==null?a:Xi,a(M,n)&&t.ref===e.ref)return ea(t,e,i)}return e.flags|=1,t=aa(l,n),t.ref=e.ref,t.return=e,e.child=t}function ko(t,e,a,n,i){if(t!==null){var l=t.memoizedProps;if(Xi(l,n)&&t.ref===e.ref)if(le=!1,e.pendingProps=n=l,Es(t,i))(t.flags&131072)!==0&&(le=!0);else return e.lanes=t.lanes,ea(t,e,i)}return ys(t,e,a,n,i)}function Wo(t,e,a){var n=e.pendingProps,i=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden"){if((e.flags&128)!==0){if(n=l!==null?l.baseLanes|a:a,t!==null){for(i=e.child=t.child,l=0;i!==null;)l=l|i.lanes|i.childLanes,i=i.sibling;e.childLanes=l&~n}else e.childLanes=0,e.child=null;return Io(t,e,n,a)}if((a&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ji(e,l!==null?l.cachePool:null),l!==null?no(e,l):Il(),Fo(e);else return e.lanes=e.childLanes=536870912,Io(t,e,l!==null?l.baseLanes|a:a,a)}else l!==null?(ji(e,l.cachePool),no(e,l),ya(),e.memoizedState=null):(t!==null&&ji(e,null),Il(),ya());return de(t,e,i,a),e.child}function Io(t,e,a,n){var i=Ql();return i=i===null?null:{parent:na?Ft._currentValue:Ft._currentValue2,pool:i},e.memoizedState={baseLanes:a,cachePool:i},t!==null&&ji(e,null),Il(),Fo(e),t!==null&&He(t,e,n,!0),null}function sl(t,e){var a=e.ref;if(a===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(C(284));(t===null||t.ref!==a)&&(e.flags|=4194816)}}function ys(t,e,a,n,i){return xe(e),a=es(t,e,a,n,void 0,i),n=as(),t!==null&&!le?(ns(t,e,i),ea(t,e,i)):(Gt&&n&&P(e),e.flags|=1,de(t,e,a,i),e.child)}function $o(t,e,a,n,i,l){return xe(e),e.updateQueue=null,a=lo(e,n,a,i),io(t),n=as(),t!==null&&!le?(ns(t,e,l),ea(t,e,l)):(Gt&&n&&P(e),e.flags|=1,de(t,e,a,l),e.child)}function tu(t,e,a,n,i){if(xe(e),e.stateNode===null){var l=rn,M=a.contextType;typeof M=="object"&&M!==null&&(l=vt(M)),l=new a(n,l),e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=mr,e.stateNode=l,l._reactInternals=e,l=e.stateNode,l.props=n,l.state=e.memoizedState,l.refs={},Jl(e),M=a.contextType,l.context=typeof M=="object"&&M!==null?vt(M):rn,l.state=e.memoizedState,M=a.getDerivedStateFromProps,typeof M=="function"&&(ms(e,a,M,n),l.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(M=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),M!==l.state&&mr.enqueueReplaceState(l,l.state,null),Un(e,n,l,i),Gn(),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){l=e.stateNode;var Y=e.memoizedProps,k=Ba(a,Y);l.props=k;var at=l.context,it=a.contextType;M=rn,typeof it=="object"&&it!==null&&(M=vt(it));var ot=a.getDerivedStateFromProps;it=typeof ot=="function"||typeof l.getSnapshotBeforeUpdate=="function",Y=e.pendingProps!==Y,it||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(Y||at!==M)&&wo(e,l,n,M),Na=!1;var ut=e.memoizedState;l.state=ut,Un(e,n,l,i),Gn(),at=e.memoizedState,Y||ut!==at||Na?(typeof ot=="function"&&(ms(e,a,ot,n),at=e.memoizedState),(k=Na||Ko(e,a,k,n,ut,at,M))?(it||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=at),l.props=n,l.state=at,l.context=M,n=k):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,kl(t,e),M=e.memoizedProps,it=Ba(a,M),l.props=it,ot=e.pendingProps,ut=l.context,at=a.contextType,k=rn,typeof at=="object"&&at!==null&&(k=vt(at)),Y=a.getDerivedStateFromProps,(at=typeof Y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(M!==ot||ut!==k)&&wo(e,l,n,k),Na=!1,ut=e.memoizedState,l.state=ut,Un(e,n,l,i),Gn();var _t=e.memoizedState;M!==ot||ut!==_t||Na||t!==null&&t.dependencies!==null&&ue(t.dependencies)?(typeof Y=="function"&&(ms(e,a,Y,n),_t=e.memoizedState),(it=Na||Ko(e,a,it,n,ut,_t,k)||t!==null&&t.dependencies!==null&&ue(t.dependencies))?(at||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,_t,k),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,_t,k)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||M===t.memoizedProps&&ut===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ut===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_t),l.props=n,l.state=_t,l.context=k,n=it):(typeof l.componentDidUpdate!="function"||M===t.memoizedProps&&ut===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ut===t.memoizedState||(e.flags|=1024),n=!1)}return l=n,sl(t,e),n=(e.flags&128)!==0,l||n?(l=e.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:l.render(),e.flags|=1,t!==null&&n?(e.child=Sn(e,t.child,null,i),e.child=Sn(e,null,a,i)):de(t,e,a,i),e.memoizedState=l.state,t=e.child):t=ea(t,e,i),t}function eu(t,e,a,n){return ct(),e.flags|=256,de(t,e,a,n),e.child}function vs(t){return{baseLanes:t,cachePool:Jr()}}function _s(t,e,a){return t=t!==null?t.childLanes&~a:0,e&&(t|=Fe),t}function au(t,e,a){var n=e.pendingProps,i=!1,l=(e.flags&128)!==0,M;if((M=l)||(M=t!==null&&t.memoizedState===null?!1:(ee.current&2)!==0),M&&(i=!0,e.flags&=-129),M=(e.flags&32)!==0,e.flags&=-33,t===null){if(Gt){if(i?pa(e):ya(),Gt){var Y=te,k;(k=Y)&&(Y=Vd(Y,We),Y!==null?(e.memoizedState={dehydrated:Y,treeContext:Ya!==null?{id:la,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},k=H(18,null,null,0),k.stateNode=Y,k.return=e,e.child=k,ve=e,te=null,k=!0):k=!1),k||L(e)}if(Y=e.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return er(Y)?e.lanes=32:e.lanes=536870912,null;ta(e)}return Y=n.children,n=n.fallback,i?(ya(),i=e.mode,Y=rl({mode:"hidden",children:Y},i),n=Va(n,i,a,null),Y.return=e,n.return=e,Y.sibling=n,e.child=Y,i=e.child,i.memoizedState=vs(a),i.childLanes=_s(t,M,a),e.memoizedState=pr,n):(pa(e),Ss(e,Y))}if(k=t.memoizedState,k!==null&&(Y=k.dehydrated,Y!==null)){if(l)e.flags&256?(pa(e),e.flags&=-257,e=bs(t,e,a)):e.memoizedState!==null?(ya(),e.child=t.child,e.flags|=128,e=null):(ya(),i=n.fallback,Y=e.mode,n=rl({mode:"visible",children:n.children},Y),i=Va(i,Y,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,Sn(e,t.child,null,a),n=e.child,n.memoizedState=vs(a),n.childLanes=_s(t,M,a),e.memoizedState=pr,e=i);else if(pa(e),er(Y))M=Ad(Y).digest,n=Error(C(419)),n.stack="",n.digest=M,pt({value:n,source:null,stack:null}),e=bs(t,e,a);else if(le||He(t,e,a,!1),M=(a&t.childLanes)!==0,le||M){if(M=Vt,M!==null&&(n=a&-a,n=(n&42)!==0?1:V(n),n=(n&(M.suspendedLanes|a))!==0?0:n,n!==0&&n!==k.retryLane))throw k.retryLane=n,ka(t,n),Oe(M,t,n),Uc;tr(Y)||qs(),e=bs(t,e,a)}else tr(Y)?(e.flags|=192,e.child=t.child,e=null):(t=k.treeContext,Le&&(te=zd(Y),ve=e,Gt=!0,Fa=null,We=!1,t!==null&&(Ve[qe++]=la,Ve[qe++]=sa,Ve[qe++]=Ya,la=t.id,sa=t.overflow,Ya=e)),e=Ss(e,n.children),e.flags|=4096);return e}return i?(ya(),i=n.fallback,Y=e.mode,k=t.child,l=k.sibling,n=aa(k,{mode:"hidden",children:n.children}),n.subtreeFlags=k.subtreeFlags&65011712,l!==null?i=aa(l,i):(i=Va(i,Y,a,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,Y=t.child.memoizedState,Y===null?Y=vs(a):(k=Y.cachePool,k!==null?(l=na?Ft._currentValue:Ft._currentValue2,k=k.parent!==l?{parent:l,pool:l}:k):k=Jr(),Y={baseLanes:Y.baseLanes|a,cachePool:k}),i.memoizedState=Y,i.childLanes=_s(t,M,a),e.memoizedState=pr,n):(pa(e),a=t.child,t=a.sibling,a=aa(a,{mode:"visible",children:n.children}),a.return=e,a.sibling=null,t!==null&&(M=e.deletions,M===null?(e.deletions=[t],e.flags|=16):M.push(t)),e.child=a,e.memoizedState=null,a)}function Ss(t,e){return e=rl({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function rl(t,e){return t=H(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function bs(t,e,a){return Sn(e,t.child,null,a),t=Ss(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nu(t,e,a){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Dt(t.return,e,a)}function Cs(t,e,a,n,i){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=a,l.tailMode=i)}function iu(t,e,a){var n=e.pendingProps,i=n.revealOrder,l=n.tail;if(de(t,e,n.children,a),n=ee.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nu(t,a,e);else if(t.tag===19)nu(t,a,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}switch(o(ee,n),i){case"forwards":for(a=e.child,i=null;a!==null;)t=a.alternate,t!==null&&il(t)===null&&(i=a),a=a.sibling;a=i,a===null?(i=e.child,e.child=null):(i=a.sibling,a.sibling=null),Cs(e,!1,i,a,l);break;case"backwards":for(a=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&il(t)===null){e.child=i;break}t=i.sibling,i.sibling=a,a=i,i=t}Cs(e,!0,a,null,l);break;case"together":Cs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e,a){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,(a&e.childLanes)===0)if(t!==null){if(He(t,e,a,!1),(a&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,a=aa(t,t.pendingProps),e.child=a,a.return=e;t.sibling!==null;)t=t.sibling,a=a.sibling=aa(t,t.pendingProps),a.return=e;a.sibling=null}return e.child}function Es(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&ue(t)))}function _0(t,e,a){switch(e.tag){case 3:j(e,e.stateNode.containerInfo),dt(e,Ft,t.memoizedState.cache),ct();break;case 27:case 5:st(e);break;case 4:j(e,e.stateNode.containerInfo);break;case 10:dt(e,e.type,e.memoizedProps.value);break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(pa(e),e.flags|=128,null):(a&e.child.childLanes)!==0?au(t,e,a):(pa(e),t=ea(t,e,a),t!==null?t.sibling:null);pa(e);break;case 19:var i=(t.flags&128)!==0;if(n=(a&e.childLanes)!==0,n||(He(t,e,a,!1),n=(a&e.childLanes)!==0),i){if(n)return iu(t,e,a);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),o(ee,ee.current),n)break;return null;case 22:case 23:return e.lanes=0,Wo(t,e,a);case 24:dt(e,Ft,t.memoizedState.cache)}return ea(t,e,a)}function lu(t,e,a){if(t!==null)if(t.memoizedProps!==e.pendingProps)le=!0;else{if(!Es(t,a)&&(e.flags&128)===0)return le=!1,_0(t,e,a);le=(t.flags&131072)!==0}else le=!1,Gt&&(e.flags&1048576)!==0&&B(e,Sl,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var n=e.elementType,i=n._init;if(n=i(n._payload),e.type=n,typeof n=="function")Fs(n)?(t=Ba(n,t),e.tag=1,e=tu(null,e,n,t,a)):(e.tag=0,e=ys(null,e,n,t,a));else{if(n!=null){if(i=n.$$typeof,i===Zs){e.tag=11,e=Zo(null,e,n,t,a);break t}else if(i===Ws){e.tag=14,e=Jo(null,e,n,t,a);break t}}throw e=T(n)||n,Error(C(306,e,""))}}return e;case 0:return ys(t,e,e.type,e.pendingProps,a);case 1:return n=e.type,i=Ba(n,e.pendingProps),tu(t,e,n,i,a);case 3:t:{if(j(e,e.stateNode.containerInfo),t===null)throw Error(C(387));var l=e.pendingProps;i=e.memoizedState,n=i.element,kl(t,e),Un(e,l,null,a);var M=e.memoizedState;if(l=M.cache,dt(e,Ft,l),l!==i.cache&&qt(e,[Ft],a,!0),Gn(),l=M.element,Le&&i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:M.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=eu(t,e,l,a);break t}else if(l!==n){n=A(Error(C(424)),e),pt(n),e=eu(t,e,l,a);break t}else for(Le&&(te=Ud(e.stateNode.containerInfo),ve=e,Gt=!0,Fa=null,We=!0),a=Dc(e,null,l,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ct(),l===n){e=ea(t,e,a);break t}de(t,e,l,a)}e=e.child}return e;case 26:if(Xe)return sl(t,e),t===null?(a=pc(e.type,null,e.pendingProps,null))?e.memoizedState=a:Gt||(e.stateNode=kd(e.type,e.pendingProps,xa.current,e)):e.memoizedState=pc(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:if($t)return st(e),t===null&&$t&&Gt&&(n=e.stateNode=Cc(e.type,e.pendingProps,xa.current,fe.current,!1),ve=e,We=!0,te=Bd(e.type,n,te)),de(t,e,e.pendingProps.children,a),sl(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Gt&&(Qd(e.type,e.pendingProps,fe.current),(i=n=te)&&(n=Hd(n,e.type,e.pendingProps,We),n!==null?(e.stateNode=n,ve=e,te=Gd(n),We=!1,i=!0):i=!1),i||L(e)),st(e),i=e.type,l=e.pendingProps,M=t!==null?t.memoizedProps:null,n=l.children,ml(i,l)?n=null:M!==null&&ml(i,M)&&(e.flags|=32),e.memoizedState!==null&&(i=es(t,e,f0,null,null,a),na?Pa._currentValue=i:Pa._currentValue2=i),sl(t,e),de(t,e,n,a),e.child;case 6:return t===null&&Gt&&(Zd(e.pendingProps,fe.current),(t=a=te)&&(a=Ld(a,e.pendingProps,We),a!==null?(e.stateNode=a,ve=e,te=null,t=!0):t=!1),t||L(e)),null;case 13:return au(t,e,a);case 4:return j(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sn(e,null,n,a):de(t,e,n,a),e.child;case 11:return Zo(t,e,e.type,e.pendingProps,a);case 7:return de(t,e,e.pendingProps,a),e.child;case 8:return de(t,e,e.pendingProps.children,a),e.child;case 12:return de(t,e,e.pendingProps.children,a),e.child;case 10:return n=e.pendingProps,dt(e,e.type,n.value),de(t,e,n.children,a),e.child;case 9:return i=e.type._context,n=e.pendingProps.children,xe(e),i=vt(i),n=n(i),e.flags|=1,de(t,e,n,a),e.child;case 14:return Jo(t,e,e.type,e.pendingProps,a);case 15:return ko(t,e,e.type,e.pendingProps,a);case 19:return iu(t,e,a);case 31:return n=e.pendingProps,a=e.mode,n={mode:n.mode,children:n.children},t===null?(a=rl(n,a),a.ref=e.ref,e.child=a,a.return=e,e=a):(a=aa(t.child,n),a.ref=e.ref,e.child=a,a.return=e,e=a),e;case 22:return Wo(t,e,a);case 24:return xe(e),n=vt(Ft),t===null?(i=Ql(),i===null&&(i=Vt,l=we(),i.pooledCache=l,l.refCount++,l!==null&&(i.pooledCacheLanes|=a),i=l),e.memoizedState={parent:n,cache:i},Jl(e),dt(e,Ft,i)):((t.lanes&a)!==0&&(kl(t,e),Un(e,null,null,a),Gn()),i=t.memoizedState,l=e.memoizedState,i.parent!==n?(i={parent:n,cache:n},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),dt(e,Ft,n)):(n=l.cache,dt(e,Ft,n),n!==i.cache&&qt(e,[Ft],a,!0))),de(t,e,e.pendingProps.children,a),e.child;case 29:throw e.pendingProps}throw Error(C(156,e.tag))}function Re(t){t.flags|=4}function su(t,e){if(t!==null&&t.child===e.child)return!1;if((e.flags&16)!==0)return!0;for(t=e.child;t!==null;){if((t.flags&13878)!==0||(t.subtreeFlags&13878)!==0)return!0;t=t.sibling}return!1}function Ts(t,e,a,n){if(pe)for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)$s(t,a.stateNode);else if(!(a.tag===4||$t&&a.tag===27)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}else if(Ta)for(var i=e.child;i!==null;){if(i.tag===5){var l=i.stateNode;a&&n&&(l=hc(l,i.type,i.memoizedProps)),$s(t,l)}else if(i.tag===6)l=i.stateNode,a&&n&&(l=dc(l,i.memoizedProps)),$s(t,l);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)l=i.child,l!==null&&(l.return=i),Ts(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ru(t,e,a,n){var i=!1;if(Ta)for(var l=e.child;l!==null;){if(l.tag===5){var M=l.stateNode;a&&n&&(M=hc(M,l.type,l.memoizedProps)),uc(t,M)}else if(l.tag===6)M=l.stateNode,a&&n&&(M=dc(M,l.memoizedProps)),uc(t,M);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)i=l.child,i!==null&&(i.return=l),ru(t,l,!0,!0),i=!0;else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===e)break;for(;l.sibling===null;){if(l.return===null||l.return===e)return i;l=l.return}l.sibling.return=l.return,l=l.sibling}return i}function ou(t,e){if(Ta&&su(t,e)){t=e.stateNode;var a=t.containerInfo,n=oc();ru(n,e,!1,!1),t.pendingChildren=n,Re(e),Nd(a,n)}}function xs(t,e,a,n){if(pe)t.memoizedProps!==n&&Re(e);else if(Ta){var i=t.stateNode,l=t.memoizedProps;if((t=su(t,e))||l!==n){var M=fe.current;l=xd(i,a,l,n,!t,null),l===i?e.stateNode=i:(nc(l,a,n,M)&&Re(e),e.stateNode=l,t?Ts(l,e,!1,!1):Re(e))}else e.stateNode=i}}function Ns(t,e,a){if($0(e,a)){if(t.flags|=16777216,!lc(e,a))if(Uu())t.flags|=8192;else throw gn=Nl,dr}else t.flags&=-16777217}function uu(t,e){if(Id(e)){if(t.flags|=16777216,!bc(e))if(Uu())t.flags|=8192;else throw gn=Nl,dr}else t.flags&=-16777217}function ol(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?x():536870912,t.lanes|=e,En|=e)}function Vn(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,a=0,n=0;if(e)for(var i=t.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=a,e}function S0(t,e,a){var n=e.pendingProps;switch(I(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Yt(e),null;case 3:return a=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Lt(Ft),et(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(rt(e)?Re(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,mt())),ou(t,e),Yt(e),null;case 26:if(Xe){a=e.type;var i=e.memoizedState;return t===null?(Re(e),i!==null?(Yt(e),uu(e,i)):(Yt(e),Ns(e,a,n))):i?i!==t.memoizedState?(Re(e),Yt(e),uu(e,i)):(Yt(e),e.flags&=-16777217):(pe?t.memoizedProps!==n&&Re(e):xs(t,e,a,n),Yt(e),Ns(e,a,n)),null}case 27:if($t){if($(e),a=xa.current,i=e.type,t!==null&&e.stateNode!=null)pe?t.memoizedProps!==n&&Re(e):xs(t,e,i,n);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Yt(e),null}t=fe.current,rt(e)?J(e,t):(t=Cc(i,n,a,t,!0),e.stateNode=t,Re(e))}return Yt(e),null}case 5:if($(e),a=e.type,t!==null&&e.stateNode!=null)xs(t,e,a,n);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Yt(e),null}t=fe.current,rt(e)?J(e,t):(i=j0(a,n,xa.current,t,e),Ts(i,e,!1,!1),e.stateNode=i,nc(i,a,n,t)&&Re(e))}return Yt(e),Ns(e,e.type,e.pendingProps),null;case 6:if(t&&e.stateNode!=null)a=t.memoizedProps,pe?a!==n&&Re(e):Ta&&(a!==n?(e.stateNode=ic(n,xa.current,fe.current,e),Re(e)):e.stateNode=t.stateNode);else{if(typeof n!="string"&&e.stateNode===null)throw Error(C(166));if(t=xa.current,a=fe.current,rt(e)){if(!Le)throw Error(C(176));if(t=e.stateNode,a=e.memoizedProps,n=null,i=ve,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}Pd(t,a,e,n)||L(e)}else e.stateNode=ic(n,t,a,e)}return Yt(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=rt(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(!Le)throw Error(C(344));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));Yd(i,e)}else ct(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else i=mt(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(ta(e),e):(ta(e),null)}if(ta(e),(e.flags&128)!==0)return e.lanes=a,e;if(a=n!==null,t=t!==null&&t.memoizedState!==null,a){n=e.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var l=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048)}return a!==t&&a&&(e.child.flags|=8192),ol(e,e.updateQueue),Yt(e),null;case 4:return et(),ou(t,e),t===null&&J0(e.stateNode.containerInfo),Yt(e),null;case 10:return Lt(e.type),Yt(e),null;case 19:if(u(ee),i=e.memoizedState,i===null)return Yt(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)Vn(i,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(l=il(t),l!==null){for(e.flags|=128,Vn(i,!1),t=l.updateQueue,e.updateQueue=t,ol(e,t),e.subtreeFlags=0,t=a,a=e.child;a!==null;)Qu(a,t),a=a.sibling;return o(ee,ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>ei&&(e.flags|=128,n=!0,Vn(i,!1),e.lanes=4194304)}else{if(!n)if(t=il(l),t!==null){if(e.flags|=128,n=!0,t=t.updateQueue,e.updateQueue=t,ol(e,t),Vn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Gt)return Yt(e),null}else 2*Qe()-i.renderingStartTime>ei&&a!==536870912&&(e.flags|=128,n=!0,Vn(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(t=i.last,t!==null?t.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,t=ee.current,o(ee,n?t&1|2:t&1),e):(Yt(e),null);case 22:case 23:return ta(e),$l(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?(a&536870912)!==0&&(e.flags&128)===0&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),a=e.updateQueue,a!==null&&ol(e,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==a&&(e.flags|=2048),t!==null&&u(wa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),Lt(Ft),Yt(e),null;case 25:return null;case 30:return null}throw Error(C(156,e.tag))}function b0(t,e){switch(I(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lt(Ft),et(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return $(e),null;case 13:if(ta(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));ct()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return u(ee),null;case 4:return et(),null;case 10:return Lt(e.type),null;case 22:case 23:return ta(e),$l(),t!==null&&u(wa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Lt(Ft),null;case 25:return null;default:return null}}function cu(t,e){switch(I(e),e.tag){case 3:Lt(Ft),et();break;case 26:case 27:case 5:$(e);break;case 4:et();break;case 13:ta(e);break;case 19:u(ee);break;case 10:Lt(e.type);break;case 22:case 23:ta(e),$l(),t!==null&&u(wa);break;case 24:Lt(Ft)}}function qn(t,e){try{var a=e.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&t)===t){n=void 0;var l=a.create,M=a.inst;n=l(),M.destroy=n}a=a.next}while(a!==i)}}catch(Y){zt(e,e.return,Y)}}function va(t,e,a){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var l=i.next;n=l;do{if((n.tag&t)===t){var M=n.inst,Y=M.destroy;if(Y!==void 0){M.destroy=void 0,i=e;var k=a,at=Y;try{at()}catch(it){zt(i,k,it)}}}n=n.next}while(n!==l)}}catch(it){zt(e,e.return,it)}}function hu(t){var e=t.updateQueue;if(e!==null){var a=t.stateNode;try{ao(e,a)}catch(n){zt(t,t.return,n)}}}function du(t,e,a){a.props=Ba(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(n){zt(t,e,n)}}function Pn(t,e){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var n=wn(t.stateNode);break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof a=="function"?t.refCleanup=a(n):a.current=n}}catch(i){zt(t,e,i)}}function Je(t,e){var a=t.ref,n=t.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){zt(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){zt(t,e,i)}else a.current=null}function fu(t){var e=t.type,a=t.memoizedProps,n=t.stateNode;try{gd(n,e,a,t)}catch(i){zt(t,t.return,i)}}function As(t,e,a){try{md(t.stateNode,t.type,a,e,t)}catch(n){zt(t,t.return,n)}}function gu(t){return t.tag===5||t.tag===3||(Xe?t.tag===26:!1)||($t?t.tag===27&&ln(t.type):!1)||t.tag===4}function Rs(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||gu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if($t&&t.tag===27&&ln(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ms(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?yd(a,t,e):dd(a,t);else if(n!==4&&($t&&n===27&&ln(t.type)&&(a=t.stateNode,e=null),t=t.child,t!==null))for(Ms(t,e,a),t=t.sibling;t!==null;)Ms(t,e,a),t=t.sibling}function ul(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?pd(a,t,e):hd(a,t);else if(n!==4&&($t&&n===27&&ln(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ul(t,e,a),t=t.sibling;t!==null;)ul(t,e,a),t=t.sibling}function mu(t,e,a){t=t.containerInfo;try{cc(t,a)}catch(n){zt(e,e.return,n)}}function pu(t){var e=t.stateNode,a=t.memoizedProps;try{tf(t.type,a,e,t)}catch(n){zt(t,t.return,n)}}function C0(t,e){for(K0(t.containerInfo),se=e;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;var a=t.alternate;switch(e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&a!==null){e=void 0;var n=t,i=a.memoizedProps;a=a.memoizedState;var l=n.stateNode;try{var M=Ba(n.type,i,n.elementType===n.type);e=l.getSnapshotBeforeUpdate(M,a),l.__reactInternalSnapshotBeforeUpdate=e}catch(Y){zt(n,n.return,Y)}}break;case 3:(e&1024)!==0&&pe&&Td(t.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(C(163))}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}}function yu(t,e,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:_a(t,a),n&4&&qn(5,a);break;case 1:if(_a(t,a),n&4)if(t=a.stateNode,e===null)try{t.componentDidMount()}catch(M){zt(a,a.return,M)}else{var i=Ba(a.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(M){zt(a,a.return,M)}}n&64&&hu(a),n&512&&Pn(a,a.return);break;case 3:if(_a(t,a),n&64&&(t=a.updateQueue,t!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=wn(a.child.stateNode);break;case 1:e=a.child.stateNode}try{ao(t,e)}catch(M){zt(a,a.return,M)}}break;case 27:$t&&e===null&&n&4&&pu(a);case 26:case 5:_a(t,a),e===null&&n&4&&fu(a),n&512&&Pn(a,a.return);break;case 12:_a(t,a);break;case 13:_a(t,a),n&4&&_u(t,a),n&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=M0.bind(null,a),Rd(t,a))));break;case 22:if(n=a.memoizedState!==null||oa,!n){e=e!==null&&e.memoizedState!==null||Xt,i=oa;var l=Xt;oa=n,(Xt=e)&&!l?Sa(t,a,(a.subtreeFlags&8772)!==0):_a(t,a),oa=i,Xt=l}break;case 30:break;default:_a(t,a)}}function vu(t){var e=t.alternate;e!==null&&(t.alternate=null,vu(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&I0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function je(t,e,a){for(a=a.child;a!==null;)Os(t,e,a),a=a.sibling}function Os(t,e,a){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:if(Xe){Xt||Je(a,e),je(t,e,a),a.memoizedState?vc(a.memoizedState):a.stateNode&&Sc(a.stateNode);break}case 27:if($t){Xt||Je(a,e);var n=Wt,i=be;ln(a.type)&&(Wt=a.stateNode,be=!1),je(t,e,a),Ec(a.stateNode),Wt=n,be=i;break}case 5:Xt||Je(a,e);case 6:if(pe){if(n=Wt,i=be,Wt=null,je(t,e,a),Wt=n,be=i,Wt!==null)if(be)try{_d(Wt,a.stateNode)}catch(l){zt(a,e,l)}else try{vd(Wt,a.stateNode)}catch(l){zt(a,e,l)}}else je(t,e,a);break;case 18:pe&&Wt!==null&&(be?Xd(Wt,a.stateNode):jd(Wt,a.stateNode));break;case 4:pe?(n=Wt,i=be,Wt=a.stateNode.containerInfo,be=!0,je(t,e,a),Wt=n,be=i):(Ta&&mu(a.stateNode,a,oc()),je(t,e,a));break;case 0:case 11:case 14:case 15:Xt||va(2,a,e),Xt||va(4,a,e),je(t,e,a);break;case 1:Xt||(Je(a,e),n=a.stateNode,typeof n.componentWillUnmount=="function"&&du(a,e,n)),je(t,e,a);break;case 21:je(t,e,a);break;case 22:Xt=(n=Xt)||a.memoizedState!==null,je(t,e,a),Xt=n;break;default:je(t,e,a)}}function _u(t,e){if(Le&&e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wd(t)}catch(a){zt(e,e.return,a)}}function E0(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new zc),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new zc),e;default:throw Error(C(435,t.tag))}}function Ds(t,e){var a=E0(t);e.forEach(function(n){var i=O0.bind(null,t,n);a.has(n)||(a.add(n),n.then(i,i))})}function ye(t,e){var a=e.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],l=t,M=e;if(pe){var Y=M;t:for(;Y!==null;){switch(Y.tag){case 27:if($t){if(ln(Y.type)){Wt=Y.stateNode,be=!1;break t}break}case 5:Wt=Y.stateNode,be=!1;break t;case 3:case 4:Wt=Y.stateNode.containerInfo,be=!0;break t}Y=Y.return}if(Wt===null)throw Error(C(160));Os(l,M,i),Wt=null,be=!1}else Os(l,M,i);l=i.alternate,l!==null&&(l.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Su(e,t),e=e.sibling}function Su(t,e){var a=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ye(e,t),Se(t),n&4&&(va(3,t,t.return),qn(3,t),va(5,t,t.return));break;case 1:ye(e,t),Se(t),n&512&&(Xt||a===null||Je(a,a.return)),n&64&&oa&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:if(Xe){var i=Ze;if(ye(e,t),Se(t),n&512&&(Xt||a===null||Je(a,a.return)),n&4){n=a!==null?a.memoizedState:null;var l=t.memoizedState;a===null?l===null?t.stateNode===null?t.stateNode=Jd(i,t.type,t.memoizedProps,t):_c(i,t.type,t.stateNode):t.stateNode=yc(i,l,t.memoizedProps):n!==l?(n===null?a.stateNode!==null&&Sc(a.stateNode):vc(n),l===null?_c(i,t.type,t.stateNode):yc(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&As(t,t.memoizedProps,a.memoizedProps)}break}case 27:if($t){ye(e,t),Se(t),n&512&&(Xt||a===null||Je(a,a.return)),a!==null&&n&4&&As(t,t.memoizedProps,a.memoizedProps);break}case 5:if(ye(e,t),Se(t),n&512&&(Xt||a===null||Je(a,a.return)),pe){if(t.flags&32){i=t.stateNode;try{rc(i)}catch(it){zt(t,t.return,it)}}n&4&&t.stateNode!=null&&(i=t.memoizedProps,As(t,i,a!==null?a.memoizedProps:i)),n&1024&&(yr=!0)}break;case 6:if(ye(e,t),Se(t),n&4&&pe){if(t.stateNode===null)throw Error(C(162));n=t.memoizedProps,a=a!==null?a.memoizedProps:n,i=t.stateNode;try{fd(i,a,n)}catch(it){zt(t,t.return,it)}}break;case 3:if(Xe?(Wd(),i=Ze,Ze=ar(e.containerInfo),ye(e,t),Ze=i):ye(e,t),Se(t),n&4){if(pe&&Le&&a!==null&&a.memoizedState.isDehydrated)try{Kd(e.containerInfo)}catch(it){zt(t,t.return,it)}if(Ta){n=e.containerInfo,a=e.pendingChildren;try{cc(n,a)}catch(it){zt(t,t.return,it)}}}yr&&(yr=!1,bu(t));break;case 4:Xe?(a=Ze,Ze=ar(t.stateNode.containerInfo),ye(e,t),Se(t),Ze=a):(ye(e,t),Se(t)),n&4&&Ta&&mu(t.stateNode,t,t.stateNode.pendingChildren);break;case 12:ye(e,t),Se(t);break;case 13:ye(e,t),Se(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(br=Qe()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ds(t,n)));break;case 22:i=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Y=oa,k=Xt;if(oa=Y||i,Xt=k||M,ye(e,t),Xt=k,oa=Y,Se(t),n&8192&&(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(a===null||M||oa||Xt||Ha(t)),pe)){t:if(a=null,pe)for(e=t;;){if(e.tag===5||Xe&&e.tag===26){if(a===null){M=a=e;try{l=M.stateNode,i?Sd(l):Cd(M.stateNode,M.memoizedProps)}catch(it){zt(M,M.return,it)}}}else if(e.tag===6){if(a===null){M=e;try{var at=M.stateNode;i?bd(at):Ed(at,M.memoizedProps)}catch(it){zt(M,M.return,it)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;a===e&&(a=null),e=e.return}a===e&&(a=null),e.sibling.return=e.return,e=e.sibling}}n&4&&(n=t.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ds(t,a))));break;case 19:ye(e,t),Se(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Ds(t,n)));break;case 30:break;case 21:break;default:ye(e,t),Se(t)}}function Se(t){var e=t.flags;if(e&2){try{if(pe){for(var a,n=t.return;n!==null;){if(gu(n)){a=n;break}n=n.return}if(a==null)throw Error(C(160));switch(a.tag){case 27:if($t){var i=a.stateNode,l=Rs(t);ul(t,l,i);break}case 5:var M=a.stateNode;a.flags&32&&(rc(M),a.flags&=-33);var Y=Rs(t);ul(t,Y,M);break;case 3:case 4:var k=a.stateNode.containerInfo,at=Rs(t);Ms(t,at,k);break;default:throw Error(C(161))}}}catch(it){zt(t,t.return,it)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bu(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;bu(e),e.tag===5&&e.flags&1024&&ad(e.stateNode),t=t.sibling}}function _a(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)yu(t,e.alternate,e),e=e.sibling}function Ha(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:va(4,e,e.return),Ha(e);break;case 1:Je(e,e.return);var a=e.stateNode;typeof a.componentWillUnmount=="function"&&du(e,e.return,a),Ha(e);break;case 27:$t&&Ec(e.stateNode);case 26:case 5:Je(e,e.return),Ha(e);break;case 22:e.memoizedState===null&&Ha(e);break;case 30:Ha(e);break;default:Ha(e)}t=t.sibling}}function Sa(t,e,a){for(a=a&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,i=t,l=e,M=l.flags;switch(l.tag){case 0:case 11:case 15:Sa(i,l,a),qn(4,l);break;case 1:if(Sa(i,l,a),n=l,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(at){zt(n,n.return,at)}if(n=l,i=n.updateQueue,i!==null){var Y=n.stateNode;try{var k=i.shared.hiddenCallbacks;if(k!==null)for(i.shared.hiddenCallbacks=null,i=0;i<k.length;i++)eo(k[i],Y)}catch(at){zt(n,n.return,at)}}a&&M&64&&hu(l),Pn(l,l.return);break;case 27:$t&&pu(l);case 26:case 5:Sa(i,l,a),a&&n===null&&M&4&&fu(l),Pn(l,l.return);break;case 12:Sa(i,l,a);break;case 13:Sa(i,l,a),a&&M&4&&_u(i,l);break;case 22:l.memoizedState===null&&Sa(i,l,a),Pn(l,l.return);break;case 30:break;default:Sa(i,l,a)}e=e.sibling}}function Gs(t,e){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zt(a))}function Us(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Zt(t))}function ke(t,e,a,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cu(t,e,a,n),e=e.sibling}function Cu(t,e,a,n){var i=e.flags;switch(e.tag){case 0:case 11:case 15:ke(t,e,a,n),i&2048&&qn(9,e);break;case 1:ke(t,e,a,n);break;case 3:ke(t,e,a,n),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Zt(t)));break;case 12:if(i&2048){ke(t,e,a,n),t=e.stateNode;try{var l=e.memoizedProps,M=l.id,Y=l.onPostCommit;typeof Y=="function"&&Y(M,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){zt(e,e.return,k)}}else ke(t,e,a,n);break;case 13:ke(t,e,a,n);break;case 23:break;case 22:l=e.stateNode,M=e.alternate,e.memoizedState!==null?l._visibility&2?ke(t,e,a,n):Yn(t,e):l._visibility&2?ke(t,e,a,n):(l._visibility|=2,Ia(t,e,a,n,(e.subtreeFlags&10256)!==0)),i&2048&&Gs(M,e);break;case 24:ke(t,e,a,n),i&2048&&Us(e.alternate,e);break;default:ke(t,e,a,n)}}function Ia(t,e,a,n,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var l=t,M=e,Y=a,k=n,at=M.flags;switch(M.tag){case 0:case 11:case 15:Ia(l,M,Y,k,i),qn(8,M);break;case 23:break;case 22:var it=M.stateNode;M.memoizedState!==null?it._visibility&2?Ia(l,M,Y,k,i):Yn(l,M):(it._visibility|=2,Ia(l,M,Y,k,i)),i&&at&2048&&Gs(M.alternate,M);break;case 24:Ia(l,M,Y,k,i),i&&at&2048&&Us(M.alternate,M);break;default:Ia(l,M,Y,k,i)}e=e.sibling}}function Yn(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var a=t,n=e,i=n.flags;switch(n.tag){case 22:Yn(a,n),i&2048&&Gs(n.alternate,n);break;case 24:Yn(a,n),i&2048&&Us(n.alternate,n);break;default:Yn(a,n)}e=e.sibling}}function La(t){if(t.subtreeFlags&bn)for(t=t.child;t!==null;)Eu(t),t=t.sibling}function Eu(t){switch(t.tag){case 26:La(t),t.flags&bn&&(t.memoizedState!==null?$d(Ze,t.memoizedState,t.memoizedProps):sc(t.type,t.memoizedProps));break;case 5:La(t),t.flags&bn&&sc(t.type,t.memoizedProps);break;case 3:case 4:if(Xe){var e=Ze;Ze=ar(t.stateNode.containerInfo),La(t),Ze=e}else La(t);break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=bn,bn=16777216,La(t),bn=e):La(t));break;default:La(t)}}function Tu(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Fn(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];se=n,Nu(n,t)}Tu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xu(t),t=t.sibling}function xu(t){switch(t.tag){case 0:case 11:case 15:Fn(t),t.flags&2048&&va(9,t,t.return);break;case 3:Fn(t);break;case 12:Fn(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,cl(t)):Fn(t);break;default:Fn(t)}}function cl(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];se=n,Nu(n,t)}Tu(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:va(8,e,e.return),cl(e);break;case 22:a=e.stateNode,a._visibility&2&&(a._visibility&=-3,cl(e));break;default:cl(e)}t=t.sibling}}function Nu(t,e){for(;se!==null;){var a=se;switch(a.tag){case 0:case 11:case 15:va(8,a,e);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Zt(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,se=n;else t:for(a=t;se!==null;){n=se;var i=n.sibling,l=n.return;if(vu(n),n===a){se=null;break t}if(i!==null){i.return=l,se=i;break t}se=l}}}function zs(t){var e=Z0(t);if(e!=null){if(typeof e.memoizedProps["data-testname"]!="string")throw Error(C(364));return e}if(t=ld(t),t===null)throw Error(C(362));return t.stateNode.current}function Bs(t,e){var a=t.tag;switch(e.$$typeof){case Dl:if(t.type===e.value)return!0;break;case Gl:t:{for(e=e.value,t=[t,0],a=0;a<t.length;){var n=t[a++],i=n.tag,l=t[a++],M=e[l];if(i!==5&&i!==26&&i!==27||!Xn(n)){for(;M!=null&&Bs(n,M);)l++,M=e[l];if(l===e.length){e=!0;break t}else for(n=n.child;n!==null;)t.push(n,l),n=n.sibling}}e=!1}return e;case Ul:if((a===5||a===26||a===27)&&od(t.stateNode,e.value))return!0;break;case Bl:if((a===5||a===6||a===26||a===27)&&(t=rd(t),t!==null&&0<=t.indexOf(e.value)))return!0;break;case zl:if((a===5||a===26||a===27)&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(C(365))}return!1}function Hs(t){switch(t.$$typeof){case Dl:return"<"+(T(t.value)||"Unknown")+">";case Gl:return":has("+(Hs(t)||"")+")";case Ul:return'[role="'+t.value+'"]';case Bl:return'"'+t.value+'"';case zl:return'[data-testname="'+t.value+'"]';default:throw Error(C(365))}}function Au(t,e){var a=[];t=[t,0];for(var n=0;n<t.length;){var i=t[n++],l=i.tag,M=t[n++],Y=e[M];if(l!==5&&l!==26&&l!==27||!Xn(i)){for(;Y!=null&&Bs(i,Y);)M++,Y=e[M];if(M===e.length)a.push(i);else for(i=i.child;i!==null;)t.push(i,M),i=i.sibling}}return a}function Ls(t,e){if(!jn)throw Error(C(363));t=zs(t),t=Au(t,e),e=[],t=Array.from(t);for(var a=0;a<t.length;){var n=t[a++],i=n.tag;if(i===5||i===26||i===27)Xn(n)||e.push(n.stateNode);else for(n=n.child;n!==null;)t.push(n),n=n.sibling}return e}function Me(){if((Nt&2)!==0&&At!==0)return At&-At;if(ft.T!==null){var t=dn;return t!==0?t:On()}return k0()}function Ru(){Fe===0&&(Fe=(At&536870912)===0||Gt?_():536870912);var t=Ye.current;return t!==null&&(t.flags|=32),Fe}function Oe(t,e,a){(t===Vt&&(Bt===2||Bt===9)||t.cancelPendingCommit!==null)&&($a(t,0),ba(t,At,Fe,!1)),K(t,a),((Nt&2)===0||t!==Vt)&&(t===Vt&&((Nt&2)===0&&(Xa|=a),Kt===4&&ba(t,At,Fe,!1)),It(t))}function Mu(t,e,a){if((Nt&6)!==0)throw Error(C(327));var n=!a&&(e&124)===0&&(e&t.expiredLanes)===0||c(t,e),i=n?N0(t,e):Ps(t,e,!0),l=n;do{if(i===0){Cn&&!n&&ba(t,e,0,!1);break}else{if(a=t.current.alternate,l&&!T0(a)){i=Ps(t,e,!1),l=!1;continue}if(i===2){if(l=e,t.errorRecoveryDisabledLanes&l)var M=0;else M=t.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){e=M;t:{var Y=t;i=ti;var k=Le&&Y.current.memoizedState.isDehydrated;if(k&&($a(Y,M).flags|=256),M=Ps(Y,M,!1),M!==2){if(vr&&!k){Y.errorRecoveryDisabledLanes|=l,Xa|=l,i=4;break t}l=Ce,Ce=i,l!==null&&(Ce===null?Ce=l:Ce.push.apply(Ce,l))}i=M}if(l=!1,i!==2)continue}}if(i===1){$a(t,0),ba(t,e,0,!0);break}t:{switch(n=t,l=i,l){case 0:case 1:throw Error(C(345));case 4:if((e&4194048)!==e)break;case 6:ba(n,e,Fe,!Ra);break t;case 2:Ce=null;break;case 3:case 5:break;default:throw Error(C(329))}if((e&62914560)===e&&(i=br+300-Qe(),10<i)){if(ba(n,e,Fe,!Ra),O(n,0,!0)!==0)break t;n.timeoutHandle=X0(Ou.bind(null,n,a,Ce,Hl,Sr,e,Fe,Xa,En,Ra,l,2,-0,0),i);break t}Ou(n,a,Ce,Hl,Sr,e,Fe,Xa,En,Ra,l,0,-0,0)}}break}while(!0);It(t)}function Ou(t,e,a,n,i,l,M,Y,k,at,it,ot,ut,_t){if(t.timeoutHandle=qa,ot=e.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(td(),Eu(e),ot=ed(),ot!==null)){t.cancelPendingCommit=ot(qu.bind(null,t,e,l,a,n,i,M,Y,k,it,1,ut,_t)),ba(t,l,M,!at);return}qu(t,e,l,a,n,i,M,Y,k)}function T0(t){for(var e=t;;){var a=e.tag;if((a===0||a===11||a===15)&&e.flags&16384&&(a=e.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],l=i.getSnapshot;i=i.value;try{if(!ze(l(),i))return!1}catch{return!1}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e,a,n){e&=~_r,e&=~Xa,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var i=e;0<i;){var l=31-Ge(i),M=1<<l;n[l]=-1,i&=~M}a!==0&&R(t,a,e)}function Du(){return(Nt&6)===0?(ne(0),!1):!0}function Vs(){if(Et!==null){if(Bt===0)var t=Et.return;else t=Et,ra=Ka=null,is(t),_n=null,In=0,t=Et;for(;t!==null;)cu(t.alternate,t),t=t.return;Et=null}}function $a(t,e){var a=t.timeoutHandle;a!==qa&&(t.timeoutHandle=qa,Q0(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vs(),Vt=t,Et=a=aa(t.current,null),At=e,Bt=0,Be=null,Ra=!1,Cn=c(t,e),vr=!1,En=Fe=_r=Xa=Ma=Kt=0,Ce=ti=null,Sr=!1,(e&8)!==0&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var i=31-Ge(n),l=1<<i;e|=t[i],n&=~l}return ua=e,Zi(),a}function Gu(t,e){St=null,ft.H=Ol,e===kn||e===xl?(e=Ir(),Bt=3):e===dr?(e=Ir(),Bt=4):Bt=e===Uc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Be=e,Et===null&&(Kt=1,ll(t,A(e,t.current)))}function Uu(){var t=Ye.current;return t===null?!0:(At&4194048)===At?Ie===null:(At&62914560)===At||(At&536870912)!==0?t===Ie:!1}function zu(){var t=ft.H;return ft.H=Ol,t===null?Ol:t}function Bu(){var t=ft.A;return ft.A=pf,t}function qs(){Kt=4,Ra||(At&4194048)!==At&&Ye.current!==null||(Cn=!0),(Ma&134217727)===0&&(Xa&134217727)===0||Vt===null||ba(Vt,At,Fe,!1)}function Ps(t,e,a){var n=Nt;Nt|=2;var i=zu(),l=Bu();(Vt!==t||At!==e)&&(Hl=null,$a(t,e)),e=!1;var M=Kt;t:do try{if(Bt!==0&&Et!==null){var Y=Et,k=Be;switch(Bt){case 8:Vs(),M=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(e=!0);var at=Bt;if(Bt=0,Be=null,tn(t,Y,k,at),a&&Cn){M=0;break t}break;default:at=Bt,Bt=0,Be=null,tn(t,Y,k,at)}}x0(),M=Kt;break}catch(it){Gu(t,it)}while(!0);return e&&t.shellSuspendCounter++,ra=Ka=null,Nt=n,ft.H=i,ft.A=l,Et===null&&(Vt=null,At=0,Zi()),M}function x0(){for(;Et!==null;)Hu(Et)}function N0(t,e){var a=Nt;Nt|=2;var n=zu(),i=Bu();Vt!==t||At!==e?(Hl=null,ei=Qe()+500,$a(t,e)):Cn=c(t,e);t:do try{if(Bt!==0&&Et!==null){e=Et;var l=Be;e:switch(Bt){case 1:Bt=0,Be=null,tn(t,e,l,1);break;case 2:case 9:if(kr(l)){Bt=0,Be=null,Lu(e);break}e=function(){Bt!==2&&Bt!==9||Vt!==t||(Bt=7),It(t)},l.then(e,e);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:kr(l)?(Bt=0,Be=null,Lu(e)):(Bt=0,Be=null,tn(t,e,l,7));break;case 5:var M=null;switch(Et.tag){case 26:M=Et.memoizedState;case 5:case 27:var Y=Et,k=Y.type,at=Y.pendingProps;if(M?bc(M):lc(k,at)){Bt=0,Be=null;var it=Y.sibling;if(it!==null)Et=it;else{var ot=Y.return;ot!==null?(Et=ot,hl(ot)):Et=null}break e}}Bt=0,Be=null,tn(t,e,l,5);break;case 6:Bt=0,Be=null,tn(t,e,l,6);break;case 8:Vs(),Kt=6;break t;default:throw Error(C(462))}}A0();break}catch(ut){Gu(t,ut)}while(!0);return ra=Ka=null,ft.H=n,ft.A=i,Nt=a,Et!==null?0:(Vt=null,At=0,Zi(),Kt)}function A0(){for(;Et!==null&&!nf();)Hu(Et)}function Hu(t){var e=lu(t.alternate,t,ua);t.memoizedProps=t.pendingProps,e===null?hl(t):Et=e}function Lu(t){var e=t,a=e.alternate;switch(e.tag){case 15:case 0:e=$o(a,e,e.pendingProps,e.type,void 0,At);break;case 11:e=$o(a,e,e.pendingProps,e.type.render,e.ref,At);break;case 5:is(e);default:cu(a,e),e=Et=Qu(e,ua),e=lu(a,e,ua)}t.memoizedProps=t.pendingProps,e===null?hl(t):Et=e}function tn(t,e,a,n){ra=Ka=null,is(e),_n=null,In=0;var i=e.return;try{if(v0(t,i,e,a,At)){Kt=1,ll(t,A(a,t.current)),Et=null;return}}catch(l){if(i!==null)throw Et=i,l;Kt=1,ll(t,A(a,t.current)),Et=null;return}e.flags&32768?(Gt||n===1?t=!0:Cn||(At&536870912)!==0?t=!1:(Ra=t=!0,(n===2||n===9||n===3||n===6)&&(n=Ye.current,n!==null&&n.tag===13&&(n.flags|=16384))),Vu(e,t)):hl(e)}function hl(t){var e=t;do{if((e.flags&32768)!==0){Vu(e,Ra);return}t=e.return;var a=S0(e.alternate,e,ua);if(a!==null){Et=a;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);Kt===0&&(Kt=5)}function Vu(t,e){do{var a=b0(t.alternate,t);if(a!==null){a.flags&=32767,Et=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!e&&(t=t.sibling,t!==null)){Et=t;return}Et=t=a}while(t!==null);Kt=6,Et=null}function qu(t,e,a,n,i,l,M,Y,k){t.cancelPendingCommit=null;do Kn();while(ge!==0);if((Nt&6)!==0)throw Error(C(327));if(e!==null){if(e===t.current)throw Error(C(177));if(l=e.lanes|e.childLanes,l|=fr,N(t,a,l,M,Y,k),t===Vt&&(Et=Vt=null,At=0),Tn=e,Da=t,xn=a,Cr=l,Er=i,Bc=n,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,D0(lr,function(){return wu(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||n){n=ft.T,ft.T=null,i=ia(),ie(2),M=Nt,Nt|=4;try{C0(t,e,a)}finally{Nt=M,ie(i),ft.T=n}}ge=1,Pu(),Yu(),Fu()}}function Pu(){if(ge===1){ge=0;var t=Da,e=Tn,a=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||a){a=ft.T,ft.T=null;var n=ia();ie(2);var i=Nt;Nt|=4;try{Su(e,t),w0(t.containerInfo)}finally{Nt=i,ie(n),ft.T=a}}t.current=e,ge=2}}function Yu(){if(ge===2){ge=0;var t=Da,e=Tn,a=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||a){a=ft.T,ft.T=null;var n=ia();ie(2);var i=Nt;Nt|=4;try{yu(t,e.alternate,e)}finally{Nt=i,ie(n),ft.T=a}}ge=3}}function Fu(){if(ge===4||ge===3){ge=0,lf();var t=Da,e=Tn,a=xn,n=Bc;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?ge=5:(ge=0,Tn=Da=null,Ku(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Oa=null),w(a),e=e.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=ft.T,i=ia(),ie(2),ft.T=null;try{for(var l=t.onRecoverableError,M=0;M<n.length;M++){var Y=n[M];l(Y.value,{componentStack:Y.stack})}}finally{ft.T=e,ie(i)}}(xn&3)!==0&&Kn(),It(t),i=t.pendingLanes,(a&4194090)!==0&&(i&42)!==0?t===Tr?ai++:(ai=0,Tr=t):ai=0,ne(0)}}function Ku(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Zt(e)))}function Kn(t){return Pu(),Yu(),Fu(),wu()}function wu(){if(ge!==5)return!1;var t=Da,e=Cr;Cr=0;var a=w(xn),n=32>a?32:a;a=ft.T;var i=ia();try{ie(n),ft.T=null,n=Er,Er=null;var l=Da,M=xn;if(ge=0,Tn=Da=null,xn=0,(Nt&6)!==0)throw Error(C(331));var Y=Nt;if(Nt|=4,xu(l.current),Cu(l,l.current,M,n),Nt=Y,ne(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Qn,l)}catch{}return!0}finally{ie(i),ft.T=a,Ku(t,e)}}function ju(t,e,a){e=A(a,e),e=ps(t.stateNode,e,2),t=ma(t,e,2),t!==null&&(K(t,2),It(t))}function zt(t,e,a){if(t.tag===3)ju(t,t,a);else for(;e!==null;){if(e.tag===3){ju(e,t,a);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oa===null||!Oa.has(n))){t=A(a,t),a=Xo(2),n=ma(e,a,2),n!==null&&(Qo(a,n,e,t),K(n,2),It(n));break}}e=e.return}}function Ys(t,e,a){var n=t.pingCache;if(n===null){n=t.pingCache=new yf;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(a)||(vr=!0,i.add(a),t=R0.bind(null,t,e,a),e.then(t,t))}function R0(t,e,a){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Vt===t&&(At&a)===a&&(Kt===4||Kt===3&&(At&62914560)===At&&300>Qe()-br?(Nt&2)===0&&$a(t,0):_r|=a,En===At&&(En=0)),It(t)}function Xu(t,e){e===0&&(e=x()),t=ka(t,e),t!==null&&(K(t,e),It(t))}function M0(t){var e=t.memoizedState,a=0;e!==null&&(a=e.retryLane),Xu(t,a)}function O0(t,e){var a=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(C(314))}n!==null&&n.delete(e),Xu(t,a)}function D0(t,e){return vl(t,e)}function G0(t,e,a,n){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aa(t,e){var a=t.alternate;return a===null?(a=H(t.tag,e,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=e,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,e=t.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Qu(t,e){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,e=a.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function dl(t,e,a,n,i,l){var M=0;if(n=t,typeof t=="function")Fs(t)&&(M=1);else if(typeof t=="string")M=Xe&&$t?mc(t,a,fe.current)?26:Tc(t)?27:5:Xe?mc(t,a,fe.current)?26:5:$t&&Tc(t)?27:5;else t:switch(t){case Is:return t=H(31,a,e,i),t.elementType=Is,t.lanes=l,t;case an:return Va(a.children,i,l,e);case $u:M=8,i|=24;break;case Qs:return t=H(12,a,e,i|2),t.elementType=Qs,t.lanes=l,t;case Js:return t=H(13,a,e,i),t.elementType=Js,t.lanes=l,t;case ks:return t=H(19,a,e,i),t.elementType=ks,t.lanes=l,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H0:case Ca:M=10;break t;case tc:M=9;break t;case Zs:M=11;break t;case Ws:M=14;break t;case Ea:M=16,n=null;break t}M=29,a=Error(C(130,t===null?"null":typeof t,"")),n=null}return e=H(M,a,e,i),e.elementType=t,e.type=n,e.lanes=l,e}function Va(t,e,a,n){return t=H(7,t,n,e),t.lanes=a,t}function Ks(t,e,a){return t=H(6,t,null,e),t.lanes=a,t}function ws(t,e,a){return e=H(4,t.children!==null?t.children:[],t.key,e),e.lanes=a,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function U0(t,e,a,n,i,l,M,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=l,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Zu(t,e,a,n,i,l,M,Y,k,at,it,ot){return t=new U0(t,e,a,M,Y,k,at,ot),e=1,l===!0&&(e|=24),l=H(3,null,null,e),t.current=l,l.stateNode=t,e=we(),e.refCount++,t.pooledCache=e,e.refCount++,l.memoizedState={element:n,isDehydrated:a,cache:e},Jl(l),t}function Ju(t){return t?(t=rn,t):rn}function ku(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=d(e),t=t!==null?f(t):null,t===null?null:wn(t.stateNode)}function Wu(t,e,a,n,i,l){i=Ju(i),n.context===null?n.context=i:n.pendingContext=i,n=ga(e),n.payload={element:a},l=l===void 0?null:l,l!==null&&(n.callback=l),a=ma(t,n,e),a!==null&&(Oe(a,t,e),Dn(a,t,e))}function Iu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<e?a:e}}function js(t,e){Iu(t,e),(t=t.alternate)&&Iu(t,e)}var Ct={},z0=Ih(),De=$h(),Xs=Object.assign,B0=Symbol.for("react.element"),fl=Symbol.for("react.transitional.element"),en=Symbol.for("react.portal"),an=Symbol.for("react.fragment"),$u=Symbol.for("react.strict_mode"),Qs=Symbol.for("react.profiler"),H0=Symbol.for("react.provider"),tc=Symbol.for("react.consumer"),Ca=Symbol.for("react.context"),Zs=Symbol.for("react.forward_ref"),Js=Symbol.for("react.suspense"),ks=Symbol.for("react.suspense_list"),Ws=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),Is=Symbol.for("react.activity"),L0=Symbol.for("react.memo_cache_sentinel"),ec=Symbol.iterator,V0=Symbol.for("react.client.reference"),gl=Array.isArray,ft=z0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q0=r.rendererVersion,P0=r.rendererPackageName,ac=r.extraDevToolsConfig,wn=r.getPublicInstance,Y0=r.getRootHostContext,F0=r.getChildHostContext,K0=r.prepareForCommit,w0=r.resetAfterCommit,j0=r.createInstance;r.cloneMutableInstance;var $s=r.appendInitialChild,nc=r.finalizeInitialChildren,ml=r.shouldSetTextContent,ic=r.createTextInstance;r.cloneMutableTextInstance;var X0=r.scheduleTimeout,Q0=r.cancelTimeout,qa=r.noTimeout,na=r.isPrimaryRenderer;r.warnsIfNotActing;var pe=r.supportsMutation,Ta=r.supportsPersistence,Le=r.supportsHydration,Z0=r.getInstanceFromNode;r.beforeActiveInstanceBlur;var J0=r.preparePortalMount;r.prepareScopeUpdate,r.getInstanceFromScope;var ie=r.setCurrentUpdatePriority,ia=r.getCurrentUpdatePriority,k0=r.resolveUpdatePriority;r.trackSchedulerEvent,r.resolveEventType,r.resolveEventTimeStamp;var W0=r.shouldAttemptEagerTransition,I0=r.detachDeletedInstance;r.requestPostPaintCallback;var $0=r.maySuspendCommit,lc=r.preloadInstance,td=r.startSuspendingCommit,sc=r.suspendInstance;r.suspendOnActiveViewTransition;var ed=r.waitForCommitToBeReady,nn=r.NotPendingTransition,Pa=r.HostTransitionContext,ad=r.resetFormInstance;r.bindToConsole;var nd=r.supportsMicrotasks,id=r.scheduleMicrotask,jn=r.supportsTestSelectors,ld=r.findFiberRoot,sd=r.getBoundingRect,rd=r.getTextContent,Xn=r.isHiddenSubtree,od=r.matchAccessibilityRole,ud=r.setFocusIfFocusable,cd=r.setupIntersectionObserver,hd=r.appendChild,dd=r.appendChildToContainer,fd=r.commitTextUpdate,gd=r.commitMount,md=r.commitUpdate,pd=r.insertBefore,yd=r.insertInContainerBefore,vd=r.removeChild,_d=r.removeChildFromContainer,rc=r.resetTextContent,Sd=r.hideInstance,bd=r.hideTextInstance,Cd=r.unhideInstance,Ed=r.unhideTextInstance;r.cancelViewTransitionName,r.cancelRootViewTransitionName,r.restoreRootViewTransitionName,r.cloneRootViewTransitionContainer,r.removeRootViewTransitionClone,r.measureClonedInstance,r.hasInstanceChanged,r.hasInstanceAffectedParent,r.startViewTransition,r.startGestureTransition,r.stopGestureTransition,r.getCurrentGestureOffset,r.subscribeToGestureDirection,r.createViewTransitionInstance;var Td=r.clearContainer;r.createFragmentInstance,r.updateFragmentInstanceFiber,r.commitNewChildToFragmentInstance,r.deleteChildFromFragmentInstance;var xd=r.cloneInstance,oc=r.createContainerChildSet,uc=r.appendChildToContainerChildSet,Nd=r.finalizeContainerChildren,cc=r.replaceContainerChildren,hc=r.cloneHiddenInstance,dc=r.cloneHiddenTextInstance,tr=r.isSuspenseInstancePending,er=r.isSuspenseInstanceFallback,Ad=r.getSuspenseInstanceFallbackErrorDetails,Rd=r.registerSuspenseInstanceRetry,Md=r.canHydrateFormStateMarker,Od=r.isFormStateMarkerMatching,fc=r.getNextHydratableSibling,Dd=r.getNextHydratableSiblingAfterSingleton,Gd=r.getFirstHydratableChild,Ud=r.getFirstHydratableChildWithinContainer,zd=r.getFirstHydratableChildWithinSuspenseInstance,Bd=r.getFirstHydratableChildWithinSingleton,Hd=r.canHydrateInstance,Ld=r.canHydrateTextInstance,Vd=r.canHydrateSuspenseInstance,qd=r.hydrateInstance,Pd=r.hydrateTextInstance,Yd=r.hydrateSuspenseInstance,Fd=r.getNextHydratableInstanceAfterSuspenseInstance,Kd=r.commitHydratedContainer,wd=r.commitHydratedSuspenseInstance,jd=r.clearSuspenseBoundary,Xd=r.clearSuspenseBoundaryFromContainer,gc=r.shouldDeleteUnhydratedTailInstances;r.diffHydratedPropsForDevWarnings,r.diffHydratedTextForDevWarnings,r.describeHydratableInstanceForDevWarnings;var Qd=r.validateHydratableInstance,Zd=r.validateHydratableTextInstance,Xe=r.supportsResources,mc=r.isHostHoistableType,ar=r.getHoistableRoot,pc=r.getResource,yc=r.acquireResource,vc=r.releaseResource,Jd=r.hydrateHoistable,_c=r.mountHoistable,Sc=r.unmountHoistable,kd=r.createHoistableInstance,Wd=r.prepareToCommitHoistables,Id=r.mayResourceSuspendCommit,bc=r.preloadResource,$d=r.suspendResource,$t=r.supportsSingletons,Cc=r.resolveSingletonInstance,tf=r.acquireSingletonInstance,Ec=r.releaseSingletonInstance,Tc=r.isHostSingletonType,ln=r.isSingletonScope,nr=[],sn=-1,rn={},Ge=Math.clz32?Math.clz32:b,ef=Math.log,af=Math.LN2,pl=256,yl=4194304,vl=De.unstable_scheduleCallback,ir=De.unstable_cancelCallback,nf=De.unstable_shouldYield,lf=De.unstable_requestPaint,Qe=De.unstable_now,xc=De.unstable_ImmediatePriority,sf=De.unstable_UserBlockingPriority,lr=De.unstable_NormalPriority,rf=De.unstable_IdlePriority,of=De.log,uf=De.unstable_setDisableYieldValue,Qn=null,Ue=null,sr,Nc,rr=!1,Ac=new WeakMap,on=[],un=0,_l=null,Sl=0,Ve=[],qe=0,Ya=null,la=1,sa="",fe=m(null),Zn=m(null),xa=m(null),bl=m(null),ve=null,te=null,Gt=!1,Fa=null,We=!1,or=Error(C(519)),ze=typeof Object.is=="function"?Object.is:Ot,Cl=m(null),Ka=null,ra=null,cf=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(a,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(a){return a()})}},hf=De.unstable_scheduleCallback,df=De.unstable_NormalPriority,Ft={$$typeof:Ca,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},El=null,cn=null,ur=!1,Tl=!1,cr=!1,hn=0,Jn=null,hr=0,dn=0,fn=null,Rc=ft.S;ft.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Xl(t,e),Rc!==null&&Rc(t,e)};var wa=m(null),ff=Object.prototype.hasOwnProperty,kn=Error(C(460)),dr=Error(C(474)),xl=Error(C(542)),Nl={then:function(){}},gn=null,Pe=[],mn=0,fr=0,Na=!1,gr=!1,pn=m(null),Al=m(0),Aa=0,St=null,Ht=null,kt=null,Rl=!1,yn=!1,ja=!1,Ml=0,Wn=0,vn=null,gf=0,Ol={readContext:vt,use:Wi,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},Mc={readContext:vt,use:Wi,useCallback:function(t,e){return _e().memoizedState=[t,e===void 0?null:e],t},useContext:vt,useEffect:To,useImperativeHandle:function(t,e,a){a=a!=null?a.concat([t]):null,tl(4194308,4,Ro.bind(null,e,t),a)},useLayoutEffect:function(t,e){return tl(4194308,4,t,e)},useInsertionEffect:function(t,e){tl(4,2,t,e)},useMemo:function(t,e){var a=_e();e=e===void 0?null:e;var n=t();if(ja){X(!0);try{t()}finally{X(!1)}}return a.memoizedState=[n,e],n},useReducer:function(t,e,a){var n=_e();if(a!==void 0){var i=a(e);if(ja){X(!0);try{a(e)}finally{X(!1)}}}else i=e;return n.memoizedState=n.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=y0.bind(null,St,t),[n.memoizedState,t]},useRef:function(t){var e=_e();return t={current:t},e.memoizedState=t},useState:function(t){t=us(t);var e=t.queue,a=Lo.bind(null,St,e);return e.dispatch=a,[t.memoizedState,a]},useDebugValue:hs,useDeferredValue:function(t,e){var a=_e();return ds(a,t,e)},useTransition:function(){var t=us(!1);return t=Uo.bind(null,St,t.queue,!0,!1),_e().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,a){var n=St,i=_e();if(Gt){if(a===void 0)throw Error(C(407));a=a()}else{if(a=e(),Vt===null)throw Error(C(349));(At&124)!==0||ro(n,e,a)}i.memoizedState=a;var l={value:a,getSnapshot:e};return i.queue=l,To(uo.bind(null,n,l,t),[t]),n.flags|=2048,Wa(9,$i(),oo.bind(null,n,l,a,e),null),a},useId:function(){var t=_e(),e=Vt.identifierPrefix;if(Gt){var a=sa,n=la;a=(n&~(1<<32-Ge(n)-1)).toString(32)+a,e="«"+e+"R"+a,a=Ml++,0<a&&(e+="H"+a.toString(32)),e+="»"}else a=gf++,e="«"+e+"r"+a.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:fs,useFormState:_o,useActionState:_o,useOptimistic:function(t){var e=_e();e.memoizedState=e.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=a,e=gs.bind(null,St,!0,a),a.dispatch=e,[t,e]},useMemoCache:ss,useCacheRefresh:function(){return _e().memoizedState=p0.bind(null,St)}},Oc={readContext:vt,use:Wi,useCallback:Oo,useContext:vt,useEffect:xo,useImperativeHandle:Mo,useInsertionEffect:No,useLayoutEffect:Ao,useMemo:Do,useReducer:Ii,useRef:Eo,useState:function(){return Ii($e)},useDebugValue:hs,useDeferredValue:function(t,e){var a=Jt();return Go(a,Ht.memoizedState,t,e)},useTransition:function(){var t=Ii($e)[0],e=Jt().memoizedState;return[typeof t=="boolean"?t:zn(t),e]},useSyncExternalStore:so,useId:Bo,useHostTransitionStatus:fs,useFormState:So,useActionState:So,useOptimistic:function(t,e){var a=Jt();return fo(a,Ht,t,e)},useMemoCache:ss,useCacheRefresh:Ho},mf={readContext:vt,use:Wi,useCallback:Oo,useContext:vt,useEffect:xo,useImperativeHandle:Mo,useInsertionEffect:No,useLayoutEffect:Ao,useMemo:Do,useReducer:os,useRef:Eo,useState:function(){return os($e)},useDebugValue:hs,useDeferredValue:function(t,e){var a=Jt();return Ht===null?ds(a,t,e):Go(a,Ht.memoizedState,t,e)},useTransition:function(){var t=os($e)[0],e=Jt().memoizedState;return[typeof t=="boolean"?t:zn(t),e]},useSyncExternalStore:so,useId:Bo,useHostTransitionStatus:fs,useFormState:Co,useActionState:Co,useOptimistic:function(t,e){var a=Jt();return Ht!==null?fo(a,Ht,t,e):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ss,useCacheRefresh:Ho},_n=null,In=0,Sn=Yo(!0),Dc=Yo(!1),Ye=m(null),Ie=null,ee=m(0),mr={enqueueSetState:function(t,e,a){t=t._reactInternals;var n=Me(),i=ga(n);i.payload=e,a!=null&&(i.callback=a),e=ma(t,i,n),e!==null&&(Oe(e,t,n),Dn(e,t,n))},enqueueReplaceState:function(t,e,a){t=t._reactInternals;var n=Me(),i=ga(n);i.tag=1,i.payload=e,a!=null&&(i.callback=a),e=ma(t,i,n),e!==null&&(Oe(e,t,n),Dn(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var a=Me(),n=ga(a);n.tag=2,e!=null&&(n.callback=e),e=ma(t,n,a),e!==null&&(Oe(e,t,a),Dn(e,t,a))}},Gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Uc=Error(C(461)),le=!1,pr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},oa=!1,Xt=!1,yr=!1,zc=typeof WeakSet=="function"?WeakSet:Set,se=null,Wt=null,be=!1,Ze=null,bn=8192,pf={getCacheForType:function(t){var e=vt(Ft),a=e.data.get(t);return a===void 0&&(a=t(),e.data.set(t,a)),a}},Dl=0,Gl=1,Ul=2,zl=3,Bl=4;if(typeof Symbol=="function"&&Symbol.for){var $n=Symbol.for;Dl=$n("selector.component"),Gl=$n("selector.has_pseudo_class"),Ul=$n("selector.role"),zl=$n("selector.test_id"),Bl=$n("selector.text")}var yf=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Vt=null,Et=null,At=0,Bt=0,Be=null,Ra=!1,Cn=!1,vr=!1,ua=0,Kt=0,Ma=0,Xa=0,_r=0,Fe=0,En=0,ti=null,Ce=null,Sr=!1,br=0,ei=1/0,Hl=null,Oa=null,ge=0,Da=null,Tn=null,xn=0,Cr=0,Er=null,Bc=null,ai=0,Tr=null;return Ct.attemptContinuousHydration=function(t){if(t.tag===13){var e=ka(t,67108864);e!==null&&Oe(e,t,67108864),js(t,67108864)}},Ct.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var e=Me();e=V(e);var a=ka(t,e);a!==null&&Oe(a,t,e),js(t,e)}},Ct.attemptSynchronousHydration=function(t){switch(t.tag){case 3:if(t=t.stateNode,t.current.memoizedState.isDehydrated){var e=E(t.pendingLanes);if(e!==0){for(t.pendingLanes|=2,t.entangledLanes|=2;e;){var a=1<<31-Ge(e);t.entanglements[1]|=a,e&=~a}It(t),(Nt&6)===0&&(ei=Qe()+500,ne(0))}}break;case 13:e=ka(t,2),e!==null&&Oe(e,t,2),Du(),js(t,2)}},Ct.batchedUpdates=function(t,e){return t(e)},Ct.createComponentSelector=function(t){return{$$typeof:Dl,value:t}},Ct.createContainer=function(t,e,a,n,i,l,M,Y,k,at){return Zu(t,e,!1,null,a,n,l,M,Y,k,at,null)},Ct.createHasPseudoClassSelector=function(t){return{$$typeof:Gl,value:t}},Ct.createHydrationContainer=function(t,e,a,n,i,l,M,Y,k,at,it,ot,ut){return t=Zu(a,n,!0,t,i,l,Y,k,at,it,ot,ut),t.context=Ju(null),a=t.current,n=Me(),n=V(n),i=ga(n),i.callback=e??null,ma(a,i,n),e=n,t.current.lanes=e,K(t,e),It(t),t},Ct.createPortal=function(t,e,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:en,key:n==null?null:""+n,children:t,containerInfo:e,implementation:a}},Ct.createRoleSelector=function(t){return{$$typeof:Ul,value:t}},Ct.createTestNameSelector=function(t){return{$$typeof:zl,value:t}},Ct.createTextSelector=function(t){return{$$typeof:Bl,value:t}},Ct.defaultOnCaughtError=function(t){console.error(t)},Ct.defaultOnRecoverableError=function(t){Gc(t)},Ct.defaultOnUncaughtError=function(t){Gc(t)},Ct.deferredUpdates=function(t){var e=ft.T,a=ia();try{return ie(32),ft.T=null,t()}finally{ie(a),ft.T=e}},Ct.discreteUpdates=function(t,e,a,n,i){var l=ft.T,M=ia();try{return ie(2),ft.T=null,t(e,a,n,i)}finally{ie(M),ft.T=l,Nt===0&&(ei=Qe()+500)}},Ct.findAllNodes=Ls,Ct.findBoundingRects=function(t,e){if(!jn)throw Error(C(363));e=Ls(t,e),t=[];for(var a=0;a<e.length;a++)t.push(sd(e[a]));for(e=t.length-1;0<e;e--){a=t[e];for(var n=a.x,i=n+a.width,l=a.y,M=l+a.height,Y=e-1;0<=Y;Y--)if(e!==Y){var k=t[Y],at=k.x,it=at+k.width,ot=k.y,ut=ot+k.height;if(n>=at&&l>=ot&&i<=it&&M<=ut){t.splice(e,1);break}else if(n!==at||a.width!==k.width||ut<l||ot>M){if(!(l!==ot||a.height!==k.height||it<n||at>i)){at>n&&(k.width+=at-n,k.x=n),it<i&&(k.width=i-at),t.splice(e,1);break}}else{ot>l&&(k.height+=ot-l,k.y=l),ut<M&&(k.height=M-ot),t.splice(e,1);break}}}return t},Ct.findHostInstance=ku,Ct.findHostInstanceWithNoPortals=function(t){return t=d(t),t=t!==null?p(t):null,t===null?null:wn(t.stateNode)},Ct.findHostInstanceWithWarning=function(t){return ku(t)},Ct.flushPassiveEffects=Kn,Ct.flushSyncFromReconciler=function(t){var e=Nt;Nt|=1;var a=ft.T,n=ia();try{if(ie(2),ft.T=null,t)return t()}finally{ie(n),ft.T=a,Nt=e,(Nt&6)===0&&ne(0)}},Ct.flushSyncWork=Du,Ct.focusWithin=function(t,e){if(!jn)throw Error(C(363));for(t=zs(t),e=Au(t,e),e=Array.from(e),t=0;t<e.length;){var a=e[t++],n=a.tag;if(!Xn(a)){if((n===5||n===26||n===27)&&ud(a.stateNode))return!0;for(a=a.child;a!==null;)e.push(a),a=a.sibling}}return!1},Ct.getFindAllNodesFailureDescription=function(t,e){if(!jn)throw Error(C(363));var a=0,n=[];t=[zs(t),0];for(var i=0;i<t.length;){var l=t[i++],M=l.tag,Y=t[i++],k=e[Y];if((M!==5&&M!==26&&M!==27||!Xn(l))&&(Bs(l,k)&&(n.push(Hs(k)),Y++,Y>a&&(a=Y)),Y<e.length))for(l=l.child;l!==null;)t.push(l,Y),l=l.sibling}if(a<e.length){for(t=[];a<e.length;a++)t.push(Hs(e[a]));return`findAllNodes was able to match part of the selector:
  `+(n.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},Ct.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 27:case 5:return wn(t.child.stateNode);default:return t.child.stateNode}},Ct.injectIntoDevTools=function(){var t={bundleType:0,version:q0,rendererPackageName:P0,currentDispatcherRef:ft,reconcilerVersion:"19.1.0"};if(ac!==null&&(t.rendererConfig=ac),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Qn=e.inject(t),Ue=e}catch{}t=!!e.checkDCE}}return t},Ct.isAlreadyRendering=function(){return(Nt&6)!==0},Ct.observeVisibleRects=function(t,e,a,n){if(!jn)throw Error(C(363));t=Ls(t,e);var i=cd(t,a,n).disconnect;return{disconnect:function(){i()}}},Ct.shouldError=function(){return null},Ct.shouldSuspend=function(){return!1},Ct.startHostTransition=function(t,e,a,n){if(t.tag!==5)throw Error(C(476));var i=zo(t).queue;Uo(t,i,e,nn,a===null?G:function(){var l=zo(t).next.queue;return Hn(t,l,{},Me()),a(n)})},Ct.updateContainer=function(t,e,a,n){var i=e.current,l=Me();return Wu(i,l,t,e,a,n),l},Ct.updateContainerSync=function(t,e,a,n){return Wu(e.current,2,t,e,a,n),2},Ct},h.exports.default=h.exports,Object.defineProperty(h.exports,"__esModule",{value:!0})}(Hr)),Hr.exports}var Fh;function m1(){return Fh||(Fh=1,Br.exports=g1()),Br.exports}var p1=m1();const y1=Yl(p1);var Lr={exports:{}},da={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh;function v1(){return Kh||(Kh=1,da.ConcurrentRoot=1,da.ContinuousEventPriority=8,da.DefaultEventPriority=32,da.DiscreteEventPriority=2,da.IdleEventPriority=268435456,da.LegacyRoot=0,da.NoEventPriority=0),da}var wh;function _1(){return wh||(wh=1,Lr.exports=v1()),Lr.exports}var wl=_1(),S1=bt();const jh={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Xh=!1,Qh=!1;const Pl=".react-konva-event",b1=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,C1=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,E1={};function jl(h,r,H=E1){if(!Xh&&"zIndex"in r&&(console.warn(C1),Xh=!0),!Qh&&r.draggable){var G=r.x!==void 0||r.y!==void 0,C=r.onDragEnd||r.onDragMove;G&&!C&&(console.warn(b1),Qh=!0)}for(var v in H)if(!jh[v]){var g=v.slice(0,2)==="on",d=H[v]!==r[v];if(g&&d){var f=v.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),h.off(f,H[v])}var p=!r.hasOwnProperty(v);p&&h.setAttr(v,void 0)}var y=r._useStrictMode,T={},m=!1;const u={};for(var v in r)if(!jh[v]){var g=v.slice(0,2)==="on",o=H[v]!==r[v];if(g&&o){var f=v.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),r[v]&&(u[f]=r[v])}!g&&(r[v]!==H[v]||y&&r[v]!==h.getAttr(v))&&(m=!0,T[v]=r[v])}m&&(h.setAttrs(T),za(h));for(var f in u)h.off(f+Pl),h.on(f+Pl,u[f])}function za(h){if(!S1.Konva.autoDrawEnabled){var r=h.getLayer()||h.getStage();r&&r.batchDraw()}}var Vr=$h();const s0={},T1={};ql.Node.prototype._applyProps=jl;let r0=wl.DefaultEventPriority;function x1(h,r){if(typeof r=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${r}`);return}h.add(r),za(h)}function N1(h,r,H){let G=ql[h];G||(console.error(`Konva has no node with the type ${h}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${h}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),G=ql.Group);const C={},v={};for(var g in r)if(g!=="ref"){var d=g.slice(0,2)==="on";d?v[g]=r[g]:C[g]=r[g]}const f=new G(C);return jl(f,v),f}function A1(h,r,H){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${h}"`)}function R1(h,r,H){return!1}function M1(h){return h}function O1(){return null}function D1(){return null}function G1(h,r,H,G){return T1}function U1(){}function z1(h){}function B1(h,r){return!1}function H1(){return s0}function L1(){return s0}const V1=setTimeout,q1=clearTimeout,P1=!0,Y1=h=>{h()},F1=-1;function K1(h,r){return!1}const w1=!1,j1=!1,X1=!0,Q1=!1,Z1=!1;function J1(h,r){r.parent===h?r.moveToTop():h.add(r),za(h)}function k1(h,r){r.parent===h?r.moveToTop():h.add(r),za(h)}function o0(h,r,H){r._remove(),h.add(r),r.setZIndex(H.getZIndex()),za(h)}function W1(h,r,H){o0(h,r,H)}function I1(h,r){r.destroy(),r.off(Pl),za(h)}function $1(h,r){r.destroy(),r.off(Pl),za(h)}function t2(h,r,H){console.error(`Text components are not yet supported in ReactKonva. You text is: "${H}"`)}function e2(h,r,H){}function a2(h,r,H,G){jl(h,G,H)}function n2(h){h.hide(),za(h)}function i2(h){}function l2(h,r){(r.visible==null||r.visible)&&h.show()}function s2(h,r){}function r2(h){}function o2(){}function u2(){return wl.DefaultEventPriority}function c2(){}function h2(){return null}function d2(h){r0=h}function f2(){return r0}function g2(){return wl.DiscreteEventPriority}function m2(){return!1}function p2(){}function y2(){return!1}function v2(){return!0}function _2(){}function S2(){}function b2(){return null}const C2=null;function E2(){}const T2=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:C2,appendChild:J1,appendChildToContainer:k1,appendInitialChild:x1,cancelTimeout:q1,clearContainer:r2,commitMount:e2,commitTextUpdate:t2,commitUpdate:a2,createInstance:N1,createTextInstance:A1,detachDeletedInstance:o2,finalizeInitialChildren:R1,getChildHostContext:L1,getCurrentEventPriority:u2,getCurrentUpdatePriority:f2,getInstanceFromScope:h2,getPublicInstance:M1,getRootHostContext:H1,hideInstance:n2,hideTextInstance:i2,idlePriority:Vr.unstable_IdlePriority,insertBefore:o0,insertInContainerBefore:W1,isPrimaryRenderer:w1,maySuspendCommit:y2,noTimeout:F1,now:Vr.unstable_now,preloadInstance:v2,prepareForCommit:O1,preparePortalMount:D1,prepareScopeUpdate:c2,prepareUpdate:G1,removeChild:I1,removeChildFromContainer:$1,requestPostPaintCallback:p2,resetAfterCommit:U1,resetFormInstance:E2,resetTextContent:z1,resolveUpdatePriority:g2,run:Vr.unstable_runWithPriority,scheduleMicrotask:Y1,scheduleTimeout:V1,setCurrentUpdatePriority:d2,shouldAttemptEagerTransition:m2,shouldDeprioritizeSubtree:B1,shouldSetTextContent:K1,startSuspendingCommit:_2,supportsHydration:Z1,supportsMicrotasks:P1,supportsMutation:X1,supportsPersistence:Q1,suspendInstance:S2,unhideInstance:l2,unhideTextInstance:s2,waitForCommitToBeReady:b2,warnsIfNotActing:j1},Symbol.toStringTag,{value:"Module"}));function u0(h,r,H){if(!h)return;if(H(h)===!0)return h;let G=h.child;for(;G;){const C=u0(G,r,H);if(C)return C;G=G.sibling}}function c0(h){try{return Object.defineProperties(h,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return h}}const Qr=c0(Ut.createContext(null));class h0 extends Ut.Component{render(){return Ut.createElement(Qr.Provider,{value:this._reactInternals},this.props.children)}}function x2(){const h=Ut.useContext(Qr);if(h===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const r=Ut.useId();return Ut.useMemo(()=>{for(const H of[h,h?.alternate]){if(!H)continue;const G=u0(H,!1,C=>{let v=C.memoizedState;for(;v;){if(v.memoizedState===r)return!0;v=v.next}});if(G)return G}},[h,r])}const N2=Symbol.for("react.context"),A2=h=>h!==null&&typeof h=="object"&&"$$typeof"in h&&h.$$typeof===N2;function R2(){const h=x2(),[r]=Ut.useState(()=>new Map);r.clear();let H=h;for(;H;){const G=H.type;A2(G)&&G!==Qr&&!r.has(G)&&r.set(G,Ut.use(c0(G))),H=H.return}return r}function M2(){const h=R2();return Ut.useMemo(()=>Array.from(h.keys()).reduce((r,H)=>G=>Ut.createElement(r,null,Ut.createElement(H.Provider,{...G,value:h.get(H)})),r=>Ut.createElement(h0,{...r})),[h])}if(ae.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function O2(h){const r=ae.useRef({});return ae.useLayoutEffect(()=>{r.current=h}),ae.useLayoutEffect(()=>()=>{r.current={}},[]),r.current}const D2=()=>{const h=ae.useRef(0);return ae.useMemo(()=>{h.current++},[]),h.current>1},G2=h=>{const r=ae.useRef(null),H=ae.useRef(null),G=ae.useRef(null),C=O2(h),v=M2(),g=ae.useRef(!1),d=p=>{const{forwardedRef:y}=h;y&&(typeof y=="function"?y(p):y.current=p)},f=D2();return ae.useLayoutEffect(()=>g.current&&f?()=>{g.current=!1,d(null),Rn.updateContainer(null,G.current,null),H.current.destroy()}:(g.current=!0,H.current=new ql.Stage({width:h.width,height:h.height,container:r.current}),d(H.current),G.current=Rn.createContainer(H.current,wl.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Rn.updateContainer(ae.createElement(v,{},h.children),G.current,null,()=>{}),()=>{f||(d(null),Rn.updateContainer(null,G.current,null),H.current.destroy())}),[]),ae.useLayoutEffect(()=>{d(H.current),jl(H.current,h,C),Rn.updateContainer(ae.createElement(v,{},h.children),G.current,null)}),ae.createElement("div",{ref:r,id:h.id,accessKey:h.accessKey,className:h.className,role:h.role,style:h.style,tabIndex:h.tabIndex,title:h.title})},Zh="Layer",U2="Rect",z2="Line",B2="Image",Rn=y1(T2);Rn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ae.version,rendererPackageName:"react-konva"});const H2=ae.forwardRef((h,r)=>ae.createElement(h0,{},ae.createElement(G2,{...h,forwardedRef:r})));var qr,Jh;function L2(){if(Jh)return qr;Jh=1;var h=Ih();return qr=function(H,G,C){const v=h.useRef("loading"),g=h.useRef(),[d,f]=h.useState(0),p=h.useRef(),y=h.useRef(),T=h.useRef();return(p.current!==H||y.current!==G||T.current!==C)&&(v.current="loading",g.current=void 0,p.current=H,y.current=G,T.current=C),h.useLayoutEffect(function(){if(!H)return;var m=document.createElement("img");function u(){m.decode().catch(()=>{}).finally(()=>{v.current="loaded",g.current=m,f(Math.random())})}function o(){v.current="failed",g.current=void 0,f(Math.random())}return m.addEventListener("load",u),m.addEventListener("error",o),G&&(m.crossOrigin=G),C&&(m.referrerPolicy=C),m.src=H,function(){m.removeEventListener("load",u),m.removeEventListener("error",o)}},[H,G,C]),[g.current,v.current]},qr}var V2=L2();const q2=Yl(V2),kh=(h,r)=>Math.sqrt(Math.pow(r.x-h.x,2)+Math.pow(r.y-h.y,2)),P2=Ut.forwardRef(({motifSrc:h,brushColor:r,brushSize:H,width:G,height:C,activeTool:v},g)=>{const[d]=q2(h,"anonymous"),[f,p]=Ut.useState([]),[y,T]=Ut.useState({scale:1,x:0,y:0}),[m,u]=Ut.useState(!1),o=Ut.useRef(!1),b=Ut.useRef(0),E=Ut.useRef(null),O=Ut.useRef(null),c=Ut.useRef(null);Ut.useEffect(()=>{const F=tt=>{tt.code==="Space"&&(tt.preventDefault(),u(!0))},q=tt=>{tt.code==="Space"&&(tt.preventDefault(),u(!1))};return window.addEventListener("keydown",F),window.addEventListener("keyup",q),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",q)}},[]);let s={x:0,y:0,width:0,height:0},_={x:0,y:0,width:0,height:0};if(d){const F=G,q=C,tt=d.width/d.height,S=F/q;let A=d.width,z=d.height;tt>S?(A=F*.9,z=A/tt):(z=q*.9,A=z*tt);const P=Math.max(A,z)*1.5,I=Math.min(P,F*.95,q*.95);_={width:I,height:I,x:(F-I)/2,y:(q-I)/2},s={width:A,height:z,x:_.x+(I-A)/2,y:_.y+(I-z)/2}}Ut.useImperativeHandle(g,()=>({undo:()=>p(f.slice(0,-1)),clear:()=>p([]),getDownloadDataURL:()=>{if(!d||!c.current)return null;const F=document.createElement("div"),q=new zr.Stage({container:F,width:d.width,height:d.height}),tt=new zr.Layer;q.add(tt);const S=d.width/s.width;return f.forEach(A=>{const z=A.points.map((B,P)=>P%2===0?(B-s.x)*S:(B-s.y)*S);tt.add(new zr.Line({points:z,stroke:A.color,strokeWidth:A.size*S,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:A.tool==="eraser"?"destination-out":"source-over"}))}),tt.draw(),q.toDataURL({mimeType:"image/png"})}}));const x=F=>{const q=F.target.getStage();if(!q)return null;const tt=q.getPointerPosition();return tt?{x:(tt.x-q.x())/q.scaleX(),y:(tt.y-q.y())/q.scaleY()}:null},U=F=>{if(m||F.evt.button!==0)return;o.current=!0;const q=x(F);q&&p([...f,{points:[q.x,q.y],color:r,size:H,tool:v}])},K=F=>{if(!o.current||m)return;const q=x(F);if(q){let tt=f[f.length-1];tt.points=tt.points.concat([q.x,q.y]),p([...f.slice(0,-1),tt])}},N=()=>{o.current=!1},R=F=>{F.evt.preventDefault();const q=F.evt.touches;if(q.length===1){o.current=!0;const tt=x(F);tt&&p([...f,{points:[tt.x,tt.y],color:r,size:H,tool:v}])}else if(q.length>1){o.current=!1;const tt=q[0],S=q[1];b.current=kh({x:tt.clientX,y:tt.clientY},{x:S.clientX,y:S.clientY}),E.current={x:(tt.clientX+S.clientX)/2,y:(tt.clientY+S.clientY)/2}}},D=F=>{F.evt.preventDefault();const q=F.evt.touches,tt=F.target.getStage();if(tt){if(q.length===1&&o.current){const S=x(F);if(S){let A=f[f.length-1];A.points=A.points.concat([S.x,S.y]),p([...f.slice(0,-1),A])}}else if(q.length>1){const S=q[0],A=q[1],z=kh({x:S.clientX,y:S.clientY},{x:A.clientX,y:A.clientY}),B={x:(S.clientX+A.clientX)/2,y:(S.clientY+A.clientY)/2};if(!b.current||!E.current)return;const I=tt.scaleX()*(z/b.current),j=B.x-E.current.x,et=B.y-E.current.y;T({scale:I,x:tt.x()+j,y:tt.y()+et}),b.current=z,E.current=B}}},V=()=>{o.current=!1,b.current=0,E.current=null},w=F=>{F.evt.preventDefault();const q=F.target.getStage();if(q)if(F.evt.ctrlKey||F.evt.metaKey){const S=q.scaleX(),A=q.getPointerPosition();if(!A)return;const z={x:(A.x-q.x())/S,y:(A.y-q.y())/S},B=F.evt.deltaY>0?S/1.05:S*1.05;T({scale:B,x:A.x-z.x*B,y:A.y-z.y*B})}else{let S=F.evt.shiftKey?F.evt.deltaY/4:F.evt.deltaX/4,A=F.evt.shiftKey?0:F.evt.deltaY/4;T(z=>({...z,x:z.x-S,y:z.y-A}))}},X=F=>{F.rect(s.x,s.y,s.width,s.height)};return yt.jsx("div",{style:{cursor:m?"grab":v==="eraser"?"cell":"crosshair",touchAction:"none"},children:yt.jsxs(H2,{ref:O,width:G,height:C,style:{backgroundColor:"#f0f0f0"},onMouseDown:U,onMouseMove:K,onMouseUp:N,onTouchStart:R,onTouchMove:D,onTouchEnd:V,onWheel:w,draggable:m,scaleX:y.scale,scaleY:y.scale,x:y.x,y:y.y,children:[yt.jsxs(Zh,{children:[yt.jsx(U2,{..._,fill:"white",shadowBlur:10,shadowOpacity:.2,cornerRadius:4}),yt.jsx(B2,{image:d,...s})]}),yt.jsx(Zh,{ref:c,clipFunc:X,children:f.map((F,q)=>yt.jsx(z2,{points:F.points,stroke:F.color,strokeWidth:F.size,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:F.tool==="eraser"?"destination-out":"source-over"},q))})]})})}),Wh=[{id:"parang-rusak",name:"Parang Rusak",src:"https://placehold.co/512x512/FCECD5/4A2E20?text=Parang+Rusak"},{id:"mega-mendung",name:"Mega Mendung",src:"https://placehold.co/800x600/D1E5F0/1E3A8A?text=Mega+Mendung"},{id:"kawung",name:"Kawung",src:"https://placehold.co/600x600/E0E0E0/333333?text=Kawung"}],c5=()=>{const[h,r]=Ut.useState(Wh[0].src),[H,G]=Ut.useState("#000000"),[C,v]=Ut.useState(5),[g,d]=Ut.useState("pen"),[f,p]=Ut.useState({width:0,height:0}),y=Ut.useRef(null),T=Ut.useRef(null);Ut.useEffect(()=>{const E=()=>{if(T.current){const O=T.current.offsetWidth,c=window.innerHeight*.5;p({width:O,height:c})}};return E(),window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[]);const m=()=>y.current?.undo(),u=()=>y.current?.clear(),o=()=>{const E=y.current?.getDownloadDataURL();if(E){const O=document.createElement("a");O.href=E,O.download="batik-karyaku_goresan.png",document.body.appendChild(O),O.click(),document.body.removeChild(O)}},b=()=>{alert(`Bantuan Navigasi Kanvas:

- Gambar: Klik dan geser dengan mouse atau gunakan satu jari di layar sentuh.
- Geser (Pan): Tahan tombol Spasi, lalu klik dan geser.
- Zoom: Tahan tombol Ctrl (atau Cmd di Mac), lalu gunakan scroll wheel, atau gunakan dua jari (pinch-to-zoom) di layar sentuh.
- Geser Vertikal: Gunakan scroll wheel.
- Geser Horizontal: Tahan tombol Shift, lalu gunakan scroll wheel.`)};return yt.jsx(_f,{children:yt.jsxs("div",{className:"mx-auto mt-8 flex w-full max-w-7xl flex-col items-center gap-8 px-4 sm:px-6 lg:px-8",children:[yt.jsxs("div",{className:"flex w-full flex-col gap-4",children:[yt.jsxs("div",{className:"flex flex-col",children:[yt.jsx("h1",{className:"text-2xl font-bold sm:text-3xl",children:"SELAMAT DATANG DI RUANG BATIK"}),yt.jsx("p",{className:"mt-2 max-w-3xl",children:"Jelajahi dunia batik digital yang interaktif. Pilih motif khas, beri warna sesuai imajinasi, dan unduh karya Anda sebagai bentuk ekspresi budaya."})]}),yt.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-lg bg-[#fcedd5] p-2 shadow-md",children:[yt.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[yt.jsxs("div",{className:"flex items-center gap-1 rounded-md bg-white/50 p-1",children:[yt.jsx("button",{onClick:()=>d("pen"),className:`rounded p-2 transition-colors ${g==="pen"?"bg-blue-200 text-blue-800":"hover:bg-gray-200"}`,title:"Pen",children:yt.jsx(xf,{size:20})}),yt.jsx("button",{onClick:()=>d("eraser"),className:`rounded p-2 transition-colors ${g==="eraser"?"bg-blue-200 text-blue-800":"hover:bg-gray-200"}`,title:"Eraser",children:yt.jsx(Ef,{size:20})})]}),yt.jsxs("div",{className:"flex items-center gap-2",children:[yt.jsx("label",{htmlFor:"color",className:"font-medium text-[#4A2E20]",children:"Warna:"}),yt.jsx("input",{id:"color",type:"color",value:H,onChange:E=>G(E.target.value),className:"h-8 w-8 cursor-pointer rounded border-none"})]}),yt.jsxs("div",{className:"flex items-center gap-2",children:[yt.jsx("label",{htmlFor:"brushSize",className:"font-medium text-[#4A2E20]",children:"Ukuran:"}),yt.jsx("input",{id:"brushSize",type:"range",min:"1",max:"50",value:C,onChange:E=>v(Number(E.target.value)),className:"cursor-pointer"}),yt.jsx("span",{className:"text-[#4A2E20]",children:C})]})]}),yt.jsxs("div",{className:"flex flex-wrap gap-2",children:[yt.jsx("button",{onClick:m,className:"rounded bg-[#955932] px-3 py-1 text-white shadow transition hover:bg-[#4A2E20]",children:"Undo"}),yt.jsx("button",{onClick:u,className:"rounded bg-[#955932] px-3 py-1 text-white shadow transition hover:bg-[#4A2E20]",children:"Erase"}),yt.jsx("button",{onClick:o,className:"rounded bg-green-700 px-3 py-1 text-white shadow transition hover:bg-green-800",children:"Download"}),yt.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 rounded bg-sky-600 px-3 py-1 text-white shadow transition hover:bg-sky-700",children:[yt.jsx(bf,{size:16}),yt.jsx("span",{children:"Bantuan"})]})]})]}),yt.jsx("div",{ref:T,className:"w-full",children:f.width>0&&yt.jsx(P2,{ref:y,motifSrc:h,brushColor:H,brushSize:C,width:f.width,height:f.height,activeTool:g})})]}),yt.jsxs("div",{className:"w-full",children:[yt.jsx("h2",{className:"mb-4 text-center text-xl font-bold text-[#4A2E20] sm:text-2xl",children:"Pilih Motif Tersedia"}),yt.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:Wh.map(E=>yt.jsxs("div",{className:`group cursor-pointer overflow-hidden rounded-lg border-4 shadow-md transition-all hover:-translate-y-1 hover:shadow-xl ${h===E.src?"border-blue-500":"border-[#955932]"}`,onClick:()=>r(E.src),children:[yt.jsx("img",{src:E.src,alt:E.name,className:"h-32 w-full object-cover transition-transform group-hover:scale-105 sm:h-40"}),yt.jsx("p",{className:"bg-[#fcedd5] p-2 text-center font-semibold text-[#4A2E20]",children:E.name})]},E.id))})]})]})})};export{c5 as default};
